import{f as Ue,a as xe,c as xs,t as cl}from"../chunks/BxmyPRf1.js";import"../chunks/BXrivV9W.js";import{o as tu,c as $c}from"../chunks/D1nSMilh.js";import{m as dl,a1 as ni,b0 as zt,b1 as Ai,a4 as oi,e as We,g as _,af as ve,D as qe,a5 as G,a7 as pe,a6 as Y,ap as os,p as pl,b as Oe,a3 as Tt,a2 as ks,a8 as Vc,ao as Uc}from"../chunks/CnXXBi7t.js";import{e as Jt,s as De}from"../chunks/Az-a4Y8t.js";import{i as Bt}from"../chunks/WKEoO-R7.js";import{h as jc}from"../chunks/D3fKxdlc.js";import{t as Ii,f as iu,a as Ws}from"../chunks/DFcJXwng.js";import{p as Et,b as ru}from"../chunks/DUOhS_qE.js";import{i as li}from"../chunks/DIljoNzS.js";import{b as Hc}from"../chunks/Do_qihZI.js";import{g as Yc,a as su,c as gl,p as Xc}from"../chunks/Cybp5cfo.js";import{e as Do,i as nu}from"../chunks/3cJGA7mN.js";import{r as Gc,a as Kc}from"../chunks/DAZecabI.js";const Zc=!0;function Jc(s,e,t){var i=s==null?"":""+s;return e&&(i=i?i+" "+e:e),i===""?null:i}function Ui(s,e,t,i,r,n){var o=s.__className;if(dl||o!==t||o===void 0){var l=Jc(t,i);(!dl||l!==s.getAttribute("class"))&&(l==null?s.removeAttribute("class"):s.className=l),s.__className=t}return n}const ml=Zc,ed=!0,Cv=Object.freeze(Object.defineProperty({__proto__:null,prerender:ed},Symbol.toStringTag,{value:"Module"}));function td(s,e=300){let t;return function(...i){clearTimeout(t),t=setTimeout(()=>s.apply(this,i),e)}}async function ou(s){try{return await navigator.clipboard.writeText(s),!0}catch{const t=document.createElement("textarea");return t.value=s,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),!0}}var hr={exports:{}},yl;function id(){if(yl)return hr.exports;yl=1;var s=String,e=function(){return{isColorSupported:!1,reset:s,bold:s,dim:s,italic:s,underline:s,inverse:s,hidden:s,strikethrough:s,black:s,red:s,green:s,yellow:s,blue:s,magenta:s,cyan:s,white:s,gray:s,bgBlack:s,bgRed:s,bgGreen:s,bgYellow:s,bgBlue:s,bgMagenta:s,bgCyan:s,bgWhite:s,blackBright:s,redBright:s,greenBright:s,yellowBright:s,blueBright:s,magentaBright:s,cyanBright:s,whiteBright:s,bgBlackBright:s,bgRedBright:s,bgGreenBright:s,bgYellowBright:s,bgBlueBright:s,bgMagentaBright:s,bgCyanBright:s,bgWhiteBright:s}};return hr.exports=e(),hr.exports.createColors=e,hr.exports}const rd={},sd=Object.freeze(Object.defineProperty({__proto__:null,default:rd},Symbol.toStringTag,{value:"Module"})),ot=Yc(sd);var $s,vl;function Qo(){if(vl)return $s;vl=1;let s=id(),e=ot;class t extends Error{constructor(r,n,o,l,a,u){super(r),this.name="CssSyntaxError",this.reason=r,a&&(this.file=a),l&&(this.source=l),u&&(this.plugin=u),typeof n<"u"&&typeof o<"u"&&(typeof n=="number"?(this.line=n,this.column=o):(this.line=n.line,this.column=n.column,this.endLine=o.line,this.endColumn=o.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,t)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(r){if(!this.source)return"";let n=this.source;r==null&&(r=s.isColorSupported);let o=d=>d,l=d=>d,a=d=>d;if(r){let{bold:d,gray:g,red:p}=s.createColors(!0);l=m=>d(p(m)),o=m=>g(m),e&&(a=m=>e(m))}let u=n.split(/\r?\n/),h=Math.max(this.line-3,0),f=Math.min(this.line+2,u.length),c=String(f).length;return u.slice(h,f).map((d,g)=>{let p=h+1+g,m=" "+(" "+p).slice(-c)+" | ";if(p===this.line){if(d.length>160){let O=20,w=Math.max(0,this.column-O),b=Math.max(this.column+O,this.endColumn+O),v=d.slice(w,b),S=o(m.replace(/\d/g," "))+d.slice(0,Math.min(this.column-1,O-1)).replace(/[^\t]/g," ");return l(">")+o(m)+a(v)+`
 `+S+l("^")}let y=o(m.replace(/\d/g," "))+d.slice(0,this.column-1).replace(/[^\t]/g," ");return l(">")+o(m)+a(d)+`
 `+y+l("^")}return" "+o(m)+a(d)}).join(`
`)}toString(){let r=this.showSourceCode();return r&&(r=`

`+r+`
`),this.name+": "+this.message+r}}return $s=t,t.default=t,$s}var Vs,Ol;function lu(){if(Ol)return Vs;Ol=1;const s={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function e(i){return i[0].toUpperCase()+i.slice(1)}class t{constructor(r){this.builder=r}atrule(r,n){let o="@"+r.name,l=r.params?this.rawValue(r,"params"):"";if(typeof r.raws.afterName<"u"?o+=r.raws.afterName:l&&(o+=" "),r.nodes)this.block(r,o+l);else{let a=(r.raws.between||"")+(n?";":"");this.builder(o+l+a,r)}}beforeAfter(r,n){let o;r.type==="decl"?o=this.raw(r,null,"beforeDecl"):r.type==="comment"?o=this.raw(r,null,"beforeComment"):n==="before"?o=this.raw(r,null,"beforeRule"):o=this.raw(r,null,"beforeClose");let l=r.parent,a=0;for(;l&&l.type!=="root";)a+=1,l=l.parent;if(o.includes(`
`)){let u=this.raw(r,null,"indent");if(u.length)for(let h=0;h<a;h++)o+=u}return o}block(r,n){let o=this.raw(r,"between","beforeOpen");this.builder(n+o+"{",r,"start");let l;r.nodes&&r.nodes.length?(this.body(r),l=this.raw(r,"after")):l=this.raw(r,"after","emptyBody"),l&&this.builder(l),this.builder("}",r,"end")}body(r){let n=r.nodes.length-1;for(;n>0&&r.nodes[n].type==="comment";)n-=1;let o=this.raw(r,"semicolon");for(let l=0;l<r.nodes.length;l++){let a=r.nodes[l],u=this.raw(a,"before");u&&this.builder(u),this.stringify(a,n!==l||o)}}comment(r){let n=this.raw(r,"left","commentLeft"),o=this.raw(r,"right","commentRight");this.builder("/*"+n+r.text+o+"*/",r)}decl(r,n){let o=this.raw(r,"between","colon"),l=r.prop+o+this.rawValue(r,"value");r.important&&(l+=r.raws.important||" !important"),n&&(l+=";"),this.builder(l,r)}document(r){this.body(r)}raw(r,n,o){let l;if(o||(o=n),n&&(l=r.raws[n],typeof l<"u"))return l;let a=r.parent;if(o==="before"&&(!a||a.type==="root"&&a.first===r||a&&a.type==="document"))return"";if(!a)return s[o];let u=r.root();if(u.rawCache||(u.rawCache={}),typeof u.rawCache[o]<"u")return u.rawCache[o];if(o==="before"||o==="after")return this.beforeAfter(r,o);{let h="raw"+e(o);this[h]?l=this[h](u,r):u.walk(f=>{if(l=f.raws[n],typeof l<"u")return!1})}return typeof l>"u"&&(l=s[o]),u.rawCache[o]=l,l}rawBeforeClose(r){let n;return r.walk(o=>{if(o.nodes&&o.nodes.length>0&&typeof o.raws.after<"u")return n=o.raws.after,n.includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),n&&(n=n.replace(/\S/g,"")),n}rawBeforeComment(r,n){let o;return r.walkComments(l=>{if(typeof l.raws.before<"u")return o=l.raws.before,o.includes(`
`)&&(o=o.replace(/[^\n]+$/,"")),!1}),typeof o>"u"?o=this.raw(n,null,"beforeDecl"):o&&(o=o.replace(/\S/g,"")),o}rawBeforeDecl(r,n){let o;return r.walkDecls(l=>{if(typeof l.raws.before<"u")return o=l.raws.before,o.includes(`
`)&&(o=o.replace(/[^\n]+$/,"")),!1}),typeof o>"u"?o=this.raw(n,null,"beforeRule"):o&&(o=o.replace(/\S/g,"")),o}rawBeforeOpen(r){let n;return r.walk(o=>{if(o.type!=="decl"&&(n=o.raws.between,typeof n<"u"))return!1}),n}rawBeforeRule(r){let n;return r.walk(o=>{if(o.nodes&&(o.parent!==r||r.first!==o)&&typeof o.raws.before<"u")return n=o.raws.before,n.includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),n&&(n=n.replace(/\S/g,"")),n}rawColon(r){let n;return r.walkDecls(o=>{if(typeof o.raws.between<"u")return n=o.raws.between.replace(/[^\s:]/g,""),!1}),n}rawEmptyBody(r){let n;return r.walk(o=>{if(o.nodes&&o.nodes.length===0&&(n=o.raws.after,typeof n<"u"))return!1}),n}rawIndent(r){if(r.raws.indent)return r.raws.indent;let n;return r.walk(o=>{let l=o.parent;if(l&&l!==r&&l.parent&&l.parent===r&&typeof o.raws.before<"u"){let a=o.raws.before.split(`
`);return n=a[a.length-1],n=n.replace(/\S/g,""),!1}}),n}rawSemicolon(r){let n;return r.walk(o=>{if(o.nodes&&o.nodes.length&&o.last.type==="decl"&&(n=o.raws.semicolon,typeof n<"u"))return!1}),n}rawValue(r,n){let o=r[n],l=r.raws[n];return l&&l.value===o?l.raw:o}root(r){this.body(r),r.raws.after&&this.builder(r.raws.after)}rule(r){this.block(r,this.rawValue(r,"selector")),r.raws.ownSemicolon&&this.builder(r.raws.ownSemicolon,r,"end")}stringify(r,n){if(!this[r.type])throw new Error("Unknown AST node type "+r.type+". Maybe you need to change PostCSS stringifier.");this[r.type](r,n)}}return Vs=t,t.default=t,Vs}var Us,bl;function Cs(){if(bl)return Us;bl=1;let s=lu();function e(t,i){new s(i).stringify(t)}return Us=e,e.default=e,Us}var ur={},wl;function _o(){return wl||(wl=1,ur.isClean=Symbol("isClean"),ur.my=Symbol("my")),ur}var js,Sl;function As(){if(Sl)return js;Sl=1;let s=Qo(),e=lu(),t=Cs(),{isClean:i,my:r}=_o();function n(a,u){let h=new a.constructor;for(let f in a){if(!Object.prototype.hasOwnProperty.call(a,f)||f==="proxyCache")continue;let c=a[f],d=typeof c;f==="parent"&&d==="object"?u&&(h[f]=u):f==="source"?h[f]=c:Array.isArray(c)?h[f]=c.map(g=>n(g,h)):(d==="object"&&c!==null&&(c=n(c)),h[f]=c)}return h}function o(a,u){if(u&&typeof u.offset<"u")return u.offset;let h=1,f=1,c=0;for(let d=0;d<a.length;d++){if(f===u.line&&h===u.column){c=d;break}a[d]===`
`?(h=1,f+=1):h+=1}return c}class l{get proxyOf(){return this}constructor(u={}){this.raws={},this[i]=!1,this[r]=!0;for(let h in u)if(h==="nodes"){this.nodes=[];for(let f of u[h])typeof f.clone=="function"?this.append(f.clone()):this.append(f)}else this[h]=u[h]}addToError(u){if(u.postcssNode=this,u.stack&&this.source&&/\n\s{4}at /.test(u.stack)){let h=this.source;u.stack=u.stack.replace(/\n\s{4}at /,`$&${h.input.from}:${h.start.line}:${h.start.column}$&`)}return u}after(u){return this.parent.insertAfter(this,u),this}assign(u={}){for(let h in u)this[h]=u[h];return this}before(u){return this.parent.insertBefore(this,u),this}cleanRaws(u){delete this.raws.before,delete this.raws.after,u||delete this.raws.between}clone(u={}){let h=n(this);for(let f in u)h[f]=u[f];return h}cloneAfter(u={}){let h=this.clone(u);return this.parent.insertAfter(this,h),h}cloneBefore(u={}){let h=this.clone(u);return this.parent.insertBefore(this,h),h}error(u,h={}){if(this.source){let{end:f,start:c}=this.rangeBy(h);return this.source.input.error(u,{column:c.column,line:c.line},{column:f.column,line:f.line},h)}return new s(u)}getProxyProcessor(){return{get(u,h){return h==="proxyOf"?u:h==="root"?()=>u.root().toProxy():u[h]},set(u,h,f){return u[h]===f||(u[h]=f,(h==="prop"||h==="value"||h==="name"||h==="params"||h==="important"||h==="text")&&u.markDirty()),!0}}}markClean(){this[i]=!0}markDirty(){if(this[i]){this[i]=!1;let u=this;for(;u=u.parent;)u[i]=!1}}next(){if(!this.parent)return;let u=this.parent.index(this);return this.parent.nodes[u+1]}positionBy(u={}){let h=this.source.start;if(u.index)h=this.positionInside(u.index);else if(u.word){let f="document"in this.source.input?this.source.input.document:this.source.input.css,d=f.slice(o(f,this.source.start),o(f,this.source.end)).indexOf(u.word);d!==-1&&(h=this.positionInside(d))}return h}positionInside(u){let h=this.source.start.column,f=this.source.start.line,c="document"in this.source.input?this.source.input.document:this.source.input.css,d=o(c,this.source.start),g=d+u;for(let p=d;p<g;p++)c[p]===`
`?(h=1,f+=1):h+=1;return{column:h,line:f,offset:g}}prev(){if(!this.parent)return;let u=this.parent.index(this);return this.parent.nodes[u-1]}rangeBy(u={}){let h="document"in this.source.input?this.source.input.document:this.source.input.css,f={column:this.source.start.column,line:this.source.start.line,offset:o(h,this.source.start)},c=this.source.end?{column:this.source.end.column+1,line:this.source.end.line,offset:typeof this.source.end.offset=="number"?this.source.end.offset:o(h,this.source.end)+1}:{column:f.column+1,line:f.line,offset:f.offset+1};if(u.word){let g=h.slice(o(h,this.source.start),o(h,this.source.end)).indexOf(u.word);g!==-1&&(f=this.positionInside(g),c=this.positionInside(g+u.word.length))}else u.start?f={column:u.start.column,line:u.start.line,offset:o(h,u.start)}:u.index&&(f=this.positionInside(u.index)),u.end?c={column:u.end.column,line:u.end.line,offset:o(h,u.end)}:typeof u.endIndex=="number"?c=this.positionInside(u.endIndex):u.index&&(c=this.positionInside(u.index+1));return(c.line<f.line||c.line===f.line&&c.column<=f.column)&&(c={column:f.column+1,line:f.line,offset:f.offset+1}),{end:c,start:f}}raw(u,h){return new e().raw(this,u,h)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...u){if(this.parent){let h=this,f=!1;for(let c of u)c===this?f=!0:f?(this.parent.insertAfter(h,c),h=c):this.parent.insertBefore(h,c);f||this.remove()}return this}root(){let u=this;for(;u.parent&&u.parent.type!=="document";)u=u.parent;return u}toJSON(u,h){let f={},c=h==null;h=h||new Map;let d=0;for(let g in this){if(!Object.prototype.hasOwnProperty.call(this,g)||g==="parent"||g==="proxyCache")continue;let p=this[g];if(Array.isArray(p))f[g]=p.map(m=>typeof m=="object"&&m.toJSON?m.toJSON(null,h):m);else if(typeof p=="object"&&p.toJSON)f[g]=p.toJSON(null,h);else if(g==="source"){if(p==null)continue;let m=h.get(p.input);m==null&&(m=d,h.set(p.input,d),d++),f[g]={end:p.end,inputId:m,start:p.start}}else f[g]=p}return c&&(f.inputs=[...h.keys()].map(g=>g.toJSON())),f}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(u=t){u.stringify&&(u=u.stringify);let h="";return u(this,f=>{h+=f}),h}warn(u,h,f={}){let c={node:this};for(let d in f)c[d]=f[d];return u.warn(h,c)}}return js=l,l.default=l,js}var Hs,xl;function Ps(){if(xl)return Hs;xl=1;let s=As();class e extends s{constructor(i){super(i),this.type="comment"}}return Hs=e,e.default=e,Hs}var Ys,kl;function Ts(){if(kl)return Ys;kl=1;let s=As();class e extends s{get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}constructor(i){i&&typeof i.value<"u"&&typeof i.value!="string"&&(i={...i,value:String(i.value)}),super(i),this.type="decl"}}return Ys=e,e.default=e,Ys}var Xs,Cl;function ai(){if(Cl)return Xs;Cl=1;let s=Ps(),e=Ts(),t=As(),{isClean:i,my:r}=_o(),n,o,l,a;function u(c){return c.map(d=>(d.nodes&&(d.nodes=u(d.nodes)),delete d.source,d))}function h(c){if(c[i]=!1,c.proxyOf.nodes)for(let d of c.proxyOf.nodes)h(d)}class f extends t{get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}append(...d){for(let g of d){let p=this.normalize(g,this.last);for(let m of p)this.proxyOf.nodes.push(m)}return this.markDirty(),this}cleanRaws(d){if(super.cleanRaws(d),this.nodes)for(let g of this.nodes)g.cleanRaws(d)}each(d){if(!this.proxyOf.nodes)return;let g=this.getIterator(),p,m;for(;this.indexes[g]<this.proxyOf.nodes.length&&(p=this.indexes[g],m=d(this.proxyOf.nodes[p],p),m!==!1);)this.indexes[g]+=1;return delete this.indexes[g],m}every(d){return this.nodes.every(d)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let d=this.lastEach;return this.indexes[d]=0,d}getProxyProcessor(){return{get(d,g){return g==="proxyOf"?d:d[g]?g==="each"||typeof g=="string"&&g.startsWith("walk")?(...p)=>d[g](...p.map(m=>typeof m=="function"?(y,O)=>m(y.toProxy(),O):m)):g==="every"||g==="some"?p=>d[g]((m,...y)=>p(m.toProxy(),...y)):g==="root"?()=>d.root().toProxy():g==="nodes"?d.nodes.map(p=>p.toProxy()):g==="first"||g==="last"?d[g].toProxy():d[g]:d[g]},set(d,g,p){return d[g]===p||(d[g]=p,(g==="name"||g==="params"||g==="selector")&&d.markDirty()),!0}}}index(d){return typeof d=="number"?d:(d.proxyOf&&(d=d.proxyOf),this.proxyOf.nodes.indexOf(d))}insertAfter(d,g){let p=this.index(d),m=this.normalize(g,this.proxyOf.nodes[p]).reverse();p=this.index(d);for(let O of m)this.proxyOf.nodes.splice(p+1,0,O);let y;for(let O in this.indexes)y=this.indexes[O],p<y&&(this.indexes[O]=y+m.length);return this.markDirty(),this}insertBefore(d,g){let p=this.index(d),m=p===0?"prepend":!1,y=this.normalize(g,this.proxyOf.nodes[p],m).reverse();p=this.index(d);for(let w of y)this.proxyOf.nodes.splice(p,0,w);let O;for(let w in this.indexes)O=this.indexes[w],p<=O&&(this.indexes[w]=O+y.length);return this.markDirty(),this}normalize(d,g){if(typeof d=="string")d=u(o(d).nodes);else if(typeof d>"u")d=[];else if(Array.isArray(d)){d=d.slice(0);for(let m of d)m.parent&&m.parent.removeChild(m,"ignore")}else if(d.type==="root"&&this.type!=="document"){d=d.nodes.slice(0);for(let m of d)m.parent&&m.parent.removeChild(m,"ignore")}else if(d.type)d=[d];else if(d.prop){if(typeof d.value>"u")throw new Error("Value field is missed in node creation");typeof d.value!="string"&&(d.value=String(d.value)),d=[new e(d)]}else if(d.selector||d.selectors)d=[new a(d)];else if(d.name)d=[new n(d)];else if(d.text)d=[new s(d)];else throw new Error("Unknown node type in node creation");return d.map(m=>(m[r]||f.rebuild(m),m=m.proxyOf,m.parent&&m.parent.removeChild(m),m[i]&&h(m),m.raws||(m.raws={}),typeof m.raws.before>"u"&&g&&typeof g.raws.before<"u"&&(m.raws.before=g.raws.before.replace(/\S/g,"")),m.parent=this.proxyOf,m))}prepend(...d){d=d.reverse();for(let g of d){let p=this.normalize(g,this.first,"prepend").reverse();for(let m of p)this.proxyOf.nodes.unshift(m);for(let m in this.indexes)this.indexes[m]=this.indexes[m]+p.length}return this.markDirty(),this}push(d){return d.parent=this,this.proxyOf.nodes.push(d),this}removeAll(){for(let d of this.proxyOf.nodes)d.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(d){d=this.index(d),this.proxyOf.nodes[d].parent=void 0,this.proxyOf.nodes.splice(d,1);let g;for(let p in this.indexes)g=this.indexes[p],g>=d&&(this.indexes[p]=g-1);return this.markDirty(),this}replaceValues(d,g,p){return p||(p=g,g={}),this.walkDecls(m=>{g.props&&!g.props.includes(m.prop)||g.fast&&!m.value.includes(g.fast)||(m.value=m.value.replace(d,p))}),this.markDirty(),this}some(d){return this.nodes.some(d)}walk(d){return this.each((g,p)=>{let m;try{m=d(g,p)}catch(y){throw g.addToError(y)}return m!==!1&&g.walk&&(m=g.walk(d)),m})}walkAtRules(d,g){return g?d instanceof RegExp?this.walk((p,m)=>{if(p.type==="atrule"&&d.test(p.name))return g(p,m)}):this.walk((p,m)=>{if(p.type==="atrule"&&p.name===d)return g(p,m)}):(g=d,this.walk((p,m)=>{if(p.type==="atrule")return g(p,m)}))}walkComments(d){return this.walk((g,p)=>{if(g.type==="comment")return d(g,p)})}walkDecls(d,g){return g?d instanceof RegExp?this.walk((p,m)=>{if(p.type==="decl"&&d.test(p.prop))return g(p,m)}):this.walk((p,m)=>{if(p.type==="decl"&&p.prop===d)return g(p,m)}):(g=d,this.walk((p,m)=>{if(p.type==="decl")return g(p,m)}))}walkRules(d,g){return g?d instanceof RegExp?this.walk((p,m)=>{if(p.type==="rule"&&d.test(p.selector))return g(p,m)}):this.walk((p,m)=>{if(p.type==="rule"&&p.selector===d)return g(p,m)}):(g=d,this.walk((p,m)=>{if(p.type==="rule")return g(p,m)}))}}return f.registerParse=c=>{o=c},f.registerRule=c=>{a=c},f.registerAtRule=c=>{n=c},f.registerRoot=c=>{l=c},Xs=f,f.default=f,f.rebuild=c=>{c.type==="atrule"?Object.setPrototypeOf(c,n.prototype):c.type==="rule"?Object.setPrototypeOf(c,a.prototype):c.type==="decl"?Object.setPrototypeOf(c,e.prototype):c.type==="comment"?Object.setPrototypeOf(c,s.prototype):c.type==="root"&&Object.setPrototypeOf(c,l.prototype),c[r]=!0,c.nodes&&c.nodes.forEach(d=>{f.rebuild(d)})},Xs}var Gs,Al;function Io(){if(Al)return Gs;Al=1;let s=ai();class e extends s{constructor(i){super(i),this.type="atrule"}append(...i){return this.proxyOf.nodes||(this.nodes=[]),super.append(...i)}prepend(...i){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...i)}}return Gs=e,e.default=e,s.registerAtRule(e),Gs}var Ks,Pl;function Lo(){if(Pl)return Ks;Pl=1;let s=ai(),e,t;class i extends s{constructor(n){super({type:"document",...n}),this.nodes||(this.nodes=[])}toResult(n={}){return new e(new t,this,n).stringify()}}return i.registerLazyResult=r=>{e=r},i.registerProcessor=r=>{t=r},Ks=i,i.default=i,Ks}var Zs,Tl;function nd(){if(Tl)return Zs;Tl=1;let s="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";return Zs={nanoid:(i=21)=>{let r="",n=i|0;for(;n--;)r+=s[Math.random()*64|0];return r},customAlphabet:(i,r=21)=>(n=r)=>{let o="",l=n|0;for(;l--;)o+=i[Math.random()*i.length|0];return o}},Zs}var Js,El;function au(){if(El)return Js;El=1;let{existsSync:s,readFileSync:e}=ot,{dirname:t,join:i}=ot,{SourceMapConsumer:r,SourceMapGenerator:n}=ot;function o(a){return Buffer?Buffer.from(a,"base64").toString():window.atob(a)}class l{constructor(u,h){if(h.map===!1)return;this.loadAnnotation(u),this.inline=this.startWith(this.annotation,"data:");let f=h.map?h.map.prev:void 0,c=this.loadMap(h.from,f);!this.mapFile&&h.from&&(this.mapFile=h.from),this.mapFile&&(this.root=t(this.mapFile)),c&&(this.text=c)}consumer(){return this.consumerCache||(this.consumerCache=new r(this.text)),this.consumerCache}decodeInline(u){let h=/^data:application\/json;charset=utf-?8;base64,/,f=/^data:application\/json;base64,/,c=/^data:application\/json;charset=utf-?8,/,d=/^data:application\/json,/,g=u.match(c)||u.match(d);if(g)return decodeURIComponent(u.substr(g[0].length));let p=u.match(h)||u.match(f);if(p)return o(u.substr(p[0].length));let m=u.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+m)}getAnnotationURL(u){return u.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(u){return typeof u!="object"?!1:typeof u.mappings=="string"||typeof u._mappings=="string"||Array.isArray(u.sections)}loadAnnotation(u){let h=u.match(/\/\*\s*# sourceMappingURL=/g);if(!h)return;let f=u.lastIndexOf(h.pop()),c=u.indexOf("*/",f);f>-1&&c>-1&&(this.annotation=this.getAnnotationURL(u.substring(f,c)))}loadFile(u){if(this.root=t(u),s(u))return this.mapFile=u,e(u,"utf-8").toString().trim()}loadMap(u,h){if(h===!1)return!1;if(h){if(typeof h=="string")return h;if(typeof h=="function"){let f=h(u);if(f){let c=this.loadFile(f);if(!c)throw new Error("Unable to load previous source map: "+f.toString());return c}}else{if(h instanceof r)return n.fromSourceMap(h).toString();if(h instanceof n)return h.toString();if(this.isMap(h))return JSON.stringify(h);throw new Error("Unsupported previous source map format: "+h.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let f=this.annotation;return u&&(f=i(t(u),f)),this.loadFile(f)}}}startWith(u,h){return u?u.substr(0,h.length)===h:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}return Js=l,l.default=l,Js}var en,Ml;function Es(){if(Ml)return en;Ml=1;let{nanoid:s}=nd(),{isAbsolute:e,resolve:t}=ot,{SourceMapConsumer:i,SourceMapGenerator:r}=ot,{fileURLToPath:n,pathToFileURL:o}=ot,l=Qo(),a=au(),u=ot,h=Symbol("lineToIndexCache"),f=!!(i&&r),c=!!(t&&e);function d(p){if(p[h])return p[h];let m=p.css.split(`
`),y=new Array(m.length),O=0;for(let w=0,b=m.length;w<b;w++)y[w]=O,O+=m[w].length+1;return p[h]=y,y}class g{get from(){return this.file||this.id}constructor(m,y={}){if(m===null||typeof m>"u"||typeof m=="object"&&!m.toString)throw new Error(`PostCSS received ${m} instead of CSS string`);if(this.css=m.toString(),this.css[0]==="\uFEFF"||this.css[0]==="ï¿¾"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,this.document=this.css,y.document&&(this.document=y.document.toString()),y.from&&(!c||/^\w+:\/\//.test(y.from)||e(y.from)?this.file=y.from:this.file=t(y.from)),c&&f){let O=new a(this.css,y);if(O.text){this.map=O;let w=O.consumer().file;!this.file&&w&&(this.file=this.mapResolve(w))}}this.file||(this.id="<input css "+s(6)+">"),this.map&&(this.map.file=this.from)}error(m,y,O,w={}){let b,v,S,x,A;if(y&&typeof y=="object"){let k=y,I=O;if(typeof k.offset=="number"){x=k.offset;let R=this.fromOffset(x);y=R.line,O=R.col}else y=k.line,O=k.column,x=this.fromLineAndColumn(y,O);if(typeof I.offset=="number"){S=I.offset;let R=this.fromOffset(S);v=R.line,b=R.col}else v=I.line,b=I.column,S=this.fromLineAndColumn(I.line,I.column)}else if(O)x=this.fromLineAndColumn(y,O);else{x=y;let k=this.fromOffset(x);y=k.line,O=k.col}let C=this.origin(y,O,v,b);return C?A=new l(m,C.endLine===void 0?C.line:{column:C.column,line:C.line},C.endLine===void 0?C.column:{column:C.endColumn,line:C.endLine},C.source,C.file,w.plugin):A=new l(m,v===void 0?y:{column:O,line:y},v===void 0?O:{column:b,line:v},this.css,this.file,w.plugin),A.input={column:O,endColumn:b,endLine:v,endOffset:S,line:y,offset:x,source:this.css},this.file&&(o&&(A.input.url=o(this.file).toString()),A.input.file=this.file),A}fromLineAndColumn(m,y){return d(this)[m-1]+y-1}fromOffset(m){let y=d(this),O=y[y.length-1],w=0;if(m>=O)w=y.length-1;else{let b=y.length-2,v;for(;w<b;)if(v=w+(b-w>>1),m<y[v])b=v-1;else if(m>=y[v+1])w=v+1;else{w=v;break}}return{col:m-y[w]+1,line:w+1}}mapResolve(m){return/^\w+:\/\//.test(m)?m:t(this.map.consumer().sourceRoot||this.map.root||".",m)}origin(m,y,O,w){if(!this.map)return!1;let b=this.map.consumer(),v=b.originalPositionFor({column:y,line:m});if(!v.source)return!1;let S;typeof O=="number"&&(S=b.originalPositionFor({column:w,line:O}));let x;e(v.source)?x=o(v.source):x=new URL(v.source,this.map.consumer().sourceRoot||o(this.map.mapFile));let A={column:v.column,endColumn:S&&S.column,endLine:S&&S.line,line:v.line,url:x.toString()};if(x.protocol==="file:")if(n)A.file=n(x);else throw new Error("file: protocol is not available in this PostCSS build");let C=b.sourceContentFor(v.source);return C&&(A.source=C),A}toJSON(){let m={};for(let y of["hasBOM","css","file","id"])this[y]!=null&&(m[y]=this[y]);return this.map&&(m.map={...this.map},m.map.consumerCache&&(m.map.consumerCache=void 0)),m}}return en=g,g.default=g,u&&u.registerInput&&u.registerInput(g),en}var tn,Rl;function ir(){if(Rl)return tn;Rl=1;let s=ai(),e,t;class i extends s{constructor(n){super(n),this.type="root",this.nodes||(this.nodes=[])}normalize(n,o,l){let a=super.normalize(n);if(o){if(l==="prepend")this.nodes.length>1?o.raws.before=this.nodes[1].raws.before:delete o.raws.before;else if(this.first!==o)for(let u of a)u.raws.before=o.raws.before}return a}removeChild(n,o){let l=this.index(n);return!o&&l===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[l].raws.before),super.removeChild(n)}toResult(n={}){return new e(new t,this,n).stringify()}}return i.registerLazyResult=r=>{e=r},i.registerProcessor=r=>{t=r},tn=i,i.default=i,s.registerRoot(i),tn}var rn,Dl;function hu(){if(Dl)return rn;Dl=1;let s={comma(e){return s.split(e,[","],!0)},space(e){let t=[" ",`
`,"	"];return s.split(e,t)},split(e,t,i){let r=[],n="",o=!1,l=0,a=!1,u="",h=!1;for(let f of e)h?h=!1:f==="\\"?h=!0:a?f===u&&(a=!1):f==='"'||f==="'"?(a=!0,u=f):f==="("?l+=1:f===")"?l>0&&(l-=1):l===0&&t.includes(f)&&(o=!0),o?(n!==""&&r.push(n.trim()),n="",o=!1):n+=f;return(i||n!=="")&&r.push(n.trim()),r}};return rn=s,s.default=s,rn}var sn,Ql;function Bo(){if(Ql)return sn;Ql=1;let s=ai(),e=hu();class t extends s{get selectors(){return e.comma(this.selector)}set selectors(r){let n=this.selector?this.selector.match(/,\s*/):null,o=n?n[0]:","+this.raw("between","beforeOpen");this.selector=r.join(o)}constructor(r){super(r),this.type="rule",this.nodes||(this.nodes=[])}}return sn=t,t.default=t,s.registerRule(t),sn}var nn,_l;function od(){if(_l)return nn;_l=1;let s=Io(),e=Ps(),t=Ts(),i=Es(),r=au(),n=ir(),o=Bo();function l(a,u){if(Array.isArray(a))return a.map(c=>l(c));let{inputs:h,...f}=a;if(h){u=[];for(let c of h){let d={...c,__proto__:i.prototype};d.map&&(d.map={...d.map,__proto__:r.prototype}),u.push(d)}}if(f.nodes&&(f.nodes=a.nodes.map(c=>l(c,u))),f.source){let{inputId:c,...d}=f.source;f.source=d,c!=null&&(f.source.input=u[c])}if(f.type==="root")return new n(f);if(f.type==="decl")return new t(f);if(f.type==="rule")return new o(f);if(f.type==="comment")return new e(f);if(f.type==="atrule")return new s(f);throw new Error("Unknown node type: "+a.type)}return nn=l,l.default=l,nn}var on,Il;function uu(){if(Il)return on;Il=1;let{dirname:s,relative:e,resolve:t,sep:i}=ot,{SourceMapConsumer:r,SourceMapGenerator:n}=ot,{pathToFileURL:o}=ot,l=Es(),a=!!(r&&n),u=!!(s&&t&&e&&i);class h{constructor(c,d,g,p){this.stringify=c,this.mapOpts=g.map||{},this.root=d,this.opts=g,this.css=p,this.originalCSS=p,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let c;this.isInline()?c="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?c=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?c=this.mapOpts.annotation(this.opts.to,this.root):c=this.outputFile()+".map";let d=`
`;this.css.includes(`\r
`)&&(d=`\r
`),this.css+=d+"/*# sourceMappingURL="+c+" */"}applyPrevMaps(){for(let c of this.previous()){let d=this.toUrl(this.path(c.file)),g=c.root||s(c.file),p;this.mapOpts.sourcesContent===!1?(p=new r(c.text),p.sourcesContent&&(p.sourcesContent=null)):p=c.consumer(),this.map.applySourceMap(p,d,this.toUrl(this.path(g)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let c;for(let d=this.root.nodes.length-1;d>=0;d--)c=this.root.nodes[d],c.type==="comment"&&c.text.startsWith("# sourceMappingURL=")&&this.root.removeChild(d)}else this.css&&(this.css=this.css.replace(/\n*\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),u&&a&&this.isMap())return this.generateMap();{let c="";return this.stringify(this.root,d=>{c+=d}),[c]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let c=this.previous()[0].consumer();c.file=this.outputFile(),this.map=n.fromSourceMap(c,{ignoreInvalidMapping:!0})}else this.map=new n({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new n({file:this.outputFile(),ignoreInvalidMapping:!0});let c=1,d=1,g="<no source>",p={generated:{column:0,line:0},original:{column:0,line:0},source:""},m,y;this.stringify(this.root,(O,w,b)=>{if(this.css+=O,w&&b!=="end"&&(p.generated.line=c,p.generated.column=d-1,w.source&&w.source.start?(p.source=this.sourcePath(w),p.original.line=w.source.start.line,p.original.column=w.source.start.column-1,this.map.addMapping(p)):(p.source=g,p.original.line=1,p.original.column=0,this.map.addMapping(p))),y=O.match(/\n/g),y?(c+=y.length,m=O.lastIndexOf(`
`),d=O.length-m):d+=O.length,w&&b!=="start"){let v=w.parent||{raws:{}};(!(w.type==="decl"||w.type==="atrule"&&!w.nodes)||w!==v.last||v.raws.semicolon)&&(w.source&&w.source.end?(p.source=this.sourcePath(w),p.original.line=w.source.end.line,p.original.column=w.source.end.column-1,p.generated.line=c,p.generated.column=d-2,this.map.addMapping(p)):(p.source=g,p.original.line=1,p.original.column=0,p.generated.line=c,p.generated.column=d-1,this.map.addMapping(p)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(c=>c.annotation):!0}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let c=this.mapOpts.annotation;return typeof c<"u"&&c!==!0?!1:this.previous().length?this.previous().some(d=>d.inline):!0}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(c=>c.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(c){if(this.mapOpts.absolute||c.charCodeAt(0)===60||/^\w+:\/\//.test(c))return c;let d=this.memoizedPaths.get(c);if(d)return d;let g=this.opts.to?s(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(g=s(t(g,this.mapOpts.annotation)));let p=e(g,c);return this.memoizedPaths.set(c,p),p}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(c=>{if(c.source&&c.source.input.map){let d=c.source.input.map;this.previousMaps.includes(d)||this.previousMaps.push(d)}});else{let c=new l(this.originalCSS,this.opts);c.map&&this.previousMaps.push(c.map)}return this.previousMaps}setSourcesContent(){let c={};if(this.root)this.root.walk(d=>{if(d.source){let g=d.source.input.from;if(g&&!c[g]){c[g]=!0;let p=this.usesFileUrls?this.toFileUrl(g):this.toUrl(this.path(g));this.map.setSourceContent(p,d.source.input.css)}}});else if(this.css){let d=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(d,this.css)}}sourcePath(c){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(c.source.input.from):this.toUrl(this.path(c.source.input.from))}toBase64(c){return Buffer?Buffer.from(c).toString("base64"):window.btoa(unescape(encodeURIComponent(c)))}toFileUrl(c){let d=this.memoizedFileURLs.get(c);if(d)return d;if(o){let g=o(c).toString();return this.memoizedFileURLs.set(c,g),g}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(c){let d=this.memoizedURLs.get(c);if(d)return d;i==="\\"&&(c=c.replace(/\\/g,"/"));let g=encodeURI(c).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(c,g),g}}return on=h,on}var ln,Ll;function ld(){if(Ll)return ln;Ll=1;const s=39,e=34,t=92,i=47,r=10,n=32,o=12,l=9,a=13,u=91,h=93,f=40,c=41,d=123,g=125,p=59,m=42,y=58,O=64,w=/[\t\n\f\r "#'()/;[\\\]{}]/g,b=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,v=/.[\r\n"'(/\\]/,S=/[\da-f]/i;return ln=function(A,C={}){let k=A.css.valueOf(),I=C.ignoreErrors,R,U,$,Q,V,te,X,ne,re,B,N=k.length,T=0,P=[],D=[];function W(){return T}function E(H){throw A.error("Unclosed "+H,T)}function Z(){return D.length===0&&T>=N}function le(H){if(D.length)return D.pop();if(T>=N)return;let ae=H?H.ignoreUnclosed:!1;switch(R=k.charCodeAt(T),R){case r:case n:case l:case a:case o:{Q=T;do Q+=1,R=k.charCodeAt(Q);while(R===n||R===r||R===l||R===a||R===o);te=["space",k.slice(T,Q)],T=Q-1;break}case u:case h:case d:case g:case y:case p:case c:{let we=String.fromCharCode(R);te=[we,we,T];break}case f:{if(B=P.length?P.pop()[1]:"",re=k.charCodeAt(T+1),B==="url"&&re!==s&&re!==e&&re!==n&&re!==r&&re!==l&&re!==o&&re!==a){Q=T;do{if(X=!1,Q=k.indexOf(")",Q+1),Q===-1)if(I||ae){Q=T;break}else E("bracket");for(ne=Q;k.charCodeAt(ne-1)===t;)ne-=1,X=!X}while(X);te=["brackets",k.slice(T,Q+1),T,Q],T=Q}else Q=k.indexOf(")",T+1),U=k.slice(T,Q+1),Q===-1||v.test(U)?te=["(","(",T]:(te=["brackets",U,T,Q],T=Q);break}case s:case e:{V=R===s?"'":'"',Q=T;do{if(X=!1,Q=k.indexOf(V,Q+1),Q===-1)if(I||ae){Q=T+1;break}else E("string");for(ne=Q;k.charCodeAt(ne-1)===t;)ne-=1,X=!X}while(X);te=["string",k.slice(T,Q+1),T,Q],T=Q;break}case O:{w.lastIndex=T+1,w.test(k),w.lastIndex===0?Q=k.length-1:Q=w.lastIndex-2,te=["at-word",k.slice(T,Q+1),T,Q],T=Q;break}case t:{for(Q=T,$=!0;k.charCodeAt(Q+1)===t;)Q+=1,$=!$;if(R=k.charCodeAt(Q+1),$&&R!==i&&R!==n&&R!==r&&R!==l&&R!==a&&R!==o&&(Q+=1,S.test(k.charAt(Q)))){for(;S.test(k.charAt(Q+1));)Q+=1;k.charCodeAt(Q+1)===n&&(Q+=1)}te=["word",k.slice(T,Q+1),T,Q],T=Q;break}default:{R===i&&k.charCodeAt(T+1)===m?(Q=k.indexOf("*/",T+2)+1,Q===0&&(I||ae?Q=k.length:E("comment")),te=["comment",k.slice(T,Q+1),T,Q],T=Q):(b.lastIndex=T+1,b.test(k),b.lastIndex===0?Q=k.length-1:Q=b.lastIndex-2,te=["word",k.slice(T,Q+1),T,Q],P.push(te),T=Q);break}}return T++,te}function ie(H){D.push(H)}return{back:ie,endOfFile:Z,nextToken:le,position:W}},ln}var an,Bl;function ad(){if(Bl)return an;Bl=1;let s=Io(),e=Ps(),t=Ts(),i=ir(),r=Bo(),n=ld();const o={empty:!0,space:!0};function l(u){for(let h=u.length-1;h>=0;h--){let f=u[h],c=f[3]||f[2];if(c)return c}}class a{constructor(h){this.input=h,this.root=new i,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:h,start:{column:1,line:1,offset:0}}}atrule(h){let f=new s;f.name=h[1].slice(1),f.name===""&&this.unnamedAtrule(f,h),this.init(f,h[2]);let c,d,g,p=!1,m=!1,y=[],O=[];for(;!this.tokenizer.endOfFile();){if(h=this.tokenizer.nextToken(),c=h[0],c==="("||c==="["?O.push(c==="("?")":"]"):c==="{"&&O.length>0?O.push("}"):c===O[O.length-1]&&O.pop(),O.length===0)if(c===";"){f.source.end=this.getPosition(h[2]),f.source.end.offset++,this.semicolon=!0;break}else if(c==="{"){m=!0;break}else if(c==="}"){if(y.length>0){for(g=y.length-1,d=y[g];d&&d[0]==="space";)d=y[--g];d&&(f.source.end=this.getPosition(d[3]||d[2]),f.source.end.offset++)}this.end(h);break}else y.push(h);else y.push(h);if(this.tokenizer.endOfFile()){p=!0;break}}f.raws.between=this.spacesAndCommentsFromEnd(y),y.length?(f.raws.afterName=this.spacesAndCommentsFromStart(y),this.raw(f,"params",y),p&&(h=y[y.length-1],f.source.end=this.getPosition(h[3]||h[2]),f.source.end.offset++,this.spaces=f.raws.between,f.raws.between="")):(f.raws.afterName="",f.params=""),m&&(f.nodes=[],this.current=f)}checkMissedSemicolon(h){let f=this.colon(h);if(f===!1)return;let c=0,d;for(let g=f-1;g>=0&&(d=h[g],!(d[0]!=="space"&&(c+=1,c===2)));g--);throw this.input.error("Missed semicolon",d[0]==="word"?d[3]+1:d[2])}colon(h){let f=0,c,d,g;for(let[p,m]of h.entries()){if(d=m,g=d[0],g==="("&&(f+=1),g===")"&&(f-=1),f===0&&g===":")if(!c)this.doubleColon(d);else{if(c[0]==="word"&&c[1]==="progid")continue;return p}c=d}return!1}comment(h){let f=new e;this.init(f,h[2]),f.source.end=this.getPosition(h[3]||h[2]),f.source.end.offset++;let c=h[1].slice(2,-2);if(/^\s*$/.test(c))f.text="",f.raws.left=c,f.raws.right="";else{let d=c.match(/^(\s*)([^]*\S)(\s*)$/);f.text=d[2],f.raws.left=d[1],f.raws.right=d[3]}}createTokenizer(){this.tokenizer=n(this.input)}decl(h,f){let c=new t;this.init(c,h[0][2]);let d=h[h.length-1];for(d[0]===";"&&(this.semicolon=!0,h.pop()),c.source.end=this.getPosition(d[3]||d[2]||l(h)),c.source.end.offset++;h[0][0]!=="word";)h.length===1&&this.unknownWord(h),c.raws.before+=h.shift()[1];for(c.source.start=this.getPosition(h[0][2]),c.prop="";h.length;){let O=h[0][0];if(O===":"||O==="space"||O==="comment")break;c.prop+=h.shift()[1]}c.raws.between="";let g;for(;h.length;)if(g=h.shift(),g[0]===":"){c.raws.between+=g[1];break}else g[0]==="word"&&/\w/.test(g[1])&&this.unknownWord([g]),c.raws.between+=g[1];(c.prop[0]==="_"||c.prop[0]==="*")&&(c.raws.before+=c.prop[0],c.prop=c.prop.slice(1));let p=[],m;for(;h.length&&(m=h[0][0],!(m!=="space"&&m!=="comment"));)p.push(h.shift());this.precheckMissedSemicolon(h);for(let O=h.length-1;O>=0;O--){if(g=h[O],g[1].toLowerCase()==="!important"){c.important=!0;let w=this.stringFrom(h,O);w=this.spacesFromEnd(h)+w,w!==" !important"&&(c.raws.important=w);break}else if(g[1].toLowerCase()==="important"){let w=h.slice(0),b="";for(let v=O;v>0;v--){let S=w[v][0];if(b.trim().startsWith("!")&&S!=="space")break;b=w.pop()[1]+b}b.trim().startsWith("!")&&(c.important=!0,c.raws.important=b,h=w)}if(g[0]!=="space"&&g[0]!=="comment")break}h.some(O=>O[0]!=="space"&&O[0]!=="comment")&&(c.raws.between+=p.map(O=>O[1]).join(""),p=[]),this.raw(c,"value",p.concat(h),f),c.value.includes(":")&&!f&&this.checkMissedSemicolon(h)}doubleColon(h){throw this.input.error("Double colon",{offset:h[2]},{offset:h[2]+h[1].length})}emptyRule(h){let f=new r;this.init(f,h[2]),f.selector="",f.raws.between="",this.current=f}end(h){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(h[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(h)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(h){if(this.spaces+=h[1],this.current.nodes){let f=this.current.nodes[this.current.nodes.length-1];f&&f.type==="rule"&&!f.raws.ownSemicolon&&(f.raws.ownSemicolon=this.spaces,this.spaces="",f.source.end=this.getPosition(h[2]),f.source.end.offset+=f.raws.ownSemicolon.length)}}getPosition(h){let f=this.input.fromOffset(h);return{column:f.col,line:f.line,offset:h}}init(h,f){this.current.push(h),h.source={input:this.input,start:this.getPosition(f)},h.raws.before=this.spaces,this.spaces="",h.type!=="comment"&&(this.semicolon=!1)}other(h){let f=!1,c=null,d=!1,g=null,p=[],m=h[1].startsWith("--"),y=[],O=h;for(;O;){if(c=O[0],y.push(O),c==="("||c==="[")g||(g=O),p.push(c==="("?")":"]");else if(m&&d&&c==="{")g||(g=O),p.push("}");else if(p.length===0)if(c===";")if(d){this.decl(y,m);return}else break;else if(c==="{"){this.rule(y);return}else if(c==="}"){this.tokenizer.back(y.pop()),f=!0;break}else c===":"&&(d=!0);else c===p[p.length-1]&&(p.pop(),p.length===0&&(g=null));O=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(f=!0),p.length>0&&this.unclosedBracket(g),f&&d){if(!m)for(;y.length&&(O=y[y.length-1][0],!(O!=="space"&&O!=="comment"));)this.tokenizer.back(y.pop());this.decl(y,m)}else this.unknownWord(y)}parse(){let h;for(;!this.tokenizer.endOfFile();)switch(h=this.tokenizer.nextToken(),h[0]){case"space":this.spaces+=h[1];break;case";":this.freeSemicolon(h);break;case"}":this.end(h);break;case"comment":this.comment(h);break;case"at-word":this.atrule(h);break;case"{":this.emptyRule(h);break;default:this.other(h);break}this.endFile()}precheckMissedSemicolon(){}raw(h,f,c,d){let g,p,m=c.length,y="",O=!0,w,b;for(let v=0;v<m;v+=1)g=c[v],p=g[0],p==="space"&&v===m-1&&!d?O=!1:p==="comment"?(b=c[v-1]?c[v-1][0]:"empty",w=c[v+1]?c[v+1][0]:"empty",!o[b]&&!o[w]?y.slice(-1)===","?O=!1:y+=g[1]:O=!1):y+=g[1];if(!O){let v=c.reduce((S,x)=>S+x[1],"");h.raws[f]={raw:v,value:y}}h[f]=y}rule(h){h.pop();let f=new r;this.init(f,h[0][2]),f.raws.between=this.spacesAndCommentsFromEnd(h),this.raw(f,"selector",h),this.current=f}spacesAndCommentsFromEnd(h){let f,c="";for(;h.length&&(f=h[h.length-1][0],!(f!=="space"&&f!=="comment"));)c=h.pop()[1]+c;return c}spacesAndCommentsFromStart(h){let f,c="";for(;h.length&&(f=h[0][0],!(f!=="space"&&f!=="comment"));)c+=h.shift()[1];return c}spacesFromEnd(h){let f,c="";for(;h.length&&(f=h[h.length-1][0],f==="space");)c=h.pop()[1]+c;return c}stringFrom(h,f){let c="";for(let d=f;d<h.length;d++)c+=h[d][1];return h.splice(f,h.length-f),c}unclosedBlock(){let h=this.current.source.start;throw this.input.error("Unclosed block",h.line,h.column)}unclosedBracket(h){throw this.input.error("Unclosed bracket",{offset:h[2]},{offset:h[2]+1})}unexpectedClose(h){throw this.input.error("Unexpected }",{offset:h[2]},{offset:h[2]+1})}unknownWord(h){throw this.input.error("Unknown word "+h[0][1],{offset:h[0][2]},{offset:h[0][2]+h[0][1].length})}unnamedAtrule(h,f){throw this.input.error("At-rule without name",{offset:f[2]},{offset:f[2]+f[1].length})}}return an=a,an}var hn,Nl;function No(){if(Nl)return hn;Nl=1;let s=ai(),e=Es(),t=ad();function i(r,n){let o=new e(r,n),l=new t(o);try{l.parse()}catch(a){throw a}return l.root}return hn=i,i.default=i,s.registerParse(i),hn}var un,Fl;function fu(){if(Fl)return un;Fl=1;class s{constructor(t,i={}){if(this.type="warning",this.text=t,i.node&&i.node.source){let r=i.node.rangeBy(i);this.line=r.start.line,this.column=r.start.column,this.endLine=r.end.line,this.endColumn=r.end.column}for(let r in i)this[r]=i[r]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}return un=s,s.default=s,un}var fn,ql;function Fo(){if(ql)return fn;ql=1;let s=fu();class e{get content(){return this.css}constructor(i,r,n){this.processor=i,this.messages=[],this.root=r,this.opts=n,this.css="",this.map=void 0}toString(){return this.css}warn(i,r={}){r.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(r.plugin=this.lastPlugin.postcssPlugin);let n=new s(i,r);return this.messages.push(n),n}warnings(){return this.messages.filter(i=>i.type==="warning")}}return fn=e,e.default=e,fn}var cn,zl;function cu(){if(zl)return cn;zl=1;let s=ai(),e=Lo(),t=uu(),i=No(),r=Fo(),n=ir(),o=Cs(),{isClean:l,my:a}=_o();const u={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},h={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},f={Once:!0,postcssPlugin:!0,prepare:!0},c=0;function d(w){return typeof w=="object"&&typeof w.then=="function"}function g(w){let b=!1,v=u[w.type];return w.type==="decl"?b=w.prop.toLowerCase():w.type==="atrule"&&(b=w.name.toLowerCase()),b&&w.append?[v,v+"-"+b,c,v+"Exit",v+"Exit-"+b]:b?[v,v+"-"+b,v+"Exit",v+"Exit-"+b]:w.append?[v,c,v+"Exit"]:[v,v+"Exit"]}function p(w){let b;return w.type==="document"?b=["Document",c,"DocumentExit"]:w.type==="root"?b=["Root",c,"RootExit"]:b=g(w),{eventIndex:0,events:b,iterator:0,node:w,visitorIndex:0,visitors:[]}}function m(w){return w[l]=!1,w.nodes&&w.nodes.forEach(b=>m(b)),w}let y={};class O{get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}constructor(b,v,S){this.stringified=!1,this.processed=!1;let x;if(typeof v=="object"&&v!==null&&(v.type==="root"||v.type==="document"))x=m(v);else if(v instanceof O||v instanceof r)x=m(v.root),v.map&&(typeof S.map>"u"&&(S.map={}),S.map.inline||(S.map.inline=!1),S.map.prev=v.map);else{let A=i;S.syntax&&(A=S.syntax.parse),S.parser&&(A=S.parser),A.parse&&(A=A.parse);try{x=A(v,S)}catch(C){this.processed=!0,this.error=C}x&&!x[a]&&s.rebuild(x)}this.result=new r(b,x,S),this.helpers={...y,postcss:y,result:this.result},this.plugins=this.processor.plugins.map(A=>typeof A=="object"&&A.prepare?{...A,...A.prepare(this.result)}:A)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(b){return this.async().catch(b)}finally(b){return this.async().then(b,b)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(b,v){let S=this.result.lastPlugin;try{v&&v.addToError(b),this.error=b,b.name==="CssSyntaxError"&&!b.plugin?(b.plugin=S.postcssPlugin,b.setMessage()):S.postcssVersion}catch(x){console&&console.error&&console.error(x)}return b}prepareVisitors(){this.listeners={};let b=(v,S,x)=>{this.listeners[S]||(this.listeners[S]=[]),this.listeners[S].push([v,x])};for(let v of this.plugins)if(typeof v=="object")for(let S in v){if(!h[S]&&/^[A-Z]/.test(S))throw new Error(`Unknown event ${S} in ${v.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!f[S])if(typeof v[S]=="object")for(let x in v[S])x==="*"?b(v,S,v[S][x]):b(v,S+"-"+x.toLowerCase(),v[S][x]);else typeof v[S]=="function"&&b(v,S,v[S])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let b=0;b<this.plugins.length;b++){let v=this.plugins[b],S=this.runOnRoot(v);if(d(S))try{await S}catch(x){throw this.handleError(x)}}if(this.prepareVisitors(),this.hasListener){let b=this.result.root;for(;!b[l];){b[l]=!0;let v=[p(b)];for(;v.length>0;){let S=this.visitTick(v);if(d(S))try{await S}catch(x){let A=v[v.length-1].node;throw this.handleError(x,A)}}}if(this.listeners.OnceExit)for(let[v,S]of this.listeners.OnceExit){this.result.lastPlugin=v;try{if(b.type==="document"){let x=b.nodes.map(A=>S(A,this.helpers));await Promise.all(x)}else await S(b,this.helpers)}catch(x){throw this.handleError(x)}}}return this.processed=!0,this.stringify()}runOnRoot(b){this.result.lastPlugin=b;try{if(typeof b=="object"&&b.Once){if(this.result.root.type==="document"){let v=this.result.root.nodes.map(S=>b.Once(S,this.helpers));return d(v[0])?Promise.all(v):v}return b.Once(this.result.root,this.helpers)}else if(typeof b=="function")return b(this.result.root,this.result)}catch(v){throw this.handleError(v)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let b=this.result.opts,v=o;b.syntax&&(v=b.syntax.stringify),b.stringifier&&(v=b.stringifier),v.stringify&&(v=v.stringify);let x=new t(v,this.result.root,this.result.opts).generate();return this.result.css=x[0],this.result.map=x[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let b of this.plugins){let v=this.runOnRoot(b);if(d(v))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let b=this.result.root;for(;!b[l];)b[l]=!0,this.walkSync(b);if(this.listeners.OnceExit)if(b.type==="document")for(let v of b.nodes)this.visitSync(this.listeners.OnceExit,v);else this.visitSync(this.listeners.OnceExit,b)}return this.result}then(b,v){return this.async().then(b,v)}toString(){return this.css}visitSync(b,v){for(let[S,x]of b){this.result.lastPlugin=S;let A;try{A=x(v,this.helpers)}catch(C){throw this.handleError(C,v.proxyOf)}if(v.type!=="root"&&v.type!=="document"&&!v.parent)return!0;if(d(A))throw this.getAsyncError()}}visitTick(b){let v=b[b.length-1],{node:S,visitors:x}=v;if(S.type!=="root"&&S.type!=="document"&&!S.parent){b.pop();return}if(x.length>0&&v.visitorIndex<x.length){let[C,k]=x[v.visitorIndex];v.visitorIndex+=1,v.visitorIndex===x.length&&(v.visitors=[],v.visitorIndex=0),this.result.lastPlugin=C;try{return k(S.toProxy(),this.helpers)}catch(I){throw this.handleError(I,S)}}if(v.iterator!==0){let C=v.iterator,k;for(;k=S.nodes[S.indexes[C]];)if(S.indexes[C]+=1,!k[l]){k[l]=!0,b.push(p(k));return}v.iterator=0,delete S.indexes[C]}let A=v.events;for(;v.eventIndex<A.length;){let C=A[v.eventIndex];if(v.eventIndex+=1,C===c){S.nodes&&S.nodes.length&&(S[l]=!0,v.iterator=S.getIterator());return}else if(this.listeners[C]){v.visitors=this.listeners[C];return}}b.pop()}walkSync(b){b[l]=!0;let v=g(b);for(let S of v)if(S===c)b.nodes&&b.each(x=>{x[l]||this.walkSync(x)});else{let x=this.listeners[S];if(x&&this.visitSync(x,b.toProxy()))return}}warnings(){return this.sync().warnings()}}return O.registerPostcss=w=>{y=w},cn=O,O.default=O,n.registerLazyResult(O),e.registerLazyResult(O),cn}var dn,Wl;function hd(){if(Wl)return dn;Wl=1;let s=uu(),e=No();const t=Fo();let i=Cs();class r{get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let o,l=e;try{o=l(this._css,this._opts)}catch(a){this.error=a}if(this.error)throw this.error;return this._root=o,o}get[Symbol.toStringTag](){return"NoWorkResult"}constructor(o,l,a){l=l.toString(),this.stringified=!1,this._processor=o,this._css=l,this._opts=a,this._map=void 0;let u,h=i;this.result=new t(this._processor,u,this._opts),this.result.css=l;let f=this;Object.defineProperty(this.result,"root",{get(){return f.root}});let c=new s(h,u,this._opts,l);if(c.isMap()){let[d,g]=c.generate();d&&(this.result.css=d),g&&(this.result.map=g)}else c.clearAnnotation(),this.result.css=c.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(o){return this.async().catch(o)}finally(o){return this.async().then(o,o)}sync(){if(this.error)throw this.error;return this.result}then(o,l){return this.async().then(o,l)}toString(){return this._css}warnings(){return[]}}return dn=r,r.default=r,dn}var pn,$l;function ud(){if($l)return pn;$l=1;let s=Lo(),e=cu(),t=hd(),i=ir();class r{constructor(o=[]){this.version="8.5.6",this.plugins=this.normalize(o)}normalize(o){let l=[];for(let a of o)if(a.postcss===!0?a=a():a.postcss&&(a=a.postcss),typeof a=="object"&&Array.isArray(a.plugins))l=l.concat(a.plugins);else if(typeof a=="object"&&a.postcssPlugin)l.push(a);else if(typeof a=="function")l.push(a);else if(!(typeof a=="object"&&(a.parse||a.stringify)))throw new Error(a+" is not a PostCSS plugin");return l}process(o,l={}){return!this.plugins.length&&!l.parser&&!l.stringifier&&!l.syntax?new t(this,o,l):new e(this,o,l)}use(o){return this.plugins=this.plugins.concat(this.normalize([o])),this}}return pn=r,r.default=r,i.registerProcessor(r),s.registerProcessor(r),pn}var gn,Vl;function fd(){if(Vl)return gn;Vl=1;var s={};let e=Io(),t=Ps(),i=ai(),r=Qo(),n=Ts(),o=Lo(),l=od(),a=Es(),u=cu(),h=hu(),f=As(),c=No(),d=ud(),g=Fo(),p=ir(),m=Bo(),y=Cs(),O=fu();function w(...b){return b.length===1&&Array.isArray(b[0])&&(b=b[0]),new d(b)}return w.plugin=function(v,S){let x=!1;function A(...k){console&&console.warn&&!x&&(x=!0,console.warn(v+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),s.LANG&&s.LANG.startsWith("cn")&&console.warn(v+`: éé¢ postcss.plugin è¢«å¼ç¨. è¿ç§»æå:
https://www.w3ctech.com/topic/2226`));let I=S(...k);return I.postcssPlugin=v,I.postcssVersion=new d().version,I}let C;return Object.defineProperty(A,"postcss",{get(){return C||(C=A()),C}}),A.process=function(k,I,R){return w([A(R)]).process(k,I)},A},w.stringify=y,w.parse=c,w.fromJSON=l,w.list=h,w.comment=b=>new t(b),w.atRule=b=>new e(b),w.decl=b=>new n(b),w.rule=b=>new m(b),w.root=b=>new p(b),w.document=b=>new o(b),w.CssSyntaxError=r,w.Declaration=n,w.Container=i,w.Processor=d,w.Document=o,w.Comment=t,w.Warning=O,w.AtRule=e,w.Result=g,w.Input=a,w.Rule=m,w.Root=p,w.Node=f,u.registerPostcss(w),gn=w,w.default=w,gn}var cd=fd();const ye=su(cd);ye.stringify;ye.fromJSON;ye.plugin;ye.parse;ye.list;ye.document;ye.comment;ye.atRule;ye.rule;ye.decl;ye.root;ye.CssSyntaxError;ye.Declaration;ye.Container;ye.Processor;ye.Document;ye.Comment;ye.Warning;ye.AtRule;ye.Result;ye.Input;ye.Rule;ye.Root;ye.Node;var fr={exports:{}},cr={exports:{}},dr={exports:{}},pr={exports:{}},gr={exports:{}},mr={exports:{}},nt={},yr={exports:{}},Ul;function du(){return Ul||(Ul=1,(function(s,e){e.__esModule=!0,e.default=r;function t(n){for(var o=n.toLowerCase(),l="",a=!1,u=0;u<6&&o[u]!==void 0;u++){var h=o.charCodeAt(u),f=h>=97&&h<=102||h>=48&&h<=57;if(a=h===32,!f)break;l+=o[u]}if(l.length!==0){var c=parseInt(l,16),d=c>=55296&&c<=57343;return d||c===0||c>1114111?["ï¿½",l.length+(a?1:0)]:[String.fromCodePoint(c),l.length+(a?1:0)]}}var i=/\\/;function r(n){var o=i.test(n);if(!o)return n;for(var l="",a=0;a<n.length;a++){if(n[a]==="\\"){var u=t(n.slice(a+1,a+7));if(u!==void 0){l+=u[0],a+=u[1];continue}if(n[a+1]==="\\"){l+="\\",a++;continue}n.length===a+1&&(l+=n[a]);continue}l+=n[a]}return l}s.exports=e.default})(yr,yr.exports)),yr.exports}var vr={exports:{}},jl;function dd(){return jl||(jl=1,(function(s,e){e.__esModule=!0,e.default=t;function t(i){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];for(;n.length>0;){var l=n.shift();if(!i[l])return;i=i[l]}return i}s.exports=e.default})(vr,vr.exports)),vr.exports}var Or={exports:{}},Hl;function pd(){return Hl||(Hl=1,(function(s,e){e.__esModule=!0,e.default=t;function t(i){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];for(;n.length>0;){var l=n.shift();i[l]||(i[l]={}),i=i[l]}}s.exports=e.default})(Or,Or.exports)),Or.exports}var br={exports:{}},Yl;function gd(){return Yl||(Yl=1,(function(s,e){e.__esModule=!0,e.default=t;function t(i){for(var r="",n=i.indexOf("/*"),o=0;n>=0;){r=r+i.slice(o,n);var l=i.indexOf("*/",n+2);if(l<0)return r;o=l+2,n=i.indexOf("/*",o)}return r=r+i.slice(o),r}s.exports=e.default})(br,br.exports)),br.exports}var Xl;function Ms(){if(Xl)return nt;Xl=1,nt.__esModule=!0,nt.unesc=nt.stripComments=nt.getProp=nt.ensureObject=void 0;var s=r(du());nt.unesc=s.default;var e=r(dd());nt.getProp=e.default;var t=r(pd());nt.ensureObject=t.default;var i=r(gd());nt.stripComments=i.default;function r(n){return n&&n.__esModule?n:{default:n}}return nt}var Gl;function Ht(){return Gl||(Gl=1,(function(s,e){e.__esModule=!0,e.default=void 0;var t=Ms();function i(l,a){for(var u=0;u<a.length;u++){var h=a[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}function r(l,a,u){return a&&i(l.prototype,a),Object.defineProperty(l,"prototype",{writable:!1}),l}var n=function l(a,u){if(typeof a!="object"||a===null)return a;var h=new a.constructor;for(var f in a)if(a.hasOwnProperty(f)){var c=a[f],d=typeof c;f==="parent"&&d==="object"?u&&(h[f]=u):c instanceof Array?h[f]=c.map(function(g){return l(g,h)}):h[f]=l(c,h)}return h},o=(function(){function l(u){u===void 0&&(u={}),Object.assign(this,u),this.spaces=this.spaces||{},this.spaces.before=this.spaces.before||"",this.spaces.after=this.spaces.after||""}var a=l.prototype;return a.remove=function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this},a.replaceWith=function(){if(this.parent){for(var h in arguments)this.parent.insertBefore(this,arguments[h]);this.remove()}return this},a.next=function(){return this.parent.at(this.parent.index(this)+1)},a.prev=function(){return this.parent.at(this.parent.index(this)-1)},a.clone=function(h){h===void 0&&(h={});var f=n(this);for(var c in h)f[c]=h[c];return f},a.appendToPropertyAndEscape=function(h,f,c){this.raws||(this.raws={});var d=this[h],g=this.raws[h];this[h]=d+f,g||c!==f?this.raws[h]=(g||d)+c:delete this.raws[h]},a.setPropertyAndEscape=function(h,f,c){this.raws||(this.raws={}),this[h]=f,this.raws[h]=c},a.setPropertyWithoutEscape=function(h,f){this[h]=f,this.raws&&delete this.raws[h]},a.isAtPosition=function(h,f){if(this.source&&this.source.start&&this.source.end)return!(this.source.start.line>h||this.source.end.line<h||this.source.start.line===h&&this.source.start.column>f||this.source.end.line===h&&this.source.end.column<f)},a.stringifyProperty=function(h){return this.raws&&this.raws[h]||this[h]},a.valueToString=function(){return String(this.stringifyProperty("value"))},a.toString=function(){return[this.rawSpaceBefore,this.valueToString(),this.rawSpaceAfter].join("")},r(l,[{key:"rawSpaceBefore",get:function(){var h=this.raws&&this.raws.spaces&&this.raws.spaces.before;return h===void 0&&(h=this.spaces&&this.spaces.before),h||""},set:function(h){(0,t.ensureObject)(this,"raws","spaces"),this.raws.spaces.before=h}},{key:"rawSpaceAfter",get:function(){var h=this.raws&&this.raws.spaces&&this.raws.spaces.after;return h===void 0&&(h=this.spaces.after),h||""},set:function(h){(0,t.ensureObject)(this,"raws","spaces"),this.raws.spaces.after=h}}]),l})();e.default=o,s.exports=e.default})(mr,mr.exports)),mr.exports}var ce={},Kl;function Ne(){if(Kl)return ce;Kl=1,ce.__esModule=!0,ce.UNIVERSAL=ce.TAG=ce.STRING=ce.SELECTOR=ce.ROOT=ce.PSEUDO=ce.NESTING=ce.ID=ce.COMMENT=ce.COMBINATOR=ce.CLASS=ce.ATTRIBUTE=void 0;var s="tag";ce.TAG=s;var e="string";ce.STRING=e;var t="selector";ce.SELECTOR=t;var i="root";ce.ROOT=i;var r="pseudo";ce.PSEUDO=r;var n="nesting";ce.NESTING=n;var o="id";ce.ID=o;var l="comment";ce.COMMENT=l;var a="combinator";ce.COMBINATOR=a;var u="class";ce.CLASS=u;var h="attribute";ce.ATTRIBUTE=h;var f="universal";return ce.UNIVERSAL=f,ce}var Zl;function qo(){return Zl||(Zl=1,(function(s,e){e.__esModule=!0,e.default=void 0;var t=o(Ht()),i=n(Ne());function r(p){if(typeof WeakMap!="function")return null;var m=new WeakMap,y=new WeakMap;return(r=function(w){return w?y:m})(p)}function n(p,m){if(p&&p.__esModule)return p;if(p===null||typeof p!="object"&&typeof p!="function")return{default:p};var y=r(m);if(y&&y.has(p))return y.get(p);var O={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in p)if(b!=="default"&&Object.prototype.hasOwnProperty.call(p,b)){var v=w?Object.getOwnPropertyDescriptor(p,b):null;v&&(v.get||v.set)?Object.defineProperty(O,b,v):O[b]=p[b]}return O.default=p,y&&y.set(p,O),O}function o(p){return p&&p.__esModule?p:{default:p}}function l(p,m){var y=typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(y)return(y=y.call(p)).next.bind(y);if(Array.isArray(p)||(y=a(p))||m){y&&(p=y);var O=0;return function(){return O>=p.length?{done:!0}:{done:!1,value:p[O++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a(p,m){if(p){if(typeof p=="string")return u(p,m);var y=Object.prototype.toString.call(p).slice(8,-1);if(y==="Object"&&p.constructor&&(y=p.constructor.name),y==="Map"||y==="Set")return Array.from(p);if(y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return u(p,m)}}function u(p,m){(m==null||m>p.length)&&(m=p.length);for(var y=0,O=new Array(m);y<m;y++)O[y]=p[y];return O}function h(p,m){for(var y=0;y<m.length;y++){var O=m[y];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(p,O.key,O)}}function f(p,m,y){return m&&h(p.prototype,m),Object.defineProperty(p,"prototype",{writable:!1}),p}function c(p,m){p.prototype=Object.create(m.prototype),p.prototype.constructor=p,d(p,m)}function d(p,m){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,w){return O.__proto__=w,O},d(p,m)}var g=(function(p){c(m,p);function m(O){var w;return w=p.call(this,O)||this,w.nodes||(w.nodes=[]),w}var y=m.prototype;return y.append=function(w){return w.parent=this,this.nodes.push(w),this},y.prepend=function(w){w.parent=this,this.nodes.unshift(w);for(var b in this.indexes)this.indexes[b]++;return this},y.at=function(w){return this.nodes[w]},y.index=function(w){return typeof w=="number"?w:this.nodes.indexOf(w)},y.removeChild=function(w){w=this.index(w),this.at(w).parent=void 0,this.nodes.splice(w,1);var b;for(var v in this.indexes)b=this.indexes[v],b>=w&&(this.indexes[v]=b-1);return this},y.removeAll=function(){for(var w=l(this.nodes),b;!(b=w()).done;){var v=b.value;v.parent=void 0}return this.nodes=[],this},y.empty=function(){return this.removeAll()},y.insertAfter=function(w,b){var v;b.parent=this;for(var S=this.index(w),x=[],A=2;A<arguments.length;A++)x.push(arguments[A]);(v=this.nodes).splice.apply(v,[S+1,0,b].concat(x)),b.parent=this;var C;for(var k in this.indexes)C=this.indexes[k],S<C&&(this.indexes[k]=C+arguments.length-1);return this},y.insertBefore=function(w,b){var v;b.parent=this;for(var S=this.index(w),x=[],A=2;A<arguments.length;A++)x.push(arguments[A]);(v=this.nodes).splice.apply(v,[S,0,b].concat(x)),b.parent=this;var C;for(var k in this.indexes)C=this.indexes[k],C>=S&&(this.indexes[k]=C+arguments.length-1);return this},y._findChildAtPosition=function(w,b){var v=void 0;return this.each(function(S){if(S.atPosition){var x=S.atPosition(w,b);if(x)return v=x,!1}else if(S.isAtPosition(w,b))return v=S,!1}),v},y.atPosition=function(w,b){if(this.isAtPosition(w,b))return this._findChildAtPosition(w,b)||this},y._inferEndPosition=function(){this.last&&this.last.source&&this.last.source.end&&(this.source=this.source||{},this.source.end=this.source.end||{},Object.assign(this.source.end,this.last.source.end))},y.each=function(w){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach++;var b=this.lastEach;if(this.indexes[b]=0,!!this.length){for(var v,S;this.indexes[b]<this.length&&(v=this.indexes[b],S=w(this.at(v),v),S!==!1);)this.indexes[b]+=1;if(delete this.indexes[b],S===!1)return!1}},y.walk=function(w){return this.each(function(b,v){var S=w(b,v);if(S!==!1&&b.length&&(S=b.walk(w)),S===!1)return!1})},y.walkAttributes=function(w){var b=this;return this.walk(function(v){if(v.type===i.ATTRIBUTE)return w.call(b,v)})},y.walkClasses=function(w){var b=this;return this.walk(function(v){if(v.type===i.CLASS)return w.call(b,v)})},y.walkCombinators=function(w){var b=this;return this.walk(function(v){if(v.type===i.COMBINATOR)return w.call(b,v)})},y.walkComments=function(w){var b=this;return this.walk(function(v){if(v.type===i.COMMENT)return w.call(b,v)})},y.walkIds=function(w){var b=this;return this.walk(function(v){if(v.type===i.ID)return w.call(b,v)})},y.walkNesting=function(w){var b=this;return this.walk(function(v){if(v.type===i.NESTING)return w.call(b,v)})},y.walkPseudos=function(w){var b=this;return this.walk(function(v){if(v.type===i.PSEUDO)return w.call(b,v)})},y.walkTags=function(w){var b=this;return this.walk(function(v){if(v.type===i.TAG)return w.call(b,v)})},y.walkUniversals=function(w){var b=this;return this.walk(function(v){if(v.type===i.UNIVERSAL)return w.call(b,v)})},y.split=function(w){var b=this,v=[];return this.reduce(function(S,x,A){var C=w.call(b,x);return v.push(x),C?(S.push(v),v=[]):A===b.length-1&&S.push(v),S},[])},y.map=function(w){return this.nodes.map(w)},y.reduce=function(w,b){return this.nodes.reduce(w,b)},y.every=function(w){return this.nodes.every(w)},y.some=function(w){return this.nodes.some(w)},y.filter=function(w){return this.nodes.filter(w)},y.sort=function(w){return this.nodes.sort(w)},y.toString=function(){return this.map(String).join("")},f(m,[{key:"first",get:function(){return this.at(0)}},{key:"last",get:function(){return this.at(this.length-1)}},{key:"length",get:function(){return this.nodes.length}}]),m})(t.default);e.default=g,s.exports=e.default})(gr,gr.exports)),gr.exports}var Jl;function pu(){return Jl||(Jl=1,(function(s,e){e.__esModule=!0,e.default=void 0;var t=r(qo()),i=Ne();function r(h){return h&&h.__esModule?h:{default:h}}function n(h,f){for(var c=0;c<f.length;c++){var d=f[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(h,d.key,d)}}function o(h,f,c){return f&&n(h.prototype,f),Object.defineProperty(h,"prototype",{writable:!1}),h}function l(h,f){h.prototype=Object.create(f.prototype),h.prototype.constructor=h,a(h,f)}function a(h,f){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,g){return d.__proto__=g,d},a(h,f)}var u=(function(h){l(f,h);function f(d){var g;return g=h.call(this,d)||this,g.type=i.ROOT,g}var c=f.prototype;return c.toString=function(){var g=this.reduce(function(p,m){return p.push(String(m)),p},[]).join(",");return this.trailingComma?g+",":g},c.error=function(g,p){return this._error?this._error(g,p):new Error(g)},o(f,[{key:"errorGenerator",set:function(g){this._error=g}}]),f})(t.default);e.default=u,s.exports=e.default})(pr,pr.exports)),pr.exports}var wr={exports:{}},ea;function gu(){return ea||(ea=1,(function(s,e){e.__esModule=!0,e.default=void 0;var t=r(qo()),i=Ne();function r(a){return a&&a.__esModule?a:{default:a}}function n(a,u){a.prototype=Object.create(u.prototype),a.prototype.constructor=a,o(a,u)}function o(a,u){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,c){return f.__proto__=c,f},o(a,u)}var l=(function(a){n(u,a);function u(h){var f;return f=a.call(this,h)||this,f.type=i.SELECTOR,f}return u})(t.default);e.default=l,s.exports=e.default})(wr,wr.exports)),wr.exports}var Sr={exports:{}};var mn,ta;function zo(){if(ta)return mn;ta=1;var s={},e=s.hasOwnProperty,t=function(a,u){if(!a)return u;var h={};for(var f in u)h[f]=e.call(a,f)?a[f]:u[f];return h},i=/[ -,\.\/:-@\[-\^`\{-~]/,r=/[ -,\.\/:-@\[\]\^`\{-~]/,n=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,o=function l(a,u){u=t(u,l.options),u.quotes!="single"&&u.quotes!="double"&&(u.quotes="single");for(var h=u.quotes=="double"?'"':"'",f=u.isIdentifier,c=a.charAt(0),d="",g=0,p=a.length;g<p;){var m=a.charAt(g++),y=m.charCodeAt(),O=void 0;if(y<32||y>126){if(y>=55296&&y<=56319&&g<p){var w=a.charCodeAt(g++);(w&64512)==56320?y=((y&1023)<<10)+(w&1023)+65536:g--}O="\\"+y.toString(16).toUpperCase()+" "}else u.escapeEverything?i.test(m)?O="\\"+m:O="\\"+y.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(m)?O="\\"+y.toString(16).toUpperCase()+" ":m=="\\"||!f&&(m=='"'&&h==m||m=="'"&&h==m)||f&&r.test(m)?O="\\"+m:O=m;d+=O}return f&&(/^-[-\d]/.test(d)?d="\\-"+d.slice(1):/\d/.test(c)&&(d="\\3"+c+" "+d.slice(1))),d=d.replace(n,function(b,v,S){return v&&v.length%2?b:(v||"")+S}),!f&&u.wrap?h+d+h:d};return o.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1},o.version="3.0.0",mn=o,mn}var ia;function mu(){return ia||(ia=1,(function(s,e){e.__esModule=!0,e.default=void 0;var t=o(zo()),i=Ms(),r=o(Ht()),n=Ne();function o(c){return c&&c.__esModule?c:{default:c}}function l(c,d){for(var g=0;g<d.length;g++){var p=d[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(c,p.key,p)}}function a(c,d,g){return d&&l(c.prototype,d),Object.defineProperty(c,"prototype",{writable:!1}),c}function u(c,d){c.prototype=Object.create(d.prototype),c.prototype.constructor=c,h(c,d)}function h(c,d){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,m){return p.__proto__=m,p},h(c,d)}var f=(function(c){u(d,c);function d(p){var m;return m=c.call(this,p)||this,m.type=n.CLASS,m._constructed=!0,m}var g=d.prototype;return g.valueToString=function(){return"."+c.prototype.valueToString.call(this)},a(d,[{key:"value",get:function(){return this._value},set:function(m){if(this._constructed){var y=(0,t.default)(m,{isIdentifier:!0});y!==m?((0,i.ensureObject)(this,"raws"),this.raws.value=y):this.raws&&delete this.raws.value}this._value=m}}]),d})(r.default);e.default=f,s.exports=e.default})(Sr,Sr.exports)),Sr.exports}var xr={exports:{}},ra;function yu(){return ra||(ra=1,(function(s,e){e.__esModule=!0,e.default=void 0;var t=r(Ht()),i=Ne();function r(a){return a&&a.__esModule?a:{default:a}}function n(a,u){a.prototype=Object.create(u.prototype),a.prototype.constructor=a,o(a,u)}function o(a,u){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,c){return f.__proto__=c,f},o(a,u)}var l=(function(a){n(u,a);function u(h){var f;return f=a.call(this,h)||this,f.type=i.COMMENT,f}return u})(t.default);e.default=l,s.exports=e.default})(xr,xr.exports)),xr.exports}var kr={exports:{}},sa;function vu(){return sa||(sa=1,(function(s,e){e.__esModule=!0,e.default=void 0;var t=r(Ht()),i=Ne();function r(a){return a&&a.__esModule?a:{default:a}}function n(a,u){a.prototype=Object.create(u.prototype),a.prototype.constructor=a,o(a,u)}function o(a,u){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,c){return f.__proto__=c,f},o(a,u)}var l=(function(a){n(u,a);function u(f){var c;return c=a.call(this,f)||this,c.type=i.ID,c}var h=u.prototype;return h.valueToString=function(){return"#"+a.prototype.valueToString.call(this)},u})(t.default);e.default=l,s.exports=e.default})(kr,kr.exports)),kr.exports}var Cr={exports:{}},Ar={exports:{}},na;function Wo(){return na||(na=1,(function(s,e){e.__esModule=!0,e.default=void 0;var t=n(zo()),i=Ms(),r=n(Ht());function n(f){return f&&f.__esModule?f:{default:f}}function o(f,c){for(var d=0;d<c.length;d++){var g=c[d];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(f,g.key,g)}}function l(f,c,d){return c&&o(f.prototype,c),Object.defineProperty(f,"prototype",{writable:!1}),f}function a(f,c){f.prototype=Object.create(c.prototype),f.prototype.constructor=f,u(f,c)}function u(f,c){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,p){return g.__proto__=p,g},u(f,c)}var h=(function(f){a(c,f);function c(){return f.apply(this,arguments)||this}var d=c.prototype;return d.qualifiedName=function(p){return this.namespace?this.namespaceString+"|"+p:p},d.valueToString=function(){return this.qualifiedName(f.prototype.valueToString.call(this))},l(c,[{key:"namespace",get:function(){return this._namespace},set:function(p){if(p===!0||p==="*"||p==="&"){this._namespace=p,this.raws&&delete this.raws.namespace;return}var m=(0,t.default)(p,{isIdentifier:!0});this._namespace=p,m!==p?((0,i.ensureObject)(this,"raws"),this.raws.namespace=m):this.raws&&delete this.raws.namespace}},{key:"ns",get:function(){return this._namespace},set:function(p){this.namespace=p}},{key:"namespaceString",get:function(){if(this.namespace){var p=this.stringifyProperty("namespace");return p===!0?"":p}else return""}}]),c})(r.default);e.default=h,s.exports=e.default})(Ar,Ar.exports)),Ar.exports}var oa;function Ou(){return oa||(oa=1,(function(s,e){e.__esModule=!0,e.default=void 0;var t=r(Wo()),i=Ne();function r(a){return a&&a.__esModule?a:{default:a}}function n(a,u){a.prototype=Object.create(u.prototype),a.prototype.constructor=a,o(a,u)}function o(a,u){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,c){return f.__proto__=c,f},o(a,u)}var l=(function(a){n(u,a);function u(h){var f;return f=a.call(this,h)||this,f.type=i.TAG,f}return u})(t.default);e.default=l,s.exports=e.default})(Cr,Cr.exports)),Cr.exports}var Pr={exports:{}},la;function bu(){return la||(la=1,(function(s,e){e.__esModule=!0,e.default=void 0;var t=r(Ht()),i=Ne();function r(a){return a&&a.__esModule?a:{default:a}}function n(a,u){a.prototype=Object.create(u.prototype),a.prototype.constructor=a,o(a,u)}function o(a,u){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,c){return f.__proto__=c,f},o(a,u)}var l=(function(a){n(u,a);function u(h){var f;return f=a.call(this,h)||this,f.type=i.STRING,f}return u})(t.default);e.default=l,s.exports=e.default})(Pr,Pr.exports)),Pr.exports}var Tr={exports:{}},aa;function wu(){return aa||(aa=1,(function(s,e){e.__esModule=!0,e.default=void 0;var t=r(qo()),i=Ne();function r(a){return a&&a.__esModule?a:{default:a}}function n(a,u){a.prototype=Object.create(u.prototype),a.prototype.constructor=a,o(a,u)}function o(a,u){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,c){return f.__proto__=c,f},o(a,u)}var l=(function(a){n(u,a);function u(f){var c;return c=a.call(this,f)||this,c.type=i.PSEUDO,c}var h=u.prototype;return h.toString=function(){var c=this.length?"("+this.map(String).join(",")+")":"";return[this.rawSpaceBefore,this.stringifyProperty("value"),c,this.rawSpaceAfter].join("")},u})(t.default);e.default=l,s.exports=e.default})(Tr,Tr.exports)),Tr.exports}var yn={},vn,ha;function md(){if(ha)return vn;ha=1,vn=s;function s(t,i){if(e("noDeprecation"))return t;var r=!1;function n(){if(!r){if(e("throwDeprecation"))throw new Error(i);e("traceDeprecation")?console.trace(i):console.warn(i),r=!0}return t.apply(this,arguments)}return n}function e(t){try{if(!gl.localStorage)return!1}catch{return!1}var i=gl.localStorage[t];return i==null?!1:String(i).toLowerCase()==="true"}return vn}var ua;function Su(){return ua||(ua=1,(function(s){s.__esModule=!0,s.default=void 0,s.unescapeValue=m;var e=o(zo()),t=o(du()),i=o(Wo()),r=Ne(),n;function o(v){return v&&v.__esModule?v:{default:v}}function l(v,S){for(var x=0;x<S.length;x++){var A=S[x];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(v,A.key,A)}}function a(v,S,x){return S&&l(v.prototype,S),Object.defineProperty(v,"prototype",{writable:!1}),v}function u(v,S){v.prototype=Object.create(S.prototype),v.prototype.constructor=v,h(v,S)}function h(v,S){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,C){return A.__proto__=C,A},h(v,S)}var f=md(),c=/^('|")([^]*)\1$/,d=f(function(){},"Assigning an attribute a value containing characters that might need to be escaped is deprecated. Call attribute.setValue() instead."),g=f(function(){},"Assigning attr.quoted is deprecated and has no effect. Assign to attr.quoteMark instead."),p=f(function(){},"Constructing an Attribute selector with a value without specifying quoteMark is deprecated. Note: The value should be unescaped now.");function m(v){var S=!1,x=null,A=v,C=A.match(c);return C&&(x=C[1],A=C[2]),A=(0,t.default)(A),A!==v&&(S=!0),{deprecatedUsage:S,unescaped:A,quoteMark:x}}function y(v){if(v.quoteMark!==void 0||v.value===void 0)return v;p();var S=m(v.value),x=S.quoteMark,A=S.unescaped;return v.raws||(v.raws={}),v.raws.value===void 0&&(v.raws.value=v.value),v.value=A,v.quoteMark=x,v}var O=(function(v){u(S,v);function S(A){var C;return A===void 0&&(A={}),C=v.call(this,y(A))||this,C.type=r.ATTRIBUTE,C.raws=C.raws||{},Object.defineProperty(C.raws,"unquoted",{get:f(function(){return C.value},"attr.raws.unquoted is deprecated. Call attr.value instead."),set:f(function(){return C.value},"Setting attr.raws.unquoted is deprecated and has no effect. attr.value is unescaped by default now.")}),C._constructed=!0,C}var x=S.prototype;return x.getQuotedValue=function(C){C===void 0&&(C={});var k=this._determineQuoteMark(C),I=w[k],R=(0,e.default)(this._value,I);return R},x._determineQuoteMark=function(C){return C.smart?this.smartQuoteMark(C):this.preferredQuoteMark(C)},x.setValue=function(C,k){k===void 0&&(k={}),this._value=C,this._quoteMark=this._determineQuoteMark(k),this._syncRawValue()},x.smartQuoteMark=function(C){var k=this.value,I=k.replace(/[^']/g,"").length,R=k.replace(/[^"]/g,"").length;if(I+R===0){var U=(0,e.default)(k,{isIdentifier:!0});if(U===k)return S.NO_QUOTE;var $=this.preferredQuoteMark(C);if($===S.NO_QUOTE){var Q=this.quoteMark||C.quoteMark||S.DOUBLE_QUOTE,V=w[Q],te=(0,e.default)(k,V);if(te.length<U.length)return Q}return $}else return R===I?this.preferredQuoteMark(C):R<I?S.DOUBLE_QUOTE:S.SINGLE_QUOTE},x.preferredQuoteMark=function(C){var k=C.preferCurrentQuoteMark?this.quoteMark:C.quoteMark;return k===void 0&&(k=C.preferCurrentQuoteMark?C.quoteMark:this.quoteMark),k===void 0&&(k=S.DOUBLE_QUOTE),k},x._syncRawValue=function(){var C=(0,e.default)(this._value,w[this.quoteMark]);C===this._value?this.raws&&delete this.raws.value:this.raws.value=C},x._handleEscapes=function(C,k){if(this._constructed){var I=(0,e.default)(k,{isIdentifier:!0});I!==k?this.raws[C]=I:delete this.raws[C]}},x._spacesFor=function(C){var k={before:"",after:""},I=this.spaces[C]||{},R=this.raws.spaces&&this.raws.spaces[C]||{};return Object.assign(k,I,R)},x._stringFor=function(C,k,I){k===void 0&&(k=C),I===void 0&&(I=b);var R=this._spacesFor(k);return I(this.stringifyProperty(C),R)},x.offsetOf=function(C){var k=1,I=this._spacesFor("attribute");if(k+=I.before.length,C==="namespace"||C==="ns")return this.namespace?k:-1;if(C==="attributeNS"||(k+=this.namespaceString.length,this.namespace&&(k+=1),C==="attribute"))return k;k+=this.stringifyProperty("attribute").length,k+=I.after.length;var R=this._spacesFor("operator");k+=R.before.length;var U=this.stringifyProperty("operator");if(C==="operator")return U?k:-1;k+=U.length,k+=R.after.length;var $=this._spacesFor("value");k+=$.before.length;var Q=this.stringifyProperty("value");if(C==="value")return Q?k:-1;k+=Q.length,k+=$.after.length;var V=this._spacesFor("insensitive");return k+=V.before.length,C==="insensitive"&&this.insensitive?k:-1},x.toString=function(){var C=this,k=[this.rawSpaceBefore,"["];return k.push(this._stringFor("qualifiedAttribute","attribute")),this.operator&&(this.value||this.value==="")&&(k.push(this._stringFor("operator")),k.push(this._stringFor("value")),k.push(this._stringFor("insensitiveFlag","insensitive",function(I,R){return I.length>0&&!C.quoted&&R.before.length===0&&!(C.spaces.value&&C.spaces.value.after)&&(R.before=" "),b(I,R)}))),k.push("]"),k.push(this.rawSpaceAfter),k.join("")},a(S,[{key:"quoted",get:function(){var C=this.quoteMark;return C==="'"||C==='"'},set:function(C){g()}},{key:"quoteMark",get:function(){return this._quoteMark},set:function(C){if(!this._constructed){this._quoteMark=C;return}this._quoteMark!==C&&(this._quoteMark=C,this._syncRawValue())}},{key:"qualifiedAttribute",get:function(){return this.qualifiedName(this.raws.attribute||this.attribute)}},{key:"insensitiveFlag",get:function(){return this.insensitive?"i":""}},{key:"value",get:function(){return this._value},set:function(C){if(this._constructed){var k=m(C),I=k.deprecatedUsage,R=k.unescaped,U=k.quoteMark;if(I&&d(),R===this._value&&U===this._quoteMark)return;this._value=R,this._quoteMark=U,this._syncRawValue()}else this._value=C}},{key:"insensitive",get:function(){return this._insensitive},set:function(C){C||(this._insensitive=!1,this.raws&&(this.raws.insensitiveFlag==="I"||this.raws.insensitiveFlag==="i")&&(this.raws.insensitiveFlag=void 0)),this._insensitive=C}},{key:"attribute",get:function(){return this._attribute},set:function(C){this._handleEscapes("attribute",C),this._attribute=C}}]),S})(i.default);s.default=O,O.NO_QUOTE=null,O.SINGLE_QUOTE="'",O.DOUBLE_QUOTE='"';var w=(n={"'":{quotes:"single",wrap:!0},'"':{quotes:"double",wrap:!0}},n[null]={isIdentifier:!0},n);function b(v,S){return""+S.before+v+S.after}})(yn)),yn}var Er={exports:{}},fa;function xu(){return fa||(fa=1,(function(s,e){e.__esModule=!0,e.default=void 0;var t=r(Wo()),i=Ne();function r(a){return a&&a.__esModule?a:{default:a}}function n(a,u){a.prototype=Object.create(u.prototype),a.prototype.constructor=a,o(a,u)}function o(a,u){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,c){return f.__proto__=c,f},o(a,u)}var l=(function(a){n(u,a);function u(h){var f;return f=a.call(this,h)||this,f.type=i.UNIVERSAL,f.value="*",f}return u})(t.default);e.default=l,s.exports=e.default})(Er,Er.exports)),Er.exports}var Mr={exports:{}},ca;function ku(){return ca||(ca=1,(function(s,e){e.__esModule=!0,e.default=void 0;var t=r(Ht()),i=Ne();function r(a){return a&&a.__esModule?a:{default:a}}function n(a,u){a.prototype=Object.create(u.prototype),a.prototype.constructor=a,o(a,u)}function o(a,u){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,c){return f.__proto__=c,f},o(a,u)}var l=(function(a){n(u,a);function u(h){var f;return f=a.call(this,h)||this,f.type=i.COMBINATOR,f}return u})(t.default);e.default=l,s.exports=e.default})(Mr,Mr.exports)),Mr.exports}var Rr={exports:{}},da;function Cu(){return da||(da=1,(function(s,e){e.__esModule=!0,e.default=void 0;var t=r(Ht()),i=Ne();function r(a){return a&&a.__esModule?a:{default:a}}function n(a,u){a.prototype=Object.create(u.prototype),a.prototype.constructor=a,o(a,u)}function o(a,u){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,c){return f.__proto__=c,f},o(a,u)}var l=(function(a){n(u,a);function u(h){var f;return f=a.call(this,h)||this,f.type=i.NESTING,f.value="&",f}return u})(t.default);e.default=l,s.exports=e.default})(Rr,Rr.exports)),Rr.exports}var Dr={exports:{}},pa;function yd(){return pa||(pa=1,(function(s,e){e.__esModule=!0,e.default=t;function t(i){return i.sort(function(r,n){return r-n})}s.exports=e.default})(Dr,Dr.exports)),Dr.exports}var On={},z={},ga;function Au(){if(ga)return z;ga=1,z.__esModule=!0,z.word=z.tilde=z.tab=z.str=z.space=z.slash=z.singleQuote=z.semicolon=z.plus=z.pipe=z.openSquare=z.openParenthesis=z.newline=z.greaterThan=z.feed=z.equals=z.doubleQuote=z.dollar=z.cr=z.comment=z.comma=z.combinator=z.colon=z.closeSquare=z.closeParenthesis=z.caret=z.bang=z.backslash=z.at=z.asterisk=z.ampersand=void 0;var s=38;z.ampersand=s;var e=42;z.asterisk=e;var t=64;z.at=t;var i=44;z.comma=i;var r=58;z.colon=r;var n=59;z.semicolon=n;var o=40;z.openParenthesis=o;var l=41;z.closeParenthesis=l;var a=91;z.openSquare=a;var u=93;z.closeSquare=u;var h=36;z.dollar=h;var f=126;z.tilde=f;var c=94;z.caret=c;var d=43;z.plus=d;var g=61;z.equals=g;var p=124;z.pipe=p;var m=62;z.greaterThan=m;var y=32;z.space=y;var O=39;z.singleQuote=O;var w=34;z.doubleQuote=w;var b=47;z.slash=b;var v=33;z.bang=v;var S=92;z.backslash=S;var x=13;z.cr=x;var A=12;z.feed=A;var C=10;z.newline=C;var k=9;z.tab=k;var I=O;z.str=I;var R=-1;z.comment=R;var U=-2;z.word=U;var $=-3;return z.combinator=$,z}var ma;function vd(){return ma||(ma=1,(function(s){s.__esModule=!0,s.FIELDS=void 0,s.default=g;var e=n(Au()),t,i;function r(p){if(typeof WeakMap!="function")return null;var m=new WeakMap,y=new WeakMap;return(r=function(w){return w?y:m})(p)}function n(p,m){if(p&&p.__esModule)return p;if(p===null||typeof p!="object"&&typeof p!="function")return{default:p};var y=r(m);if(y&&y.has(p))return y.get(p);var O={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in p)if(b!=="default"&&Object.prototype.hasOwnProperty.call(p,b)){var v=w?Object.getOwnPropertyDescriptor(p,b):null;v&&(v.get||v.set)?Object.defineProperty(O,b,v):O[b]=p[b]}return O.default=p,y&&y.set(p,O),O}for(var o=(t={},t[e.tab]=!0,t[e.newline]=!0,t[e.cr]=!0,t[e.feed]=!0,t),l=(i={},i[e.space]=!0,i[e.tab]=!0,i[e.newline]=!0,i[e.cr]=!0,i[e.feed]=!0,i[e.ampersand]=!0,i[e.asterisk]=!0,i[e.bang]=!0,i[e.comma]=!0,i[e.colon]=!0,i[e.semicolon]=!0,i[e.openParenthesis]=!0,i[e.closeParenthesis]=!0,i[e.openSquare]=!0,i[e.closeSquare]=!0,i[e.singleQuote]=!0,i[e.doubleQuote]=!0,i[e.plus]=!0,i[e.pipe]=!0,i[e.tilde]=!0,i[e.greaterThan]=!0,i[e.equals]=!0,i[e.dollar]=!0,i[e.caret]=!0,i[e.slash]=!0,i),a={},u="0123456789abcdefABCDEF",h=0;h<u.length;h++)a[u.charCodeAt(h)]=!0;function f(p,m){var y=m,O;do{if(O=p.charCodeAt(y),l[O])return y-1;O===e.backslash?y=c(p,y)+1:y++}while(y<p.length);return y-1}function c(p,m){var y=m,O=p.charCodeAt(y+1);if(!o[O])if(a[O]){var w=0;do y++,w++,O=p.charCodeAt(y+1);while(a[O]&&w<6);w<6&&O===e.space&&y++}else y++;return y}var d={TYPE:0,START_LINE:1,START_COL:2,END_LINE:3,END_COL:4,START_POS:5,END_POS:6};s.FIELDS=d;function g(p){var m=[],y=p.css.valueOf(),O=y,w=O.length,b=-1,v=1,S=0,x=0,A,C,k,I,R,U,$,Q,V,te,X,ne,re;function B(N,T){if(p.safe)y+=T,V=y.length-1;else throw p.error("Unclosed "+N,v,S-b,S)}for(;S<w;){switch(A=y.charCodeAt(S),A===e.newline&&(b=S,v+=1),A){case e.space:case e.tab:case e.newline:case e.cr:case e.feed:V=S;do V+=1,A=y.charCodeAt(V),A===e.newline&&(b=V,v+=1);while(A===e.space||A===e.newline||A===e.tab||A===e.cr||A===e.feed);re=e.space,I=v,k=V-b-1,x=V;break;case e.plus:case e.greaterThan:case e.tilde:case e.pipe:V=S;do V+=1,A=y.charCodeAt(V);while(A===e.plus||A===e.greaterThan||A===e.tilde||A===e.pipe);re=e.combinator,I=v,k=S-b,x=V;break;case e.asterisk:case e.ampersand:case e.bang:case e.comma:case e.equals:case e.dollar:case e.caret:case e.openSquare:case e.closeSquare:case e.colon:case e.semicolon:case e.openParenthesis:case e.closeParenthesis:V=S,re=A,I=v,k=S-b,x=V+1;break;case e.singleQuote:case e.doubleQuote:ne=A===e.singleQuote?"'":'"',V=S;do for(R=!1,V=y.indexOf(ne,V+1),V===-1&&B("quote",ne),U=V;y.charCodeAt(U-1)===e.backslash;)U-=1,R=!R;while(R);re=e.str,I=v,k=S-b,x=V+1;break;default:A===e.slash&&y.charCodeAt(S+1)===e.asterisk?(V=y.indexOf("*/",S+2)+1,V===0&&B("comment","*/"),C=y.slice(S,V+1),Q=C.split(`
`),$=Q.length-1,$>0?(te=v+$,X=V-Q[$].length):(te=v,X=b),re=e.comment,v=te,I=te,k=V-X):A===e.slash?(V=S,re=A,I=v,k=S-b,x=V+1):(V=f(y,S),re=e.word,I=v,k=V-b),x=V+1;break}m.push([re,v,S-b,I,k,S,x]),X&&(b=X,X=null),S=x}return m}})(On)),On}var ya;function Od(){return ya||(ya=1,(function(s,e){e.__esModule=!0,e.default=void 0;var t=x(pu()),i=x(gu()),r=x(mu()),n=x(yu()),o=x(vu()),l=x(Ou()),a=x(bu()),u=x(wu()),h=S(Su()),f=x(xu()),c=x(ku()),d=x(Cu()),g=x(yd()),p=S(vd()),m=S(Au()),y=S(Ne()),O=Ms(),w,b;function v(B){if(typeof WeakMap!="function")return null;var N=new WeakMap,T=new WeakMap;return(v=function(D){return D?T:N})(B)}function S(B,N){if(B&&B.__esModule)return B;if(B===null||typeof B!="object"&&typeof B!="function")return{default:B};var T=v(N);if(T&&T.has(B))return T.get(B);var P={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var W in B)if(W!=="default"&&Object.prototype.hasOwnProperty.call(B,W)){var E=D?Object.getOwnPropertyDescriptor(B,W):null;E&&(E.get||E.set)?Object.defineProperty(P,W,E):P[W]=B[W]}return P.default=B,T&&T.set(B,P),P}function x(B){return B&&B.__esModule?B:{default:B}}function A(B,N){for(var T=0;T<N.length;T++){var P=N[T];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(B,P.key,P)}}function C(B,N,T){return N&&A(B.prototype,N),Object.defineProperty(B,"prototype",{writable:!1}),B}var k=(w={},w[m.space]=!0,w[m.cr]=!0,w[m.feed]=!0,w[m.newline]=!0,w[m.tab]=!0,w),I=Object.assign({},k,(b={},b[m.comment]=!0,b));function R(B){return{line:B[p.FIELDS.START_LINE],column:B[p.FIELDS.START_COL]}}function U(B){return{line:B[p.FIELDS.END_LINE],column:B[p.FIELDS.END_COL]}}function $(B,N,T,P){return{start:{line:B,column:N},end:{line:T,column:P}}}function Q(B){return $(B[p.FIELDS.START_LINE],B[p.FIELDS.START_COL],B[p.FIELDS.END_LINE],B[p.FIELDS.END_COL])}function V(B,N){if(B)return $(B[p.FIELDS.START_LINE],B[p.FIELDS.START_COL],N[p.FIELDS.END_LINE],N[p.FIELDS.END_COL])}function te(B,N){var T=B[N];if(typeof T=="string")return T.indexOf("\\")!==-1&&((0,O.ensureObject)(B,"raws"),B[N]=(0,O.unesc)(T),B.raws[N]===void 0&&(B.raws[N]=T)),B}function X(B,N){for(var T=-1,P=[];(T=B.indexOf(N,T+1))!==-1;)P.push(T);return P}function ne(){var B=Array.prototype.concat.apply([],arguments);return B.filter(function(N,T){return T===B.indexOf(N)})}var re=(function(){function B(T,P){P===void 0&&(P={}),this.rule=T,this.options=Object.assign({lossy:!1,safe:!1},P),this.position=0,this.css=typeof this.rule=="string"?this.rule:this.rule.selector,this.tokens=(0,p.default)({css:this.css,error:this._errorGenerator(),safe:this.options.safe});var D=V(this.tokens[0],this.tokens[this.tokens.length-1]);this.root=new t.default({source:D}),this.root.errorGenerator=this._errorGenerator();var W=new i.default({source:{start:{line:1,column:1}},sourceIndex:0});this.root.append(W),this.current=W,this.loop()}var N=B.prototype;return N._errorGenerator=function(){var P=this;return function(D,W){return typeof P.rule=="string"?new Error(D):P.rule.error(D,W)}},N.attribute=function(){var P=[],D=this.currToken;for(this.position++;this.position<this.tokens.length&&this.currToken[p.FIELDS.TYPE]!==m.closeSquare;)P.push(this.currToken),this.position++;if(this.currToken[p.FIELDS.TYPE]!==m.closeSquare)return this.expected("closing square bracket",this.currToken[p.FIELDS.START_POS]);var W=P.length,E={source:$(D[1],D[2],this.currToken[3],this.currToken[4]),sourceIndex:D[p.FIELDS.START_POS]};if(W===1&&!~[m.word].indexOf(P[0][p.FIELDS.TYPE]))return this.expected("attribute",P[0][p.FIELDS.START_POS]);for(var Z=0,le="",ie="",H=null,ae=!1;Z<W;){var we=P[Z],J=this.content(we),be=P[Z+1];switch(we[p.FIELDS.TYPE]){case m.space:if(ae=!0,this.options.lossy)break;if(H){(0,O.ensureObject)(E,"spaces",H);var xt=E.spaces[H].after||"";E.spaces[H].after=xt+J;var dt=(0,O.getProp)(E,"raws","spaces",H,"after")||null;dt&&(E.raws.spaces[H].after=dt+J)}else le=le+J,ie=ie+J;break;case m.asterisk:if(be[p.FIELDS.TYPE]===m.equals)E.operator=J,H="operator";else if((!E.namespace||H==="namespace"&&!ae)&&be){le&&((0,O.ensureObject)(E,"spaces","attribute"),E.spaces.attribute.before=le,le=""),ie&&((0,O.ensureObject)(E,"raws","spaces","attribute"),E.raws.spaces.attribute.before=le,ie=""),E.namespace=(E.namespace||"")+J;var Ye=(0,O.getProp)(E,"raws","namespace")||null;Ye&&(E.raws.namespace+=J),H="namespace"}ae=!1;break;case m.dollar:if(H==="value"){var _e=(0,O.getProp)(E,"raws","value");E.value+="$",_e&&(E.raws.value=_e+"$");break}case m.caret:be[p.FIELDS.TYPE]===m.equals&&(E.operator=J,H="operator"),ae=!1;break;case m.combinator:if(J==="~"&&be[p.FIELDS.TYPE]===m.equals&&(E.operator=J,H="operator"),J!=="|"){ae=!1;break}be[p.FIELDS.TYPE]===m.equals?(E.operator=J,H="operator"):!E.namespace&&!E.attribute&&(E.namespace=!0),ae=!1;break;case m.word:if(be&&this.content(be)==="|"&&P[Z+2]&&P[Z+2][p.FIELDS.TYPE]!==m.equals&&!E.operator&&!E.namespace)E.namespace=J,H="namespace";else if(!E.attribute||H==="attribute"&&!ae){le&&((0,O.ensureObject)(E,"spaces","attribute"),E.spaces.attribute.before=le,le=""),ie&&((0,O.ensureObject)(E,"raws","spaces","attribute"),E.raws.spaces.attribute.before=ie,ie=""),E.attribute=(E.attribute||"")+J;var rt=(0,O.getProp)(E,"raws","attribute")||null;rt&&(E.raws.attribute+=J),H="attribute"}else if(!E.value&&E.value!==""||H==="value"&&!(ae||E.quoteMark)){var st=(0,O.unesc)(J),Qt=(0,O.getProp)(E,"raws","value")||"",lr=E.value||"";E.value=lr+st,E.quoteMark=null,(st!==J||Qt)&&((0,O.ensureObject)(E,"raws"),E.raws.value=(Qt||lr)+J),H="value"}else{var ar=J==="i"||J==="I";(E.value||E.value==="")&&(E.quoteMark||ae)?(E.insensitive=ar,(!ar||J==="I")&&((0,O.ensureObject)(E,"raws"),E.raws.insensitiveFlag=J),H="insensitive",le&&((0,O.ensureObject)(E,"spaces","insensitive"),E.spaces.insensitive.before=le,le=""),ie&&((0,O.ensureObject)(E,"raws","spaces","insensitive"),E.raws.spaces.insensitive.before=ie,ie="")):(E.value||E.value==="")&&(H="value",E.value+=J,E.raws.value&&(E.raws.value+=J))}ae=!1;break;case m.str:if(!E.attribute||!E.operator)return this.error("Expected an attribute followed by an operator preceding the string.",{index:we[p.FIELDS.START_POS]});var Ei=(0,h.unescapeValue)(J),Bc=Ei.unescaped,Nc=Ei.quoteMark;E.value=Bc,E.quoteMark=Nc,H="value",(0,O.ensureObject)(E,"raws"),E.raws.value=J,ae=!1;break;case m.equals:if(!E.attribute)return this.expected("attribute",we[p.FIELDS.START_POS],J);if(E.value)return this.error('Unexpected "=" found; an operator was already defined.',{index:we[p.FIELDS.START_POS]});E.operator=E.operator?E.operator+J:J,H="operator",ae=!1;break;case m.comment:if(H)if(ae||be&&be[p.FIELDS.TYPE]===m.space||H==="insensitive"){var Fc=(0,O.getProp)(E,"spaces",H,"after")||"",qc=(0,O.getProp)(E,"raws","spaces",H,"after")||Fc;(0,O.ensureObject)(E,"raws","spaces",H),E.raws.spaces[H].after=qc+J}else{var zc=E[H]||"",Wc=(0,O.getProp)(E,"raws",H)||zc;(0,O.ensureObject)(E,"raws"),E.raws[H]=Wc+J}else ie=ie+J;break;default:return this.error('Unexpected "'+J+'" found.',{index:we[p.FIELDS.START_POS]})}Z++}te(E,"attribute"),te(E,"namespace"),this.newNode(new h.default(E)),this.position++},N.parseWhitespaceEquivalentTokens=function(P){P<0&&(P=this.tokens.length);var D=this.position,W=[],E="",Z=void 0;do if(k[this.currToken[p.FIELDS.TYPE]])this.options.lossy||(E+=this.content());else if(this.currToken[p.FIELDS.TYPE]===m.comment){var le={};E&&(le.before=E,E=""),Z=new n.default({value:this.content(),source:Q(this.currToken),sourceIndex:this.currToken[p.FIELDS.START_POS],spaces:le}),W.push(Z)}while(++this.position<P);if(E){if(Z)Z.spaces.after=E;else if(!this.options.lossy){var ie=this.tokens[D],H=this.tokens[this.position-1];W.push(new a.default({value:"",source:$(ie[p.FIELDS.START_LINE],ie[p.FIELDS.START_COL],H[p.FIELDS.END_LINE],H[p.FIELDS.END_COL]),sourceIndex:ie[p.FIELDS.START_POS],spaces:{before:E,after:""}}))}}return W},N.convertWhitespaceNodesToSpace=function(P,D){var W=this;D===void 0&&(D=!1);var E="",Z="";P.forEach(function(ie){var H=W.lossySpace(ie.spaces.before,D),ae=W.lossySpace(ie.rawSpaceBefore,D);E+=H+W.lossySpace(ie.spaces.after,D&&H.length===0),Z+=H+ie.value+W.lossySpace(ie.rawSpaceAfter,D&&ae.length===0)}),Z===E&&(Z=void 0);var le={space:E,rawSpace:Z};return le},N.isNamedCombinator=function(P){return P===void 0&&(P=this.position),this.tokens[P+0]&&this.tokens[P+0][p.FIELDS.TYPE]===m.slash&&this.tokens[P+1]&&this.tokens[P+1][p.FIELDS.TYPE]===m.word&&this.tokens[P+2]&&this.tokens[P+2][p.FIELDS.TYPE]===m.slash},N.namedCombinator=function(){if(this.isNamedCombinator()){var P=this.content(this.tokens[this.position+1]),D=(0,O.unesc)(P).toLowerCase(),W={};D!==P&&(W.value="/"+P+"/");var E=new c.default({value:"/"+D+"/",source:$(this.currToken[p.FIELDS.START_LINE],this.currToken[p.FIELDS.START_COL],this.tokens[this.position+2][p.FIELDS.END_LINE],this.tokens[this.position+2][p.FIELDS.END_COL]),sourceIndex:this.currToken[p.FIELDS.START_POS],raws:W});return this.position=this.position+3,E}else this.unexpected()},N.combinator=function(){var P=this;if(this.content()==="|")return this.namespace();var D=this.locateNextMeaningfulToken(this.position);if(D<0||this.tokens[D][p.FIELDS.TYPE]===m.comma||this.tokens[D][p.FIELDS.TYPE]===m.closeParenthesis){var W=this.parseWhitespaceEquivalentTokens(D);if(W.length>0){var E=this.current.last;if(E){var Z=this.convertWhitespaceNodesToSpace(W),le=Z.space,ie=Z.rawSpace;ie!==void 0&&(E.rawSpaceAfter+=ie),E.spaces.after+=le}else W.forEach(function(Qt){return P.newNode(Qt)})}return}var H=this.currToken,ae=void 0;D>this.position&&(ae=this.parseWhitespaceEquivalentTokens(D));var we;if(this.isNamedCombinator()?we=this.namedCombinator():this.currToken[p.FIELDS.TYPE]===m.combinator?(we=new c.default({value:this.content(),source:Q(this.currToken),sourceIndex:this.currToken[p.FIELDS.START_POS]}),this.position++):k[this.currToken[p.FIELDS.TYPE]]||ae||this.unexpected(),we){if(ae){var J=this.convertWhitespaceNodesToSpace(ae),be=J.space,xt=J.rawSpace;we.spaces.before=be,we.rawSpaceBefore=xt}}else{var dt=this.convertWhitespaceNodesToSpace(ae,!0),Ye=dt.space,_e=dt.rawSpace;_e||(_e=Ye);var rt={},st={spaces:{}};Ye.endsWith(" ")&&_e.endsWith(" ")?(rt.before=Ye.slice(0,Ye.length-1),st.spaces.before=_e.slice(0,_e.length-1)):Ye[0]===" "&&_e[0]===" "?(rt.after=Ye.slice(1),st.spaces.after=_e.slice(1)):st.value=_e,we=new c.default({value:" ",source:V(H,this.tokens[this.position-1]),sourceIndex:H[p.FIELDS.START_POS],spaces:rt,raws:st})}return this.currToken&&this.currToken[p.FIELDS.TYPE]===m.space&&(we.spaces.after=this.optionalSpace(this.content()),this.position++),this.newNode(we)},N.comma=function(){if(this.position===this.tokens.length-1){this.root.trailingComma=!0,this.position++;return}this.current._inferEndPosition();var P=new i.default({source:{start:R(this.tokens[this.position+1])},sourceIndex:this.tokens[this.position+1][p.FIELDS.START_POS]});this.current.parent.append(P),this.current=P,this.position++},N.comment=function(){var P=this.currToken;this.newNode(new n.default({value:this.content(),source:Q(P),sourceIndex:P[p.FIELDS.START_POS]})),this.position++},N.error=function(P,D){throw this.root.error(P,D)},N.missingBackslash=function(){return this.error("Expected a backslash preceding the semicolon.",{index:this.currToken[p.FIELDS.START_POS]})},N.missingParenthesis=function(){return this.expected("opening parenthesis",this.currToken[p.FIELDS.START_POS])},N.missingSquareBracket=function(){return this.expected("opening square bracket",this.currToken[p.FIELDS.START_POS])},N.unexpected=function(){return this.error("Unexpected '"+this.content()+"'. Escaping special characters with \\ may help.",this.currToken[p.FIELDS.START_POS])},N.unexpectedPipe=function(){return this.error("Unexpected '|'.",this.currToken[p.FIELDS.START_POS])},N.namespace=function(){var P=this.prevToken&&this.content(this.prevToken)||!0;if(this.nextToken[p.FIELDS.TYPE]===m.word)return this.position++,this.word(P);if(this.nextToken[p.FIELDS.TYPE]===m.asterisk)return this.position++,this.universal(P);this.unexpectedPipe()},N.nesting=function(){if(this.nextToken){var P=this.content(this.nextToken);if(P==="|"){this.position++;return}}var D=this.currToken;this.newNode(new d.default({value:this.content(),source:Q(D),sourceIndex:D[p.FIELDS.START_POS]})),this.position++},N.parentheses=function(){var P=this.current.last,D=1;if(this.position++,P&&P.type===y.PSEUDO){var W=new i.default({source:{start:R(this.tokens[this.position])},sourceIndex:this.tokens[this.position][p.FIELDS.START_POS]}),E=this.current;for(P.append(W),this.current=W;this.position<this.tokens.length&&D;)this.currToken[p.FIELDS.TYPE]===m.openParenthesis&&D++,this.currToken[p.FIELDS.TYPE]===m.closeParenthesis&&D--,D?this.parse():(this.current.source.end=U(this.currToken),this.current.parent.source.end=U(this.currToken),this.position++);this.current=E}else{for(var Z=this.currToken,le="(",ie;this.position<this.tokens.length&&D;)this.currToken[p.FIELDS.TYPE]===m.openParenthesis&&D++,this.currToken[p.FIELDS.TYPE]===m.closeParenthesis&&D--,ie=this.currToken,le+=this.parseParenthesisToken(this.currToken),this.position++;P?P.appendToPropertyAndEscape("value",le,le):this.newNode(new a.default({value:le,source:$(Z[p.FIELDS.START_LINE],Z[p.FIELDS.START_COL],ie[p.FIELDS.END_LINE],ie[p.FIELDS.END_COL]),sourceIndex:Z[p.FIELDS.START_POS]}))}if(D)return this.expected("closing parenthesis",this.currToken[p.FIELDS.START_POS])},N.pseudo=function(){for(var P=this,D="",W=this.currToken;this.currToken&&this.currToken[p.FIELDS.TYPE]===m.colon;)D+=this.content(),this.position++;if(!this.currToken)return this.expected(["pseudo-class","pseudo-element"],this.position-1);if(this.currToken[p.FIELDS.TYPE]===m.word)this.splitWord(!1,function(E,Z){D+=E,P.newNode(new u.default({value:D,source:V(W,P.currToken),sourceIndex:W[p.FIELDS.START_POS]})),Z>1&&P.nextToken&&P.nextToken[p.FIELDS.TYPE]===m.openParenthesis&&P.error("Misplaced parenthesis.",{index:P.nextToken[p.FIELDS.START_POS]})});else return this.expected(["pseudo-class","pseudo-element"],this.currToken[p.FIELDS.START_POS])},N.space=function(){var P=this.content();this.position===0||this.prevToken[p.FIELDS.TYPE]===m.comma||this.prevToken[p.FIELDS.TYPE]===m.openParenthesis||this.current.nodes.every(function(D){return D.type==="comment"})?(this.spaces=this.optionalSpace(P),this.position++):this.position===this.tokens.length-1||this.nextToken[p.FIELDS.TYPE]===m.comma||this.nextToken[p.FIELDS.TYPE]===m.closeParenthesis?(this.current.last.spaces.after=this.optionalSpace(P),this.position++):this.combinator()},N.string=function(){var P=this.currToken;this.newNode(new a.default({value:this.content(),source:Q(P),sourceIndex:P[p.FIELDS.START_POS]})),this.position++},N.universal=function(P){var D=this.nextToken;if(D&&this.content(D)==="|")return this.position++,this.namespace();var W=this.currToken;this.newNode(new f.default({value:this.content(),source:Q(W),sourceIndex:W[p.FIELDS.START_POS]}),P),this.position++},N.splitWord=function(P,D){for(var W=this,E=this.nextToken,Z=this.content();E&&~[m.dollar,m.caret,m.equals,m.word].indexOf(E[p.FIELDS.TYPE]);){this.position++;var le=this.content();if(Z+=le,le.lastIndexOf("\\")===le.length-1){var ie=this.nextToken;ie&&ie[p.FIELDS.TYPE]===m.space&&(Z+=this.requiredSpace(this.content(ie)),this.position++)}E=this.nextToken}var H=X(Z,".").filter(function(be){var xt=Z[be-1]==="\\",dt=/^\d+\.\d+%$/.test(Z);return!xt&&!dt}),ae=X(Z,"#").filter(function(be){return Z[be-1]!=="\\"}),we=X(Z,"#{");we.length&&(ae=ae.filter(function(be){return!~we.indexOf(be)}));var J=(0,g.default)(ne([0].concat(H,ae)));J.forEach(function(be,xt){var dt=J[xt+1]||Z.length,Ye=Z.slice(be,dt);if(xt===0&&D)return D.call(W,Ye,J.length);var _e,rt=W.currToken,st=rt[p.FIELDS.START_POS]+J[xt],Qt=$(rt[1],rt[2]+be,rt[3],rt[2]+(dt-1));if(~H.indexOf(be)){var lr={value:Ye.slice(1),source:Qt,sourceIndex:st};_e=new r.default(te(lr,"value"))}else if(~ae.indexOf(be)){var ar={value:Ye.slice(1),source:Qt,sourceIndex:st};_e=new o.default(te(ar,"value"))}else{var Ei={value:Ye,source:Qt,sourceIndex:st};te(Ei,"value"),_e=new l.default(Ei)}W.newNode(_e,P),P=null}),this.position++},N.word=function(P){var D=this.nextToken;return D&&this.content(D)==="|"?(this.position++,this.namespace()):this.splitWord(P)},N.loop=function(){for(;this.position<this.tokens.length;)this.parse(!0);return this.current._inferEndPosition(),this.root},N.parse=function(P){switch(this.currToken[p.FIELDS.TYPE]){case m.space:this.space();break;case m.comment:this.comment();break;case m.openParenthesis:this.parentheses();break;case m.closeParenthesis:P&&this.missingParenthesis();break;case m.openSquare:this.attribute();break;case m.dollar:case m.caret:case m.equals:case m.word:this.word();break;case m.colon:this.pseudo();break;case m.comma:this.comma();break;case m.asterisk:this.universal();break;case m.ampersand:this.nesting();break;case m.slash:case m.combinator:this.combinator();break;case m.str:this.string();break;case m.closeSquare:this.missingSquareBracket();case m.semicolon:this.missingBackslash();default:this.unexpected()}},N.expected=function(P,D,W){if(Array.isArray(P)){var E=P.pop();P=P.join(", ")+" or "+E}var Z=/^[aeiou]/.test(P[0])?"an":"a";return W?this.error("Expected "+Z+" "+P+', found "'+W+'" instead.',{index:D}):this.error("Expected "+Z+" "+P+".",{index:D})},N.requiredSpace=function(P){return this.options.lossy?" ":P},N.optionalSpace=function(P){return this.options.lossy?"":P},N.lossySpace=function(P,D){return this.options.lossy?D?" ":"":P},N.parseParenthesisToken=function(P){var D=this.content(P);return P[p.FIELDS.TYPE]===m.space?this.requiredSpace(D):D},N.newNode=function(P,D){return D&&(/^ +$/.test(D)&&(this.options.lossy||(this.spaces=(this.spaces||"")+D),D=!0),P.namespace=D,te(P,"namespace")),this.spaces&&(P.spaces.before=this.spaces,this.spaces=""),this.current.append(P)},N.content=function(P){return P===void 0&&(P=this.currToken),this.css.slice(P[p.FIELDS.START_POS],P[p.FIELDS.END_POS])},N.locateNextMeaningfulToken=function(P){P===void 0&&(P=this.position+1);for(var D=P;D<this.tokens.length;)if(I[this.tokens[D][p.FIELDS.TYPE]]){D++;continue}else return D;return-1},C(B,[{key:"currToken",get:function(){return this.tokens[this.position]}},{key:"nextToken",get:function(){return this.tokens[this.position+1]}},{key:"prevToken",get:function(){return this.tokens[this.position-1]}}]),B})();e.default=re,s.exports=e.default})(dr,dr.exports)),dr.exports}var va;function bd(){return va||(va=1,(function(s,e){e.__esModule=!0,e.default=void 0;var t=i(Od());function i(n){return n&&n.__esModule?n:{default:n}}var r=(function(){function n(l,a){this.func=l||function(){},this.funcRes=null,this.options=a}var o=n.prototype;return o._shouldUpdateSelector=function(a,u){u===void 0&&(u={});var h=Object.assign({},this.options,u);return h.updateSelector===!1?!1:typeof a!="string"},o._isLossy=function(a){a===void 0&&(a={});var u=Object.assign({},this.options,a);return u.lossless===!1},o._root=function(a,u){u===void 0&&(u={});var h=new t.default(a,this._parseOptions(u));return h.root},o._parseOptions=function(a){return{lossy:this._isLossy(a)}},o._run=function(a,u){var h=this;return u===void 0&&(u={}),new Promise(function(f,c){try{var d=h._root(a,u);Promise.resolve(h.func(d)).then(function(g){var p=void 0;return h._shouldUpdateSelector(a,u)&&(p=d.toString(),a.selector=p),{transform:g,root:d,string:p}}).then(f,c)}catch(g){c(g);return}})},o._runSync=function(a,u){u===void 0&&(u={});var h=this._root(a,u),f=this.func(h);if(f&&typeof f.then=="function")throw new Error("Selector processor returned a promise to a synchronous call.");var c=void 0;return u.updateSelector&&typeof a!="string"&&(c=h.toString(),a.selector=c),{transform:f,root:h,string:c}},o.ast=function(a,u){return this._run(a,u).then(function(h){return h.root})},o.astSync=function(a,u){return this._runSync(a,u).root},o.transform=function(a,u){return this._run(a,u).then(function(h){return h.transform})},o.transformSync=function(a,u){return this._runSync(a,u).transform},o.process=function(a,u){return this._run(a,u).then(function(h){return h.string||h.root.toString()})},o.processSync=function(a,u){var h=this._runSync(a,u);return h.string||h.root.toString()},n})();e.default=r,s.exports=e.default})(cr,cr.exports)),cr.exports}var bn={},de={},Oa;function wd(){if(Oa)return de;Oa=1,de.__esModule=!0,de.universal=de.tag=de.string=de.selector=de.root=de.pseudo=de.nesting=de.id=de.comment=de.combinator=de.className=de.attribute=void 0;var s=c(Su()),e=c(mu()),t=c(ku()),i=c(yu()),r=c(vu()),n=c(Cu()),o=c(wu()),l=c(pu()),a=c(gu()),u=c(bu()),h=c(Ou()),f=c(xu());function c(C){return C&&C.__esModule?C:{default:C}}var d=function(k){return new s.default(k)};de.attribute=d;var g=function(k){return new e.default(k)};de.className=g;var p=function(k){return new t.default(k)};de.combinator=p;var m=function(k){return new i.default(k)};de.comment=m;var y=function(k){return new r.default(k)};de.id=y;var O=function(k){return new n.default(k)};de.nesting=O;var w=function(k){return new o.default(k)};de.pseudo=w;var b=function(k){return new l.default(k)};de.root=b;var v=function(k){return new a.default(k)};de.selector=v;var S=function(k){return new u.default(k)};de.string=S;var x=function(k){return new h.default(k)};de.tag=x;var A=function(k){return new f.default(k)};return de.universal=A,de}var oe={},ba;function Sd(){if(ba)return oe;ba=1,oe.__esModule=!0,oe.isComment=oe.isCombinator=oe.isClassName=oe.isAttribute=void 0,oe.isContainer=w,oe.isIdentifier=void 0,oe.isNamespace=b,oe.isNesting=void 0,oe.isNode=i,oe.isPseudo=void 0,oe.isPseudoClass=O,oe.isPseudoElement=y,oe.isUniversal=oe.isTag=oe.isString=oe.isSelector=oe.isRoot=void 0;var s=Ne(),e,t=(e={},e[s.ATTRIBUTE]=!0,e[s.CLASS]=!0,e[s.COMBINATOR]=!0,e[s.COMMENT]=!0,e[s.ID]=!0,e[s.NESTING]=!0,e[s.PSEUDO]=!0,e[s.ROOT]=!0,e[s.SELECTOR]=!0,e[s.STRING]=!0,e[s.TAG]=!0,e[s.UNIVERSAL]=!0,e);function i(v){return typeof v=="object"&&t[v.type]}function r(v,S){return i(S)&&S.type===v}var n=r.bind(null,s.ATTRIBUTE);oe.isAttribute=n;var o=r.bind(null,s.CLASS);oe.isClassName=o;var l=r.bind(null,s.COMBINATOR);oe.isCombinator=l;var a=r.bind(null,s.COMMENT);oe.isComment=a;var u=r.bind(null,s.ID);oe.isIdentifier=u;var h=r.bind(null,s.NESTING);oe.isNesting=h;var f=r.bind(null,s.PSEUDO);oe.isPseudo=f;var c=r.bind(null,s.ROOT);oe.isRoot=c;var d=r.bind(null,s.SELECTOR);oe.isSelector=d;var g=r.bind(null,s.STRING);oe.isString=g;var p=r.bind(null,s.TAG);oe.isTag=p;var m=r.bind(null,s.UNIVERSAL);oe.isUniversal=m;function y(v){return f(v)&&v.value&&(v.value.startsWith("::")||v.value.toLowerCase()===":before"||v.value.toLowerCase()===":after"||v.value.toLowerCase()===":first-letter"||v.value.toLowerCase()===":first-line")}function O(v){return f(v)&&!y(v)}function w(v){return!!(i(v)&&v.walk)}function b(v){return n(v)||p(v)}return oe}var wa;function xd(){return wa||(wa=1,(function(s){s.__esModule=!0;var e=Ne();Object.keys(e).forEach(function(r){r==="default"||r==="__esModule"||r in s&&s[r]===e[r]||(s[r]=e[r])});var t=wd();Object.keys(t).forEach(function(r){r==="default"||r==="__esModule"||r in s&&s[r]===t[r]||(s[r]=t[r])});var i=Sd();Object.keys(i).forEach(function(r){r==="default"||r==="__esModule"||r in s&&s[r]===i[r]||(s[r]=i[r])})})(bn)),bn}var Sa;function kd(){return Sa||(Sa=1,(function(s,e){e.__esModule=!0,e.default=void 0;var t=o(bd()),i=n(xd());function r(u){if(typeof WeakMap!="function")return null;var h=new WeakMap,f=new WeakMap;return(r=function(d){return d?f:h})(u)}function n(u,h){if(u&&u.__esModule)return u;if(u===null||typeof u!="object"&&typeof u!="function")return{default:u};var f=r(h);if(f&&f.has(u))return f.get(u);var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in u)if(g!=="default"&&Object.prototype.hasOwnProperty.call(u,g)){var p=d?Object.getOwnPropertyDescriptor(u,g):null;p&&(p.get||p.set)?Object.defineProperty(c,g,p):c[g]=u[g]}return c.default=u,f&&f.set(u,c),c}function o(u){return u&&u.__esModule?u:{default:u}}var l=function(h){return new t.default(h)};Object.assign(l,i),delete l.__esModule;var a=l;e.default=a,s.exports=e.default})(fr,fr.exports)),fr.exports}var Cd=kd();const Ad=su(Cd);function Pd(s){if(!s?.trim())return[];s=s.replace(/^```(?:css)?\s*\n?|```$/gi,"").trim();const e=[];if(typeof window<"u"&&!window.__postcss_warnings_suppressed){const t=console.warn;console.warn=(...i)=>{const r=i[0];typeof r=="string"&&r.includes("externalized for browser compatibility")||t(...i)},window.__postcss_warnings_suppressed=!0}try{return ye.parse(s).walkRules(i=>{try{let r=i.selector?.trim();if(!r)return;const n=i.source?.start?.line||1;try{r=Ad().processSync(r).trim()}catch{}if(!r||r.startsWith("@"))return;e.push({selector:r,position:{start:{line:n}},declarations:[]})}catch{}}),e}catch{return Td(s)}}function Td(s){const e=[],t=s.split(`
`);let i=1;for(let r=0;r<t.length;r++){const n=t[r].trim();if(n.includes("{")&&!n.startsWith("@")){let o=n.split("{")[0].trim();o&&e.push({selector:o,position:{start:{line:i}},declarations:[]})}i++}return e}const{compressToEncodedURIComponent:Ed,decompressFromEncodedURIComponent:Md}=Xc;function xa(s){if(!s?.trim())return"";try{const e=Ed(s.trim());return e?`#css=${e}`:""}catch{return""}}function Rd(){if(typeof window>"u")return null;const s=window.location.hash.slice(1);if(!s.startsWith("css="))return null;const e=s.slice(4);if(!e)return null;try{return Md(e)||null}catch{return null}}let $n=[],Pu=[];(()=>{let s="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<s.length;e++)(e%2?Pu:$n).push(t=t+s[e])})();function Dd(s){if(s<768)return!1;for(let e=0,t=$n.length;;){let i=e+t>>1;if(s<$n[i])t=i;else if(s>=Pu[i])e=i+1;else return!0;if(e==t)return!1}}function ka(s){return s>=127462&&s<=127487}const Ca=8205;function Qd(s,e,t=!0,i=!0){return(t?Tu:_d)(s,e,i)}function Tu(s,e,t){if(e==s.length)return e;e&&Eu(s.charCodeAt(e))&&Mu(s.charCodeAt(e-1))&&e--;let i=wn(s,e);for(e+=Aa(i);e<s.length;){let r=wn(s,e);if(i==Ca||r==Ca||t&&Dd(r))e+=Aa(r),i=r;else if(ka(r)){let n=0,o=e-2;for(;o>=0&&ka(wn(s,o));)n++,o-=2;if(n%2==0)break;e+=2}else break}return e}function _d(s,e,t){for(;e>0;){let i=Tu(s,e-2,t);if(i<e)return i;e--}return 0}function wn(s,e){let t=s.charCodeAt(e);if(!Mu(t)||e+1==s.length)return t;let i=s.charCodeAt(e+1);return Eu(i)?(t-55296<<10)+(i-56320)+65536:t}function Eu(s){return s>=56320&&s<57344}function Mu(s){return s>=55296&&s<56320}function Aa(s){return s<65536?1:2}class se{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=Oi(this,e,t);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(t,this.length,r,1),vt.from(r,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Oi(this,e,t);let i=[];return this.decompose(e,t,i,0),vt.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new qi(this),n=new qi(e);for(let o=t,l=t;;){if(r.next(o),n.next(o),o=0,r.lineBreak!=n.lineBreak||r.done!=n.done||r.value!=n.value)return!1;if(l+=r.value.length,r.done||l>=i)return!0}}iter(e=1){return new qi(this,e)}iterRange(e,t=this.length){return new Ru(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Du(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?se.empty:e.length<=32?new Se(e):vt.from(Se.split(e,[]))}}class Se extends se{constructor(e,t=Id(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,r){for(let n=0;;n++){let o=this.text[n],l=r+o.length;if((t?i:l)>=e)return new Ld(r,l,i,o);r=l+1,i++}}decompose(e,t,i,r){let n=e<=0&&t>=this.length?this:new Se(Pa(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),l=Gr(n.text,o.text.slice(),0,n.length);if(l.length<=32)i.push(new Se(l,o.length+n.length));else{let a=l.length>>1;i.push(new Se(l.slice(0,a)),new Se(l.slice(a)))}}else i.push(n)}replace(e,t,i){if(!(i instanceof Se))return super.replace(e,t,i);[e,t]=Oi(this,e,t);let r=Gr(this.text,Gr(i.text,Pa(this.text,0,e)),t),n=this.length+i.length-(t-e);return r.length<=32?new Se(r,n):vt.from(Se.split(r,[]),n)}sliceString(e,t=this.length,i=`
`){[e,t]=Oi(this,e,t);let r="";for(let n=0,o=0;n<=t&&o<this.text.length;o++){let l=this.text[o],a=n+l.length;n>e&&o&&(r+=i),e<a&&t>n&&(r+=l.slice(Math.max(0,e-n),t-n)),n=a+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],r=-1;for(let n of e)i.push(n),r+=n.length+1,i.length==32&&(t.push(new Se(i,r)),i=[],r=-1);return r>-1&&t.push(new Se(i,r)),t}}class vt extends se{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,r){for(let n=0;;n++){let o=this.children[n],l=r+o.length,a=i+o.lines-1;if((t?a:l)>=e)return o.lineInner(e,t,i,r);r=l+1,i=a+1}}decompose(e,t,i,r){for(let n=0,o=0;o<=t&&n<this.children.length;n++){let l=this.children[n],a=o+l.length;if(e<=a&&t>=o){let u=r&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!u?i.push(l):l.decompose(e-o,t-o,i,u)}o=a+1}}replace(e,t,i){if([e,t]=Oi(this,e,t),i.lines<this.lines)for(let r=0,n=0;r<this.children.length;r++){let o=this.children[r],l=n+o.length;if(e>=n&&t<=l){let a=o.replace(e-n,t-n,i),u=this.lines-o.lines+a.lines;if(a.lines<u>>4&&a.lines>u>>6){let h=this.children.slice();return h[r]=a,new vt(h,this.length-(t-e)+i.length)}return super.replace(n,l,a)}n=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=Oi(this,e,t);let r="";for(let n=0,o=0;n<this.children.length&&o<=t;n++){let l=this.children[n],a=o+l.length;o>e&&n&&(r+=i),e<a&&t>o&&(r+=l.sliceString(e-o,t-o,i)),o=a+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof vt))return 0;let i=0,[r,n,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,n+=t){if(r==o||n==l)return i;let a=this.children[r],u=e.children[n];if(a!=u)return i+a.scanIdentical(u,t);i+=a.length+1}}static from(e,t=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let d of e)i+=d.lines;if(i<32){let d=[];for(let g of e)g.flatten(d);return new Se(d,t)}let r=Math.max(32,i>>5),n=r<<1,o=r>>1,l=[],a=0,u=-1,h=[];function f(d){let g;if(d.lines>n&&d instanceof vt)for(let p of d.children)f(p);else d.lines>o&&(a>o||!a)?(c(),l.push(d)):d instanceof Se&&a&&(g=h[h.length-1])instanceof Se&&d.lines+g.lines<=32?(a+=d.lines,u+=d.length+1,h[h.length-1]=new Se(g.text.concat(d.text),g.length+1+d.length)):(a+d.lines>r&&c(),a+=d.lines,u+=d.length+1,h.push(d))}function c(){a!=0&&(l.push(h.length==1?h[0]:vt.from(h,u)),u=-1,a=h.length=0)}for(let d of e)f(d);return c(),l.length==1?l[0]:new vt(l,t)}}se.empty=new Se([""],0);function Id(s){let e=-1;for(let t of s)e+=t.length+1;return e}function Gr(s,e,t=0,i=1e9){for(let r=0,n=0,o=!0;n<s.length&&r<=i;n++){let l=s[n],a=r+l.length;a>=t&&(a>i&&(l=l.slice(0,i-r)),r<t&&(l=l.slice(t-r)),o?(e[e.length-1]+=l,o=!1):e.push(l)),r=a+1}return e}function Pa(s,e,t){return Gr(s,[""],e,t)}class qi{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Se?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],n=this.offsets[i],o=n>>1,l=r instanceof Se?r.text.length:r.children.length;if(o==(t>0?l:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((n&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Se){let a=r.text[o+(t<0?-1:0)];if(this.offsets[i]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=r.children[o+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof Se?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Ru{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new qi(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=i?r:t<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Du{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(se.prototype[Symbol.iterator]=function(){return this.iter()},qi.prototype[Symbol.iterator]=Ru.prototype[Symbol.iterator]=Du.prototype[Symbol.iterator]=function(){return this});class Ld{constructor(e,t,i,r){this.from=e,this.to=t,this.number=i,this.text=r}get length(){return this.to-this.from}}function Oi(s,e,t){return e=Math.max(0,Math.min(s.length,e)),[e,Math.max(e,Math.min(s.length,t))]}function $e(s,e,t=!0,i=!0){return Qd(s,e,t,i)}function Bd(s){return s>=56320&&s<57344}function Nd(s){return s>=55296&&s<56320}function Fd(s,e){let t=s.charCodeAt(e);if(!Nd(t)||e+1==s.length)return t;let i=s.charCodeAt(e+1);return Bd(i)?(t-55296<<10)+(i-56320)+65536:t}function qd(s){return s<65536?1:2}const Vn=/\r\n?|\n/;var Ke=(function(s){return s[s.Simple=0]="Simple",s[s.TrackDel=1]="TrackDel",s[s.TrackBefore=2]="TrackBefore",s[s.TrackAfter=3]="TrackAfter",s})(Ke||(Ke={}));class Mt{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,r=0;t<this.sections.length;){let n=this.sections[t++],o=this.sections[t++];o<0?(e(i,r,n),r+=n):r+=o,i+=n}}iterChangedRanges(e,t=!1){Un(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];r<0?e.push(i,r):e.push(r,i)}return new Mt(e)}composeDesc(e){return this.empty?e:e.empty?this:Qu(this,e)}mapDesc(e,t=!1){return e.empty?this:jn(this,e,t)}mapPos(e,t=-1,i=Ke.Simple){let r=0,n=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],u=r+l;if(a<0){if(u>e)return n+(e-r);n+=l}else{if(i!=Ke.Simple&&u>=e&&(i==Ke.TrackDel&&r<e&&u>e||i==Ke.TrackBefore&&r<e||i==Ke.TrackAfter&&u>e))return null;if(u>e||u==e&&t<0&&!l)return e==r||t<0?n:n+a;n+=a}r=u}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return n}touchesRange(e,t=e){for(let i=0,r=0;i<this.sections.length&&r<=t;){let n=this.sections[i++],o=this.sections[i++],l=r+n;if(o>=0&&r<=t&&l>=e)return r<e&&l>t?"cover":!0;r=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Mt(e)}static create(e){return new Mt(e)}}class Ee extends Mt{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Un(this,(t,i,r,n,o)=>e=e.replace(r,r+(i-t),o),!1),e}mapDesc(e,t=!1){return jn(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let r=0,n=0;r<t.length;r+=2){let o=t[r],l=t[r+1];if(l>=0){t[r]=l,t[r+1]=o;let a=r>>1;for(;i.length<a;)i.push(se.empty);i.push(o?e.slice(n,n+o):se.empty)}n+=o}return new Ee(t,i)}compose(e){return this.empty?e:e.empty?this:Qu(this,e,!0)}map(e,t=!1){return e.empty?this:jn(this,e,t,!0)}iterChanges(e,t=!1){Un(this,e,t)}get desc(){return Mt.create(this.sections)}filter(e){let t=[],i=[],r=[],n=new ji(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&n.len==0;){if(n.done)break e;let h=Math.min(n.len,a-l);Ie(r,h,-1);let f=n.ins==-1?-1:n.off==0?n.ins:0;Ie(t,h,f),f>0&&Nt(i,t,n.text),n.forward(h),l+=h}let u=e[o++];for(;l<u;){if(n.done)break e;let h=Math.min(n.len,u-l);Ie(t,h,-1),Ie(r,h,n.ins==-1?-1:n.off==0?n.ins:0),n.forward(h),l+=h}}return{changes:new Ee(t,i),filtered:Mt.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],r=this.sections[t+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let r=[],n=[],o=0,l=null;function a(h=!1){if(!h&&!r.length)return;o<t&&Ie(r,t-o,-1);let f=new Ee(r,n);l=l?l.compose(f.map(l)):f,r=[],n=[],o=0}function u(h){if(Array.isArray(h))for(let f of h)u(f);else if(h instanceof Ee){if(h.length!=t)throw new RangeError(`Mismatched change set length (got ${h.length}, expected ${t})`);a(),l=l?l.compose(h.map(l)):h}else{let{from:f,to:c=f,insert:d}=h;if(f>c||f<0||c>t)throw new RangeError(`Invalid change range ${f} to ${c} (in doc of length ${t})`);let g=d?typeof d=="string"?se.of(d.split(i||Vn)):d:se.empty,p=g.length;if(f==c&&p==0)return;f<o&&a(),f>o&&Ie(r,f-o,-1),Ie(r,c-f,p),Nt(n,r,g),o=c}}return u(e),a(!l),l}static empty(e){return new Ee(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let r=0;r<e.length;r++){let n=e[r];if(typeof n=="number")t.push(n,-1);else{if(!Array.isArray(n)||typeof n[0]!="number"||n.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(n.length==1)t.push(n[0],0);else{for(;i.length<r;)i.push(se.empty);i[r]=se.of(n.slice(1)),t.push(n[0],i[r].length)}}}return new Ee(t,i)}static createSet(e,t){return new Ee(e,t)}}function Ie(s,e,t,i=!1){if(e==0&&t<=0)return;let r=s.length-2;r>=0&&t<=0&&t==s[r+1]?s[r]+=e:r>=0&&e==0&&s[r]==0?s[r+1]+=t:i?(s[r]+=e,s[r+1]+=t):s.push(e,t)}function Nt(s,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<s.length)s[s.length-1]=s[s.length-1].append(t);else{for(;s.length<i;)s.push(se.empty);s.push(t)}}function Un(s,e,t){let i=s.inserted;for(let r=0,n=0,o=0;o<s.sections.length;){let l=s.sections[o++],a=s.sections[o++];if(a<0)r+=l,n+=l;else{let u=r,h=n,f=se.empty;for(;u+=l,h+=a,a&&i&&(f=f.append(i[o-2>>1])),!(t||o==s.sections.length||s.sections[o+1]<0);)l=s.sections[o++],a=s.sections[o++];e(r,u,n,h,f),r=u,n=h}}}function jn(s,e,t,i=!1){let r=[],n=i?[]:null,o=new ji(s),l=new ji(e);for(let a=-1;;){if(o.done&&l.len||l.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&l.ins==-1){let u=Math.min(o.len,l.len);Ie(r,u,-1),o.forward(u),l.forward(u)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!t))){let u=l.len;for(Ie(r,l.ins,-1);u;){let h=Math.min(o.len,u);o.ins>=0&&a<o.i&&o.len<=h&&(Ie(r,0,o.ins),n&&Nt(n,r,o.text),a=o.i),o.forward(h),u-=h}l.next()}else if(o.ins>=0){let u=0,h=o.len;for(;h;)if(l.ins==-1){let f=Math.min(h,l.len);u+=f,h-=f,l.forward(f)}else if(l.ins==0&&l.len<h)h-=l.len,l.next();else break;Ie(r,u,a<o.i?o.ins:0),n&&a<o.i&&Nt(n,r,o.text),a=o.i,o.forward(o.len-h)}else{if(o.done&&l.done)return n?Ee.createSet(r,n):Mt.create(r);throw new Error("Mismatched change set lengths")}}}function Qu(s,e,t=!1){let i=[],r=t?[]:null,n=new ji(s),o=new ji(e);for(let l=!1;;){if(n.done&&o.done)return r?Ee.createSet(i,r):Mt.create(i);if(n.ins==0)Ie(i,n.len,0,l),n.next();else if(o.len==0&&!o.done)Ie(i,0,o.ins,l),r&&Nt(r,i,o.text),o.next();else{if(n.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(n.len2,o.len),u=i.length;if(n.ins==-1){let h=o.ins==-1?-1:o.off?0:o.ins;Ie(i,a,h,l),r&&h&&Nt(r,i,o.text)}else o.ins==-1?(Ie(i,n.off?0:n.len,a,l),r&&Nt(r,i,n.textBit(a))):(Ie(i,n.off?0:n.len,o.off?0:o.ins,l),r&&!o.off&&Nt(r,i,o.text));l=(n.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>u),n.forward2(a),o.forward(a)}}}}class ji{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?se.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?se.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Zt{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new Zt(i,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return L.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return L.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return L.range(e.anchor,e.head)}static create(e,t,i){return new Zt(e,t,i)}}class L{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:L.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new L([this.main],0)}addRange(e,t=!0){return L.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,L.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new L(e.ranges.map(t=>Zt.fromJSON(t)),e.main)}static single(e,t=e){return new L([L.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let n=e[r];if(n.empty?n.from<=i:n.from<i)return L.normalized(e.slice(),t);i=n.to}return new L(e,t)}static cursor(e,t=0,i,r){return Zt.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,t,i,r){let n=(i??16777215)<<6|(r==null?7:Math.min(6,r));return t<e?Zt.create(t,e,48|n):Zt.create(e,t,(t>e?8:0)|n)}static normalized(e,t=0){let i=e[t];e.sort((r,n)=>r.from-n.from),t=e.indexOf(i);for(let r=1;r<e.length;r++){let n=e[r],o=e[r-1];if(n.empty?n.from<=o.to:n.from<o.to){let l=o.from,a=Math.max(n.to,o.to);r<=t&&t--,e.splice(--r,2,n.anchor>n.head?L.range(a,l):L.range(l,a))}}return new L(e,t)}}function _u(s,e){for(let t of s.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let $o=0;class j{constructor(e,t,i,r,n){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=r,this.id=$o++,this.default=e([]),this.extensions=typeof n=="function"?n(this):n}get reader(){return this}static define(e={}){return new j(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:Vo),!!e.static,e.enables)}of(e){return new Kr([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Kr(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Kr(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function Vo(s,e){return s==e||s.length==e.length&&s.every((t,i)=>t===e[i])}class Kr{constructor(e,t,i,r){this.dependencies=e,this.facet=t,this.type=i,this.value=r,this.id=$o++}dynamicSlot(e){var t;let i=this.value,r=this.facet.compareInput,n=this.id,o=e[n]>>1,l=this.type==2,a=!1,u=!1,h=[];for(let f of this.dependencies)f=="doc"?a=!0:f=="selection"?u=!0:(((t=e[f.id])!==null&&t!==void 0?t:1)&1)==0&&h.push(e[f.id]);return{create(f){return f.values[o]=i(f),1},update(f,c){if(a&&c.docChanged||u&&(c.docChanged||c.selection)||Hn(f,h)){let d=i(f);if(l?!Ta(d,f.values[o],r):!r(d,f.values[o]))return f.values[o]=d,1}return 0},reconfigure:(f,c)=>{let d,g=c.config.address[n];if(g!=null){let p=as(c,g);if(this.dependencies.every(m=>m instanceof j?c.facet(m)===f.facet(m):m instanceof hi?c.field(m,!1)==f.field(m,!1):!0)||(l?Ta(d=i(f),p,r):r(d=i(f),p)))return f.values[o]=p,0}else d=i(f);return f.values[o]=d,1}}}}function Ta(s,e,t){if(s.length!=e.length)return!1;for(let i=0;i<s.length;i++)if(!t(s[i],e[i]))return!1;return!0}function Hn(s,e){let t=!1;for(let i of e)zi(s,i)&1&&(t=!0);return t}function zd(s,e,t){let i=t.map(a=>s[a.id]),r=t.map(a=>a.type),n=i.filter(a=>!(a&1)),o=s[e.id]>>1;function l(a){let u=[];for(let h=0;h<i.length;h++){let f=as(a,i[h]);if(r[h]==2)for(let c of f)u.push(c);else u.push(f)}return e.combine(u)}return{create(a){for(let u of i)zi(a,u);return a.values[o]=l(a),1},update(a,u){if(!Hn(a,n))return 0;let h=l(a);return e.compare(h,a.values[o])?0:(a.values[o]=h,1)},reconfigure(a,u){let h=Hn(a,i),f=u.config.facets[e.id],c=u.facet(e);if(f&&!h&&Vo(t,f))return a.values[o]=c,0;let d=l(a);return e.compare(d,c)?(a.values[o]=c,0):(a.values[o]=d,1)}}}const Qr=j.define({static:!0});class hi{constructor(e,t,i,r,n){this.id=e,this.createF=t,this.updateF=i,this.compareF=r,this.spec=n,this.provides=void 0}static define(e){let t=new hi($o++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Qr).find(i=>i.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,r)=>{let n=i.values[t],o=this.updateF(n,r);return this.compareF(n,o)?0:(i.values[t]=o,1)},reconfigure:(i,r)=>{let n=i.facet(Qr),o=r.facet(Qr),l;return(l=n.find(a=>a.field==this))&&l!=o.find(a=>a.field==this)?(i.values[t]=l.create(i),1):r.config.address[this.id]!=null?(i.values[t]=r.field(this),0):(i.values[t]=this.create(i),1)}}}init(e){return[this,Qr.of({field:this,create:e})]}get extension(){return this}}const Kt={lowest:4,low:3,default:2,high:1,highest:0};function Mi(s){return e=>new Iu(e,s)}const Uo={highest:Mi(Kt.highest),high:Mi(Kt.high),default:Mi(Kt.default),low:Mi(Kt.low),lowest:Mi(Kt.lowest)};class Iu{constructor(e,t){this.inner=e,this.prec=t}}class Rs{of(e){return new Yn(this,e)}reconfigure(e){return Rs.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Yn{constructor(e,t){this.compartment=e,this.inner=t}}class ls{constructor(e,t,i,r,n,o){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=r,this.staticValues=n,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let r=[],n=Object.create(null),o=new Map;for(let c of Wd(e,t,o))c instanceof hi?r.push(c):(n[c.facet.id]||(n[c.facet.id]=[])).push(c);let l=Object.create(null),a=[],u=[];for(let c of r)l[c.id]=u.length<<1,u.push(d=>c.slot(d));let h=i?.config.facets;for(let c in n){let d=n[c],g=d[0].facet,p=h&&h[c]||[];if(d.every(m=>m.type==0))if(l[g.id]=a.length<<1|1,Vo(p,d))a.push(i.facet(g));else{let m=g.combine(d.map(y=>y.value));a.push(i&&g.compare(m,i.facet(g))?i.facet(g):m)}else{for(let m of d)m.type==0?(l[m.id]=a.length<<1|1,a.push(m.value)):(l[m.id]=u.length<<1,u.push(y=>m.dynamicSlot(y)));l[g.id]=u.length<<1,u.push(m=>zd(m,g,d))}}let f=u.map(c=>c(l));return new ls(e,o,f,l,a,n)}}function Wd(s,e,t){let i=[[],[],[],[],[]],r=new Map;function n(o,l){let a=r.get(o);if(a!=null){if(a<=l)return;let u=i[a].indexOf(o);u>-1&&i[a].splice(u,1),o instanceof Yn&&t.delete(o.compartment)}if(r.set(o,l),Array.isArray(o))for(let u of o)n(u,l);else if(o instanceof Yn){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;t.set(o.compartment,u),n(u,l)}else if(o instanceof Iu)n(o.inner,o.prec);else if(o instanceof hi)i[l].push(o),o.provides&&n(o.provides,l);else if(o instanceof Kr)i[l].push(o),o.facet.extensions&&n(o.facet.extensions,Kt.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);n(u,l)}}return n(s,Kt.default),i.reduce((o,l)=>o.concat(l))}function zi(s,e){if(e&1)return 2;let t=e>>1,i=s.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;s.status[t]=4;let r=s.computeSlot(s,s.config.dynamicSlots[t]);return s.status[t]=2|r}function as(s,e){return e&1?s.config.staticValues[e>>1]:s.values[e>>1]}const Lu=j.define(),Xn=j.define({combine:s=>s.some(e=>e),static:!0}),Bu=j.define({combine:s=>s.length?s[0]:void 0,static:!0}),Nu=j.define(),Fu=j.define(),qu=j.define(),zu=j.define({combine:s=>s.length?s[0]:!1});class Pi{constructor(e,t){this.type=e,this.value=t}static define(){return new $d}}class $d{of(e){return new Pi(this,e)}}class Vd{constructor(e){this.map=e}of(e){return new Pe(this,e)}}class Pe{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new Pe(this.type,t)}is(e){return this.type==e}static define(e={}){return new Vd(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let r of e){let n=r.map(t);n&&i.push(n)}return i}}Pe.reconfigure=Pe.define();Pe.appendConfig=Pe.define();class Be{constructor(e,t,i,r,n,o){this.startState=e,this.changes=t,this.selection=i,this.effects=r,this.annotations=n,this.scrollIntoView=o,this._doc=null,this._state=null,i&&_u(i,t.newLength),n.some(l=>l.type==Be.time)||(this.annotations=n.concat(Be.time.of(Date.now())))}static create(e,t,i,r,n,o){return new Be(e,t,i,r,n,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Be.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Be.time=Pi.define();Be.userEvent=Pi.define();Be.addToHistory=Pi.define();Be.remote=Pi.define();function Ud(s,e){let t=[];for(let i=0,r=0;;){let n,o;if(i<s.length&&(r==e.length||e[r]>=s[i]))n=s[i++],o=s[i++];else if(r<e.length)n=e[r++],o=e[r++];else return t;!t.length||t[t.length-1]<n?t.push(n,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function Wu(s,e,t){var i;let r,n,o;return t?(r=e.changes,n=Ee.empty(e.changes.length),o=s.changes.compose(e.changes)):(r=e.changes.map(s.changes),n=s.changes.mapDesc(e.changes,!0),o=s.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(n):(i=s.selection)===null||i===void 0?void 0:i.map(r),effects:Pe.mapEffects(s.effects,r).concat(Pe.mapEffects(e.effects,n)),annotations:s.annotations.length?s.annotations.concat(e.annotations):e.annotations,scrollIntoView:s.scrollIntoView||e.scrollIntoView}}function Gn(s,e,t){let i=e.selection,r=gi(e.annotations);return e.userEvent&&(r=r.concat(Be.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ee?e.changes:Ee.of(e.changes||[],t,s.facet(Bu)),selection:i&&(i instanceof L?i:L.single(i.anchor,i.head)),effects:gi(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function $u(s,e,t){let i=Gn(s,e.length?e[0]:{},s.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let n=1;n<e.length;n++){e[n].filter===!1&&(t=!1);let o=!!e[n].sequential;i=Wu(i,Gn(s,e[n],o?i.changes.newLength:s.doc.length),o)}let r=Be.create(s,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return Hd(t?jd(r):r)}function jd(s){let e=s.startState,t=!0;for(let r of e.facet(Nu)){let n=r(s);if(n===!1){t=!1;break}Array.isArray(n)&&(t=t===!0?n:Ud(t,n))}if(t!==!0){let r,n;if(t===!1)n=s.changes.invertedDesc,r=Ee.empty(e.doc.length);else{let o=s.changes.filter(t);r=o.changes,n=o.filtered.mapDesc(o.changes).invertedDesc}s=Be.create(e,r,s.selection&&s.selection.map(n),Pe.mapEffects(s.effects,n),s.annotations,s.scrollIntoView)}let i=e.facet(Fu);for(let r=i.length-1;r>=0;r--){let n=i[r](s);n instanceof Be?s=n:Array.isArray(n)&&n.length==1&&n[0]instanceof Be?s=n[0]:s=$u(e,gi(n),!1)}return s}function Hd(s){let e=s.startState,t=e.facet(qu),i=s;for(let r=t.length-1;r>=0;r--){let n=t[r](s);n&&Object.keys(n).length&&(i=Wu(i,Gn(e,n,s.changes.newLength),!0))}return i==s?s:Be.create(e,s.changes,s.selection,i.effects,i.annotations,i.scrollIntoView)}const Yd=[];function gi(s){return s==null?Yd:Array.isArray(s)?s:[s]}var Pt=(function(s){return s[s.Word=0]="Word",s[s.Space=1]="Space",s[s.Other=2]="Other",s})(Pt||(Pt={}));const Xd=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Kn;try{Kn=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Gd(s){if(Kn)return Kn.test(s);for(let e=0;e<s.length;e++){let t=s[e];if(/\w/.test(t)||t>"Â"&&(t.toUpperCase()!=t.toLowerCase()||Xd.test(t)))return!0}return!1}function Kd(s){return e=>{if(!/\S/.test(e))return Pt.Space;if(Gd(e))return Pt.Word;for(let t=0;t<s.length;t++)if(e.indexOf(s[t])>-1)return Pt.Word;return Pt.Other}}class he{constructor(e,t,i,r,n,o){this.config=e,this.doc=t,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=n,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)zi(this,l<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return zi(this,i),as(this,i)}update(...e){return $u(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:r}=t;for(let l of e.effects)l.is(Rs.reconfigure)?(t&&(r=new Map,t.compartments.forEach((a,u)=>r.set(u,a)),t=null),r.set(l.value.compartment,l.value.extension)):l.is(Pe.reconfigure)?(t=null,i=l.value):l.is(Pe.appendConfig)&&(t=null,i=gi(i).concat(l.value));let n;t?n=e.startState.values.slice():(t=ls.resolve(i,r,this),n=new he(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(a,u)=>u.reconfigure(a,this),null).values);let o=e.startState.facet(Xn)?e.newSelection:e.newSelection.asSingle();new he(t,e.newDoc,o,n,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:L.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),r=this.changes(i.changes),n=[i.range],o=gi(i.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),u=this.changes(a.changes),h=u.map(r);for(let c=0;c<l;c++)n[c]=n[c].map(h);let f=r.mapDesc(u,!0);n.push(a.range.map(f)),r=r.compose(h),o=Pe.mapEffects(o,h).concat(Pe.mapEffects(gi(a.effects),f))}return{changes:r,selection:L.create(n,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Ee?e:Ee.of(e,this.doc.length,this.facet(he.lineSeparator))}toText(e){return se.of(e.split(this.facet(he.lineSeparator)||Vn))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(zi(this,t),as(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof hi&&this.config.address[r.id]!=null&&(t[i]=r.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let n in i)if(Object.prototype.hasOwnProperty.call(e,n)){let o=i[n],l=e[n];r.push(o.init(a=>o.spec.fromJSON(l,a)))}}return he.create({doc:e.doc,selection:L.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=ls.resolve(e.extensions||[],new Map),i=e.doc instanceof se?e.doc:se.of((e.doc||"").split(t.staticFacet(he.lineSeparator)||Vn)),r=e.selection?e.selection instanceof L?e.selection:L.single(e.selection.anchor,e.selection.head):L.single(0);return _u(r,i.length),t.staticFacet(Xn)||(r=r.asSingle()),new he(t,i,r,t.dynamicSlots.map(()=>null),(n,o)=>o.create(n),null)}get tabSize(){return this.facet(he.tabSize)}get lineBreak(){return this.facet(he.lineSeparator)||`
`}get readOnly(){return this.facet(zu)}phrase(e,...t){for(let i of this.facet(he.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let n=+(r||1);return!n||n>t.length?i:t[n-1]})),e}languageDataAt(e,t,i=-1){let r=[];for(let n of this.facet(Lu))for(let o of n(this,t,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return Kd(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:r}=this.doc.lineAt(e),n=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=$e(t,o,!1);if(n(t.slice(a,o))!=Pt.Word)break;o=a}for(;l<r;){let a=$e(t,l);if(n(t.slice(l,a))!=Pt.Word)break;l=a}return o==l?null:L.range(o+i,l+i)}}he.allowMultipleSelections=Xn;he.tabSize=j.define({combine:s=>s.length?s[0]:4});he.lineSeparator=Bu;he.readOnly=zu;he.phrases=j.define({compare(s,e){let t=Object.keys(s),i=Object.keys(e);return t.length==i.length&&t.every(r=>s[r]==e[r])}});he.languageData=Lu;he.changeFilter=Nu;he.transactionFilter=Fu;he.transactionExtender=qu;Rs.reconfigure=Pe.define();function Zd(s,e,t={}){let i={};for(let r of s)for(let n of Object.keys(r)){let o=r[n],l=i[n];if(l===void 0)i[n]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,n))i[n]=t[n](l,o);else throw new Error("Config merge conflict for field "+n)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class bi{eq(e){return this==e}range(e,t=e){return Zn.create(e,t,this)}}bi.prototype.startSide=bi.prototype.endSide=0;bi.prototype.point=!1;bi.prototype.mapMode=Ke.TrackDel;let Zn=class Vu{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new Vu(e,t,i)}};function Jn(s,e){return s.from-e.from||s.value.startSide-e.value.startSide}class jo{constructor(e,t,i,r){this.from=e,this.to=t,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,r=0){let n=i?this.to:this.from;for(let o=r,l=n.length;;){if(o==l)return o;let a=o+l>>1,u=n[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-t;if(a==o)return u>=0?o:l;u>=0?l=a:o=a+1}}between(e,t,i,r){for(let n=this.findIndex(t,-1e9,!0),o=this.findIndex(i,1e9,!1,n);n<o;n++)if(r(this.from[n]+e,this.to[n]+e,this.value[n])===!1)return!1}map(e,t){let i=[],r=[],n=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let u=this.value[a],h=this.from[a]+e,f=this.to[a]+e,c,d;if(h==f){let g=t.mapPos(h,u.startSide,u.mapMode);if(g==null||(c=d=g,u.startSide!=u.endSide&&(d=t.mapPos(h,u.endSide),d<c)))continue}else if(c=t.mapPos(h,u.startSide),d=t.mapPos(f,u.endSide),c>d||c==d&&u.startSide>0&&u.endSide<=0)continue;(d-c||u.endSide-u.startSide)<0||(o<0&&(o=c),u.point&&(l=Math.max(l,d-c)),i.push(u),r.push(c-o),n.push(d-o))}return{mapped:i.length?new jo(r,n,i,l):null,pos:o}}}class ue{constructor(e,t,i,r){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=r}static create(e,t,i,r){return new ue(e,t,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:r=0,filterTo:n=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(i&&(t=t.slice().sort(Jn)),this.isEmpty)return t.length?ue.of(t):this;let l=new Uu(this,null,-1).goto(0),a=0,u=[],h=new Hi;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let f=t[a++];h.addInner(f.from,f.to,f.value)||u.push(f)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!o||r>this.chunkEnd(l.chunkIndex)||n<this.chunkPos[l.chunkIndex])&&h.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||r>l.to||n<l.from||o(l.from,l.to,l.value))&&(h.addInner(l.from,l.to,l.value)||u.push(Zn.create(l.from,l.to,l.value))),l.next());return h.finishInner(this.nextLayer.isEmpty&&!u.length?ue.empty:this.nextLayer.update({add:u,filter:o,filterFrom:r,filterTo:n}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],u=e.touchesRange(l,l+a.length);if(u===!1)r=Math.max(r,a.maxPoint),t.push(a),i.push(e.mapPos(l));else if(u===!0){let{mapped:h,pos:f}=a.map(l,e);h&&(r=Math.max(r,h.maxPoint),t.push(h),i.push(f))}}let n=this.nextLayer.map(e);return t.length==0?n:new ue(i,t,n||ue.empty,r)}between(e,t,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let n=this.chunkPos[r],o=this.chunk[r];if(t>=n&&e<=n+o.length&&o.between(n,e-n,t-n,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return Yi.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Yi.from(e).goto(t)}static compare(e,t,i,r,n=-1){let o=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=n),l=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=n),a=Ea(o,l,i),u=new Ri(o,a,n),h=new Ri(l,a,n);i.iterGaps((f,c,d)=>Ma(u,f,h,c,d,r)),i.empty&&i.length==0&&Ma(u,0,h,0,0,r)}static eq(e,t,i=0,r){r==null&&(r=999999999);let n=e.filter(h=>!h.isEmpty&&t.indexOf(h)<0),o=t.filter(h=>!h.isEmpty&&e.indexOf(h)<0);if(n.length!=o.length)return!1;if(!n.length)return!0;let l=Ea(n,o),a=new Ri(n,l,0).goto(i),u=new Ri(o,l,0).goto(i);for(;;){if(a.to!=u.to||!eo(a.active,u.active)||a.point&&(!u.point||!a.point.eq(u.point)))return!1;if(a.to>r)return!0;a.next(),u.next()}}static spans(e,t,i,r,n=-1){let o=new Ri(e,null,n).goto(t),l=t,a=o.openStart;for(;;){let u=Math.min(o.to,i);if(o.point){let h=o.activeForPoint(o.to),f=o.pointFrom<t?h.length+1:o.point.startSide<0?h.length:Math.min(h.length,a);r.point(l,u,o.point,h,f,o.pointRank),a=Math.min(o.openEnd(u),h.length)}else u>l&&(r.span(l,u,o.active,a),a=o.openEnd(u));if(o.to>i)return a+(o.point&&o.to>i?1:0);l=o.to,o.next()}}static of(e,t=!1){let i=new Hi;for(let r of e instanceof Zn?[e]:t?Jd(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return ue.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=ue.empty;r=r.nextLayer)t=new ue(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}}ue.empty=new ue([],[],null,-1);function Jd(s){if(s.length>1)for(let e=s[0],t=1;t<s.length;t++){let i=s[t];if(Jn(e,i)>0)return s.slice().sort(Jn);e=i}return s}ue.empty.nextLayer=ue.empty;class Hi{finishChunk(e){this.chunks.push(new jo(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new Hi)).add(e,t,i)}addInner(e,t,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(ue.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=ue.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Ea(s,e,t){let i=new Map;for(let n of s)for(let o=0;o<n.chunk.length;o++)n.chunk[o].maxPoint<=0&&i.set(n.chunk[o],n.chunkPos[o]);let r=new Set;for(let n of e)for(let o=0;o<n.chunk.length;o++){let l=i.get(n.chunk[o]);l!=null&&(t?t.mapPos(l):l)==n.chunkPos[o]&&!t?.touchesRange(l,l+n.chunk[o].length)&&r.add(n.chunk[o])}return r}class Uu{constructor(e,t,i,r=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Yi{constructor(e){this.heap=e}static from(e,t=null,i=-1){let r=[];for(let n=0;n<e.length;n++)for(let o=e[n];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new Uu(o,t,i,n));return r.length==1?r[0]:new Yi(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)Sn(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)Sn(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Sn(this.heap,0)}}}function Sn(s,e){for(let t=s[e];;){let i=(e<<1)+1;if(i>=s.length)break;let r=s[i];if(i+1<s.length&&r.compare(s[i+1])>=0&&(r=s[i+1],i++),t.compare(r)<0)break;s[i]=t,s[e]=r,e=i}}class Ri{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Yi.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){_r(this.active,e),_r(this.activeTo,e),_r(this.activeRank,e),this.minActive=Ra(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:r,rank:n}=this.cursor;for(;t<this.activeRank.length&&(n-this.activeRank[t]||r-this.activeTo[t])>0;)t++;Ir(this.active,t,i),Ir(this.activeTo,t,r),Ir(this.activeRank,t,n),e&&Ir(e,t,this.cursor.from),this.minActive=Ra(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&_r(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let n=this.cursor.value;if(!n.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=n,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=n.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function Ma(s,e,t,i,r,n){s.goto(e),t.goto(i);let o=i+r,l=i,a=i-e;for(;;){let u=s.to+a-t.to,h=u||s.endSide-t.endSide,f=h<0?s.to+a:t.to,c=Math.min(f,o);if(s.point||t.point?s.point&&t.point&&(s.point==t.point||s.point.eq(t.point))&&eo(s.activeForPoint(s.to),t.activeForPoint(t.to))||n.comparePoint(l,c,s.point,t.point):c>l&&!eo(s.active,t.active)&&n.compareRange(l,c,s.active,t.active),f>o)break;(u||s.openEnd!=t.openEnd)&&n.boundChange&&n.boundChange(f),l=f,h<=0&&s.next(),h>=0&&t.next()}}function eo(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++)if(s[t]!=e[t]&&!s[t].eq(e[t]))return!1;return!0}function _r(s,e){for(let t=e,i=s.length-1;t<i;t++)s[t]=s[t+1];s.pop()}function Ir(s,e,t){for(let i=s.length-1;i>=e;i--)s[i+1]=s[i];s[e]=t}function Ra(s,e){let t=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||s[r].endSide-s[t].endSide)<0&&(t=r,i=e[r]);return t}function Ds(s,e,t=s.length){let i=0;for(let r=0;r<t&&r<s.length;)s.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=$e(s,r));return i}function ep(s,e,t,i){for(let r=0,n=0;;){if(n>=e)return r;if(r==s.length)break;n+=s.charCodeAt(r)==9?t-n%t:1,r=$e(s,r)}return s.length}const to="Í¼",Da=typeof Symbol>"u"?"__"+to:Symbol.for(to),io=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Qa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Wt{constructor(e,t){this.rules=[];let{finish:i}=t||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function n(o,l,a,u){let h=[],f=/^@(\w+)\b/.exec(o[0]),c=f&&f[1]=="keyframes";if(f&&l==null)return a.push(o[0]+";");for(let d in l){let g=l[d];if(/&/.test(d))n(d.split(/,\s*/).map(p=>o.map(m=>p.replace(/&/,m))).reduce((p,m)=>p.concat(m)),g,a);else if(g&&typeof g=="object"){if(!f)throw new RangeError("The value of a property ("+d+") should be a primitive value.");n(r(d),g,h,c)}else g!=null&&h.push(d.replace(/_.*/,"").replace(/[A-Z]/g,p=>"-"+p.toLowerCase())+": "+g+";")}(h.length||c)&&a.push((i&&!f&&!u?o.map(i):o).join(", ")+" {"+h.join(" ")+"}")}for(let o in e)n(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Qa[Da]||1;return Qa[Da]=e+1,to+e.toString(36)}static mount(e,t,i){let r=e[io],n=i&&i.nonce;r?n&&r.setNonce(n):r=new tp(e,n),r.mount(Array.isArray(t)?t:[t],e)}}let _a=new Map;class tp{constructor(e,t){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let n=_a.get(i);if(n)return e[io]=n;this.sheet=new r.CSSStyleSheet,_a.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[io]=this}mount(e,t){let i=this.sheet,r=0,n=0;for(let o=0;o<e.length;o++){let l=e[o],a=this.modules.indexOf(l);if(a<n&&a>-1&&(this.modules.splice(a,1),n--,a=-1),a==-1){if(this.modules.splice(n++,0,l),i)for(let u=0;u<l.rules.length;u++)i.insertRule(l.rules[u],r++)}else{for(;n<a;)r+=this.modules[n++].rules.length;r+=l.rules.length,n++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o;let l=t.head||t;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var $t={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Xi={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ip=typeof navigator<"u"&&/Mac/.test(navigator.platform),rp=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Re=0;Re<10;Re++)$t[48+Re]=$t[96+Re]=String(Re);for(var Re=1;Re<=24;Re++)$t[Re+111]="F"+Re;for(var Re=65;Re<=90;Re++)$t[Re]=String.fromCharCode(Re+32),Xi[Re]=String.fromCharCode(Re);for(var xn in $t)Xi.hasOwnProperty(xn)||(Xi[xn]=$t[xn]);function sp(s){var e=ip&&s.metaKey&&s.shiftKey&&!s.ctrlKey&&!s.altKey||rp&&s.shiftKey&&s.key&&s.key.length==1||s.key=="Unidentified",t=!e&&s.key||(s.shiftKey?Xi:$t)[s.keyCode]||s.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}let ze=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},ro=typeof document<"u"?document:{documentElement:{style:{}}};const so=/Edge\/(\d+)/.exec(ze.userAgent),ju=/MSIE \d/.test(ze.userAgent),no=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ze.userAgent),Qs=!!(ju||no||so),Ia=!Qs&&/gecko\/(\d+)/i.test(ze.userAgent),kn=!Qs&&/Chrome\/(\d+)/.exec(ze.userAgent),np="webkitFontSmoothing"in ro.documentElement.style,oo=!Qs&&/Apple Computer/.test(ze.vendor),La=oo&&(/Mobile\/\w+/.test(ze.userAgent)||ze.maxTouchPoints>2);var q={mac:La||/Mac/.test(ze.platform),windows:/Win/.test(ze.platform),linux:/Linux|X11/.test(ze.platform),ie:Qs,ie_version:ju?ro.documentMode||6:no?+no[1]:so?+so[1]:0,gecko:Ia,gecko_version:Ia?+(/Firefox\/(\d+)/.exec(ze.userAgent)||[0,0])[1]:0,chrome:!!kn,chrome_version:kn?+kn[1]:0,ios:La,android:/Android\b/.test(ze.userAgent),webkit_version:np?+(/\bAppleWebKit\/(\d+)/.exec(ze.userAgent)||[0,0])[1]:0,safari:oo,safari_version:oo?+(/\bVersion\/(\d+(\.\d+)?)/.exec(ze.userAgent)||[0,0])[1]:0,tabSize:ro.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function Gi(s){let e;return s.nodeType==11?e=s.getSelection?s:s.ownerDocument:e=s,e.getSelection()}function lo(s,e){return e?s==e||s.contains(e.nodeType!=1?e.parentNode:e):!1}function Zr(s,e){if(!e.anchorNode)return!1;try{return lo(s,e.anchorNode)}catch{return!1}}function Ki(s){return s.nodeType==3?ii(s,0,s.nodeValue.length).getClientRects():s.nodeType==1?s.getClientRects():[]}function Wi(s,e,t,i){return t?Ba(s,e,t,i,-1)||Ba(s,e,t,i,1):!1}function ti(s){for(var e=0;;e++)if(s=s.previousSibling,!s)return e}function hs(s){return s.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(s.nodeName)}function Ba(s,e,t,i,r){for(;;){if(s==t&&e==i)return!0;if(e==(r<0?0:St(s))){if(s.nodeName=="DIV")return!1;let n=s.parentNode;if(!n||n.nodeType!=1)return!1;e=ti(s)+(r<0?0:1),s=n}else if(s.nodeType==1){if(s=s.childNodes[e+(r<0?-1:0)],s.nodeType==1&&s.contentEditable=="false")return!1;e=r<0?St(s):0}else return!1}}function St(s){return s.nodeType==3?s.nodeValue.length:s.childNodes.length}function _s(s,e){let t=e?s.left:s.right;return{left:t,right:t,top:s.top,bottom:s.bottom}}function op(s){let e=s.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:s.innerWidth,top:0,bottom:s.innerHeight}}function Hu(s,e){let t=e.width/s.offsetWidth,i=e.height/s.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-s.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-s.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function lp(s,e,t,i,r,n,o,l){let a=s.ownerDocument,u=a.defaultView||window;for(let h=s,f=!1;h&&!f;)if(h.nodeType==1){let c,d=h==a.body,g=1,p=1;if(d)c=op(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(h).position)&&(f=!0),h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let O=h.getBoundingClientRect();({scaleX:g,scaleY:p}=Hu(h,O)),c={left:O.left,right:O.left+h.clientWidth*g,top:O.top,bottom:O.top+h.clientHeight*p}}let m=0,y=0;if(r=="nearest")e.top<c.top?(y=e.top-(c.top+o),t>0&&e.bottom>c.bottom+y&&(y=e.bottom-c.bottom+o)):e.bottom>c.bottom&&(y=e.bottom-c.bottom+o,t<0&&e.top-y<c.top&&(y=e.top-(c.top+o)));else{let O=e.bottom-e.top,w=c.bottom-c.top;y=(r=="center"&&O<=w?e.top+O/2-w/2:r=="start"||r=="center"&&t<0?e.top-o:e.bottom-w+o)-c.top}if(i=="nearest"?e.left<c.left?(m=e.left-(c.left+n),t>0&&e.right>c.right+m&&(m=e.right-c.right+n)):e.right>c.right&&(m=e.right-c.right+n,t<0&&e.left<c.left+m&&(m=e.left-(c.left+n))):m=(i=="center"?e.left+(e.right-e.left)/2-(c.right-c.left)/2:i=="start"==l?e.left-n:e.right-(c.right-c.left)+n)-c.left,m||y)if(d)u.scrollBy(m,y);else{let O=0,w=0;if(y){let b=h.scrollTop;h.scrollTop+=y/p,w=(h.scrollTop-b)*p}if(m){let b=h.scrollLeft;h.scrollLeft+=m/g,O=(h.scrollLeft-b)*g}e={left:e.left-O,top:e.top-w,right:e.right-O,bottom:e.bottom-w},O&&Math.abs(O-m)<1&&(i="nearest"),w&&Math.abs(w-y)<1&&(r="nearest")}if(d)break;(e.top<c.top||e.bottom>c.bottom||e.left<c.left||e.right>c.right)&&(e={left:Math.max(e.left,c.left),right:Math.min(e.right,c.right),top:Math.max(e.top,c.top),bottom:Math.min(e.bottom,c.bottom)}),h=h.assignedSlot||h.parentNode}else if(h.nodeType==11)h=h.host;else break}function ap(s){let e=s.ownerDocument,t,i;for(let r=s.parentNode;r&&!(r==e.body||t&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!t&&r.scrollWidth>r.clientWidth&&(t=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:t,y:i}}class hp{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?St(t):0),i,Math.min(e.focusOffset,i?St(i):0))}set(e,t,i,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=r}}let Gt=null;q.safari&&q.safari_version>=26&&(Gt=!1);function Yu(s){if(s.setActive)return s.setActive();if(Gt)return s.focus(Gt);let e=[];for(let t=s;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(s.focus(Gt==null?{get preventScroll(){return Gt={preventScroll:!0},!0}}:void 0),!Gt){Gt=!1;for(let t=0;t<e.length;){let i=e[t++],r=e[t++],n=e[t++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=n&&(i.scrollLeft=n)}}}let Na;function ii(s,e,t=e){let i=Na||(Na=document.createRange());return i.setEnd(s,t),i.setStart(s,e),i}function mi(s,e,t,i){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let n=new KeyboardEvent("keydown",r);n.synthetic=!0,s.dispatchEvent(n);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,s.dispatchEvent(o),n.defaultPrevented||o.defaultPrevented}function up(s){for(;s;){if(s&&(s.nodeType==9||s.nodeType==11&&s.host))return s;s=s.assignedSlot||s.parentNode}return null}function Xu(s){for(;s.attributes.length;)s.removeAttributeNode(s.attributes[0])}function fp(s,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,St(t));;)if(i){if(t.nodeType!=1)return!1;let r=t.childNodes[i-1];r.contentEditable=="false"?i--:(t=r,i=St(t))}else{if(t==s)return!0;i=ti(t),t=t.parentNode}}function Gu(s){return s.scrollTop>Math.max(1,s.scrollHeight-s.clientHeight-4)}function Ku(s,e){for(let t=s,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=St(t)}else if(t.parentNode&&!hs(t))i=ti(t),t=t.parentNode;else return null}}function Zu(s,e){for(let t=s,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!hs(t))i=ti(t)+1,t=t.parentNode;else return null}}class Le{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new Le(e.parentNode,ti(e),t)}static after(e,t){return new Le(e.parentNode,ti(e)+1,t)}}const Ho=[];class fe{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,r=null,n;for(let o of this.children){if(o.flags&7){if(!o.dom&&(n=r?r.nextSibling:i.firstChild)){let l=fe.get(n);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(n)}o.sync(e,t),o.flags&=-8}if(n=r?r.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&n!=o.dom&&(t.written=!0),o.dom.parentNode==i)for(;n&&n!=o.dom;)n=Fa(n);else i.insertBefore(o.dom,n);r=o.dom}for(n=r?r.nextSibling:i.firstChild,n&&t&&t.node==i&&(t.written=!0);n;)n=Fa(n)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let r=St(e)==0?0:t==0?-1:1;for(;;){let n=e.parentNode;if(n==this.dom)break;r==0&&n.firstChild!=n.lastChild&&(e==n.firstChild?r=-1:r=1),e=n}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!fe.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,n=0;;r++){let o=this.children[r];if(o.dom==i)return n;n+=o.length+o.breakAfter}}domBoundsAround(e,t,i=0){let r=-1,n=-1,o=-1,l=-1;for(let a=0,u=i,h=i;a<this.children.length;a++){let f=this.children[a],c=u+f.length;if(u<e&&c>t)return f.domBoundsAround(e,t,u);if(c>=e&&r==-1&&(r=a,n=u),u>t&&f.dom.parentNode==this.dom){o=a,l=h;break}h=c,u=c+f.breakAfter}return{from:n,to:l<0?i+this.length:l,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=Ho){this.markDirty();for(let r=e;r<t;r++){let n=this.children[r];n.parent==this&&i.indexOf(n)<0&&n.destroy()}i.length<250?this.children.splice(e,t-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(t));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Ju(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,r,n,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}fe.prototype.breakAfter=0;function Fa(s){let e=s.nextSibling;return s.parentNode.removeChild(s),e}class Ju{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function ef(s,e,t,i,r,n,o,l,a){let{children:u}=s,h=u.length?u[e]:null,f=n.length?n[n.length-1]:null,c=f?f.breakAfter:o;if(!(e==i&&h&&!o&&!c&&n.length<2&&h.merge(t,r,n.length?f:null,t==0,l,a))){if(i<u.length){let d=u[i];d&&(r<d.length||d.breakAfter&&f?.breakAfter)?(e==i&&(d=d.split(r),r=0),!c&&f&&d.merge(0,r,f,!0,0,a)?n[n.length-1]=d:((r||d.children.length&&!d.children[0].length)&&d.merge(0,r,null,!1,0,a),n.push(d))):d?.breakAfter&&(f?f.breakAfter=1:o=1),i++}for(h&&(h.breakAfter=o,t>0&&(!o&&n.length&&h.merge(t,h.length,n[0],!1,l,0)?h.breakAfter=n.shift().breakAfter:(t<h.length||h.children.length&&h.children[h.children.length-1].length==0)&&h.merge(t,h.length,null,!1,l,0),e++));e<i&&n.length;)if(u[i-1].become(n[n.length-1]))i--,n.pop(),a=n.length?0:l;else if(u[e].become(n[0]))e++,n.shift(),l=n.length?0:a;else break;!n.length&&e&&i<u.length&&!u[e-1].breakAfter&&u[i].merge(0,0,u[e-1],!1,l,a)&&e--,(e<i||n.length)&&s.replaceChildren(e,i,n)}}function tf(s,e,t,i,r,n){let o=s.childCursor(),{i:l,off:a}=o.findPos(t,1),{i:u,off:h}=o.findPos(e,-1),f=e-t;for(let c of i)f+=c.length;s.length+=f,ef(s,u,h,l,a,i,0,r,n)}const cp=256;class at extends fe{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof at)||this.length-(t-e)+i.length>cp||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new at(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Le(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return dp(this.dom,e,t)}}class Dt extends fe{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let r of t)r.setParent(this)}setAttrs(e){if(Xu(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,r,n,o){return i&&(!(i instanceof Dt&&i.mark.eq(this.mark))||e&&n<=0||t<this.length&&o<=0)?!1:(tf(this,e,t,i?i.children.slice():[],n-1,o-1),this.markDirty(),!0)}split(e){let t=[],i=0,r=-1,n=0;for(let l of this.children){let a=i+l.length;a>e&&t.push(i<e?l.split(e-i):l),r<0&&i>=e&&(r=n),i=a,n++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new Dt(this.mark,t,o)}domAtPos(e){return rf(this,e)}coordsAt(e,t){return nf(this,e,t)}}function dp(s,e,t){let i=s.nodeValue.length;e>i&&(e=i);let r=e,n=e,o=0;e==0&&t<0||e==i&&t>=0?q.chrome||q.gecko||(e?(r--,o=1):n<i&&(n++,o=-1)):t<0?r--:n<i&&n++;let l=ii(s,r,n).getClientRects();if(!l.length)return null;let a=l[(o?o<0:t>=0)?0:l.length-1];return q.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,u=>u.width)||a),o?_s(a,o<0):a||null}class Ft extends fe{static create(e,t,i){return new Ft(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=Ft.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,r,n,o){return i&&(!(i instanceof Ft)||!this.widget.compare(i.widget)||e>0&&n<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof Ft&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return se.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):se.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Le.before(this.dom):Le.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let r=this.dom.getClientRects(),n=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?r.length-1:0;n=r[l],!(e>0?l==0:l==r.length-1||n.top<n.bottom);l+=o?-1:1);return _s(n,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class wi extends fe{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof wi&&e.side==this.side}split(){return new wi(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Le.before(this.dom):Le.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return se.empty}get isHidden(){return!0}}at.prototype.children=Ft.prototype.children=wi.prototype.children=Ho;function rf(s,e){let t=s.dom,{children:i}=s,r=0;for(let n=0;r<i.length;r++){let o=i[r],l=n+o.length;if(!(l==n&&o.getSide()<=0)){if(e>n&&e<l&&o.dom.parentNode==t)return o.domAtPos(e-n);if(e<=n)break;n=l}}for(let n=r;n>0;n--){let o=i[n-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let n=r;n<i.length;n++){let o=i[n];if(o.dom.parentNode==t)return o.domAtPos(0)}return new Le(t,0)}function sf(s,e,t){let i,{children:r}=s;t>0&&e instanceof Dt&&r.length&&(i=r[r.length-1])instanceof Dt&&i.mark.eq(e.mark)?sf(i,e.children[0],t-1):(r.push(e),e.setParent(s)),s.length+=e.length}function nf(s,e,t){let i=null,r=-1,n=null,o=-1;function l(u,h){for(let f=0,c=0;f<u.children.length&&c<=h;f++){let d=u.children[f],g=c+d.length;g>=h&&(d.children.length?l(d,h-c):(!n||n.isHidden&&(t>0||gp(n,d)))&&(g>h||c==g&&d.getSide()>0)?(n=d,o=h-c):(c<h||c==g&&d.getSide()<0&&!d.isHidden)&&(i=d,r=h-c)),c=g}}l(s,e);let a=(t<0?i:n)||i||n;return a?a.coordsAt(Math.max(0,a==i?r:o),t):pp(s)}function pp(s){let e=s.dom.lastChild;if(!e)return s.dom.getBoundingClientRect();let t=Ki(e);return t[t.length-1]||null}function gp(s,e){let t=s.coordsAt(0,1),i=e.coordsAt(0,1);return t&&i&&i.top<t.bottom}function ao(s,e){for(let t in s)t=="class"&&e.class?e.class+=" "+s.class:t=="style"&&e.style?e.style+=";"+s.style:e[t]=s[t];return e}const qa=Object.create(null);function us(s,e,t){if(s==e)return!0;s||(s=qa),e||(e=qa);let i=Object.keys(s),r=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=r.length-(t&&r.indexOf(t)>-1?1:0))return!1;for(let n of i)if(n!=t&&(r.indexOf(n)==-1||s[n]!==e[n]))return!1;return!0}function ho(s,e,t){let i=!1;if(e)for(let r in e)t&&r in t||(i=!0,r=="style"?s.style.cssText="":s.removeAttribute(r));if(t)for(let r in t)e&&e[r]==t[r]||(i=!0,r=="style"?s.style.cssText=t[r]:s.setAttribute(r,t[r]));return i}function mp(s){let e=Object.create(null);for(let t=0;t<s.attributes.length;t++){let i=s.attributes[t];e[i.name]=i.value}return e}class Yo{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Je=(function(s){return s[s.Text=0]="Text",s[s.WidgetBefore=1]="WidgetBefore",s[s.WidgetAfter=2]="WidgetAfter",s[s.WidgetRange=3]="WidgetRange",s})(Je||(Je={}));class Qe extends bi{constructor(e,t,i,r){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new rr(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Vt(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:n,end:o}=of(e,t);i=(n?t?-3e8:-1:5e8)-1,r=(o?t?2e8:1:-6e8)+1}return new Vt(e,i,r,t,e.widget||null,!0)}static line(e){return new sr(e)}static set(e,t=!1){return ue.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Qe.none=ue.empty;class rr extends Qe{constructor(e){let{start:t,end:i}=of(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof rr&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&us(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}rr.prototype.point=!1;class sr extends Qe{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof sr&&this.spec.class==e.spec.class&&us(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}sr.prototype.mapMode=Ke.TrackBefore;sr.prototype.point=!0;class Vt extends Qe{constructor(e,t,i,r,n,o){super(t,i,n,e),this.block=r,this.isReplace=o,this.mapMode=r?t<=0?Ke.TrackBefore:Ke.TrackAfter:Ke.TrackDel}get type(){return this.startSide!=this.endSide?Je.WidgetRange:this.startSide<=0?Je.WidgetBefore:Je.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Vt&&yp(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Vt.prototype.point=!0;function of(s,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=s;return t==null&&(t=s.inclusive),i==null&&(i=s.inclusive),{start:t??e,end:i??e}}function yp(s,e){return s==e||!!(s&&e&&s.compare(e))}function Jr(s,e,t,i=0){let r=t.length-1;r>=0&&t[r]+i>=s?t[r]=Math.max(t[r],e):t.push(s,e)}class ke extends fe{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,r,n,o){if(i){if(!(i instanceof ke))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),tf(this,e,t,i?i.children.slice():[],n,o),!0}split(e){let t=new ke;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:r}=this.childPos(e);r&&(t.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let n=i;n<this.children.length;n++)t.append(this.children[n],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){us(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){sf(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=ao(t,this.attrs||{})),i&&(this.attrs=ao({class:i},this.attrs||{}))}domAtPos(e){return rf(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(Xu(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(ho(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;for(;r&&fe.get(r)instanceof Dt;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=fe.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!q.ios||!this.children.some(n=>n instanceof at))){let n=document.createElement("BR");n.cmIgnore=!0,this.dom.appendChild(n)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof at)||/[^ -~]/.test(i.text))return null;let r=Ki(i.dom);if(r.length!=1)return null;e+=r[0].width,t=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=nf(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,n=i.bottom-i.top;if(Math.abs(n-r.lineHeight)<2&&r.textHeight<n){let o=(n-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof ke&&this.children.length==0&&e.children.length==0&&us(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let i=0,r=0;i<e.children.length;i++){let n=e.children[i],o=r+n.length;if(o>=t){if(n instanceof ke)return n;if(o>t)break}r=o+n.breakAfter}return null}}class Rt extends fe{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,r,n,o){return i&&(!(i instanceof Rt)||!this.widget.compare(i.widget)||e>0&&n<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?Le.before(this.dom):Le.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new Rt(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return Ho}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):se.empty}domBoundsAround(){return null}become(e){return e instanceof Rt&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);return i||(this.widget instanceof uo?null:_s(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}}class uo extends Yo{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class $i{constructor(e,t,i,r){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Rt&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new ke),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Lr(new wi(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Rt)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:l,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(l){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e),n=Math.min(r,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(Lr(new at(this.text.slice(this.textOff,this.textOff+n)),t),i),this.atCursorPos=!0,this.textOff+=n,e-=n,i=r<=n?0:t.length}}span(e,t,i,r){this.buildText(t-e,i,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,i,r,n,o){if(this.disallowBlockEffectsFor[o]&&i instanceof Vt){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(i instanceof Vt)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Rt(i.widget||Si.block,l,i));else{let a=Ft.create(i.widget||Si.inline,l,l?0:i.startSide),u=this.atCursorPos&&!a.isEditable&&n<=r.length&&(e<t||i.startSide>0),h=!a.isEditable&&(e<t||n>r.length||i.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!u&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),u&&(f.append(Lr(new wi(1),r),n),n=r.length+Math.max(0,n-r.length)),f.append(Lr(a,r),n),this.atCursorPos=h,this.pendingBuffer=h?e<t||n>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=n)}static build(e,t,i,r,n){let o=new $i(e,t,i,n);return o.openEnd=ue.spans(r,t,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Lr(s,e){for(let t of e)s=new Dt(t,[s],s.length);return s}class Si extends Yo{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Si.inline=new Si("span");Si.block=new Si("div");var Te=(function(s){return s[s.LTR=0]="LTR",s[s.RTL=1]="RTL",s})(Te||(Te={}));const ri=Te.LTR,Xo=Te.RTL;function lf(s){let e=[];for(let t=0;t<s.length;t++)e.push(1<<+s[t]);return e}const vp=lf("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Op=lf("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),fo=Object.create(null),pt=[];for(let s of["()","[]","{}"]){let e=s.charCodeAt(0),t=s.charCodeAt(1);fo[e]=t,fo[t]=-e}function af(s){return s<=247?vp[s]:1424<=s&&s<=1524?2:1536<=s&&s<=1785?Op[s-1536]:1774<=s&&s<=2220?4:8192<=s&&s<=8204?256:64336<=s&&s<=65023?4:1}const bp=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class qt{get dir(){return this.level%2?Xo:ri}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,r){let n=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==i)return o;(n<0||(r!=0?r<0?l.from<t:l.to>t:e[n].level>l.level))&&(n=o)}}if(n<0)throw new RangeError("Index out of range");return n}}function hf(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++){let i=s[t],r=e[t];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!hf(i.inner,r.inner))return!1}return!0}const ge=[];function wp(s,e,t,i,r){for(let n=0;n<=i.length;n++){let o=n?i[n-1].to:e,l=n<i.length?i[n].from:t,a=n?256:r;for(let u=o,h=a,f=a;u<l;u++){let c=af(s.charCodeAt(u));c==512?c=h:c==8&&f==4&&(c=16),ge[u]=c==4?2:c,c&7&&(f=c),h=c}for(let u=o,h=a,f=a;u<l;u++){let c=ge[u];if(c==128)u<l-1&&h==ge[u+1]&&h&24?c=ge[u]=h:ge[u]=256;else if(c==64){let d=u+1;for(;d<l&&ge[d]==64;)d++;let g=u&&h==8||d<t&&ge[d]==8?f==1?1:8:256;for(let p=u;p<d;p++)ge[p]=g;u=d-1}else c==8&&f==1&&(ge[u]=1);h=c,c&7&&(f=c)}}}function Sp(s,e,t,i,r){let n=r==1?2:1;for(let o=0,l=0,a=0;o<=i.length;o++){let u=o?i[o-1].to:e,h=o<i.length?i[o].from:t;for(let f=u,c,d,g;f<h;f++)if(d=fo[c=s.charCodeAt(f)])if(d<0){for(let p=l-3;p>=0;p-=3)if(pt[p+1]==-d){let m=pt[p+2],y=m&2?r:m&4?m&1?n:r:0;y&&(ge[f]=ge[pt[p]]=y),l=p;break}}else{if(pt.length==189)break;pt[l++]=f,pt[l++]=c,pt[l++]=a}else if((g=ge[f])==2||g==1){let p=g==r;a=p?0:1;for(let m=l-3;m>=0;m-=3){let y=pt[m+2];if(y&2)break;if(p)pt[m+2]|=2;else{if(y&4)break;pt[m+2]|=4}}}}}function xp(s,e,t,i){for(let r=0,n=i;r<=t.length;r++){let o=r?t[r-1].to:s,l=r<t.length?t[r].from:e;for(let a=o;a<l;){let u=ge[a];if(u==256){let h=a+1;for(;;)if(h==l){if(r==t.length)break;h=t[r++].to,l=r<t.length?t[r].from:e}else if(ge[h]==256)h++;else break;let f=n==1,c=(h<e?ge[h]:i)==1,d=f==c?f?1:2:i;for(let g=h,p=r,m=p?t[p-1].to:s;g>a;)g==m&&(g=t[--p].from,m=p?t[p-1].to:s),ge[--g]=d;a=h}else n=u,a++}}}function co(s,e,t,i,r,n,o){let l=i%2?2:1;if(i%2==r%2)for(let a=e,u=0;a<t;){let h=!0,f=!1;if(u==n.length||a<n[u].from){let p=ge[a];p!=l&&(h=!1,f=p==16)}let c=!h&&l==1?[]:null,d=h?i:i+1,g=a;e:for(;;)if(u<n.length&&g==n[u].from){if(f)break e;let p=n[u];if(!h)for(let m=p.to,y=u+1;;){if(m==t)break e;if(y<n.length&&n[y].from==m)m=n[y++].to;else{if(ge[m]==l)break e;break}}if(u++,c)c.push(p);else{p.from>a&&o.push(new qt(a,p.from,d));let m=p.direction==ri!=!(d%2);po(s,m?i+1:i,r,p.inner,p.from,p.to,o),a=p.to}g=p.to}else{if(g==t||(h?ge[g]!=l:ge[g]==l))break;g++}c?co(s,a,g,i+1,r,c,o):a<g&&o.push(new qt(a,g,d)),a=g}else for(let a=t,u=n.length;a>e;){let h=!0,f=!1;if(!u||a>n[u-1].to){let p=ge[a-1];p!=l&&(h=!1,f=p==16)}let c=!h&&l==1?[]:null,d=h?i:i+1,g=a;e:for(;;)if(u&&g==n[u-1].to){if(f)break e;let p=n[--u];if(!h)for(let m=p.from,y=u;;){if(m==e)break e;if(y&&n[y-1].to==m)m=n[--y].from;else{if(ge[m-1]==l)break e;break}}if(c)c.push(p);else{p.to<a&&o.push(new qt(p.to,a,d));let m=p.direction==ri!=!(d%2);po(s,m?i+1:i,r,p.inner,p.from,p.to,o),a=p.from}g=p.from}else{if(g==e||(h?ge[g-1]!=l:ge[g-1]==l))break;g--}c?co(s,g,a,i+1,r,c,o):g<a&&o.push(new qt(g,a,d)),a=g}}function po(s,e,t,i,r,n,o){let l=e%2?2:1;wp(s,r,n,i,l),Sp(s,r,n,i,l),xp(r,n,i,l),co(s,r,n,e,t,i,o)}function kp(s,e,t){if(!s)return[new qt(0,0,e==Xo?1:0)];if(e==ri&&!t.length&&!bp.test(s))return uf(s.length);if(t.length)for(;s.length>ge.length;)ge[ge.length]=256;let i=[],r=e==ri?0:1;return po(s,r,r,t,0,s.length,i),i}function uf(s){return[new qt(0,s,0)]}let ff="";function Cp(s,e,t,i,r){var n;let o=i.head-s.from,l=qt.find(e,o,(n=i.bidiLevel)!==null&&n!==void 0?n:-1,i.assoc),a=e[l],u=a.side(r,t);if(o==u){let c=l+=r?1:-1;if(c<0||c>=e.length)return null;a=e[l=c],o=a.side(!r,t),u=a.side(r,t)}let h=$e(s.text,o,a.forward(r,t));(h<a.from||h>a.to)&&(h=u),ff=s.text.slice(Math.min(o,h),Math.max(o,h));let f=l==(r?e.length-1:0)?null:e[l+(r?1:-1)];return f&&h==u&&f.level+(r?0:1)<a.level?L.cursor(f.side(!r,t)+s.from,f.forward(r,t)?1:-1,f.level):L.cursor(h+s.from,a.forward(r,t)?-1:1,a.level)}function Ap(s,e,t){for(let i=e;i<t;i++){let r=af(s.charCodeAt(i));if(r==1)return ri;if(r==2||r==4)return Xo}return ri}const cf=j.define(),df=j.define(),pf=j.define(),gf=j.define(),go=j.define(),mf=j.define(),yf=j.define(),Go=j.define(),Ko=j.define(),vf=j.define({combine:s=>s.some(e=>e)}),Pp=j.define({combine:s=>s.some(e=>e)}),Of=j.define();class yi{constructor(e,t="nearest",i="nearest",r=5,n=5,o=!1){this.range=e,this.y=t,this.x=i,this.yMargin=r,this.xMargin=n,this.isSnapshot=o}map(e){return e.empty?this:new yi(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new yi(L.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Br=Pe.define({map:(s,e)=>s.map(e)}),bf=Pe.define();function bt(s,e,t){let i=s.facet(gf);i.length?i[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const At=j.define({combine:s=>s.length?s[0]:!0});let Tp=0;const fi=j.define({combine(s){return s.filter((e,t)=>{for(let i=0;i<t;i++)if(s[i].plugin==e.plugin)return!1;return!0})}});class Ut{constructor(e,t,i,r,n){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=n(this),this.extension=this.baseExtensions.concat(fi.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(fi.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:i,eventObservers:r,provide:n,decorations:o}=t||{};return new Ut(Tp++,e,i,r,l=>{let a=[];return o&&a.push(Zi.of(u=>{let h=u.plugin(l);return h?o(h):Qe.none})),n&&a.push(n(l)),a})}static fromClass(e,t){return Ut.define((i,r)=>new e(i,r),t)}}class Cn{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(bt(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){bt(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){bt(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const wf=j.define(),Zo=j.define(),Zi=j.define(),Sf=j.define(),nr=j.define(),xf=j.define();function za(s,e){let t=s.state.facet(xf);if(!t.length)return t;let i=t.map(n=>n instanceof Function?n(s):n),r=[];return ue.spans(i,e.from,e.to,{point(){},span(n,o,l,a){let u=n-e.from,h=o-e.from,f=r;for(let c=l.length-1;c>=0;c--,a--){let d=l[c].spec.bidiIsolate,g;if(d==null&&(d=Ap(e.text,u,h)),a>0&&f.length&&(g=f[f.length-1]).to==u&&g.direction==d)g.to=h,f=g.inner;else{let p={from:u,to:h,direction:d,inner:[]};f.push(p),f=p.inner}}}}),r}const kf=j.define();function Cf(s){let e=0,t=0,i=0,r=0;for(let n of s.state.facet(kf)){let o=n(s);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:t,top:i,bottom:r}}const Li=j.define();class et{constructor(e,t,i,r){this.fromA=e,this.toA=t,this.fromB=i,this.toB=r}join(e){return new et(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let r=0,n=0,o=0,l=0;;r++){let a=r==e.length?null:e[r],u=o-l,h=a?a.fromB:1e9;for(;n<t.length&&t[n]<h;){let f=t[n],c=t[n+1],d=Math.max(l,f),g=Math.min(h,c);if(d<=g&&new et(d+u,g+u,d,g).addToSet(i),c>h)break;n+=2}if(!a)return i;new et(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class fs{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Ee.empty(this.startState.doc.length);for(let n of i)this.changes=this.changes.compose(n.changes);let r=[];this.changes.iterChangedRanges((n,o,l,a)=>r.push(new et(n,o,l,a))),this.changedRanges=r}static create(e,t,i){return new fs(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class Wa extends fe{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Qe.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new ke],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new et(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:u,toA:h})=>h<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?r=this.domChanged.newSel.head:!Ip(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let n=r>-1?Mp(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:h}=this.hasComposition;i=new et(u,h,e.changes.mapPos(u,-1),e.changes.mapPos(h,1)).addToSet(i.slice())}this.hasComposition=n?{from:n.range.fromB,to:n.range.toB}:null,(q.ie||q.chrome)&&!n&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),a=Qp(o,l,e.changes);return i=et.extendWithRanges(i,a),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,n),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=q.chrome||q.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let n=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Rt&&o.widget instanceof uo&&n.push(o.dom);r.updateGaps(n)}updateChildren(e,t,i){let r=i?i.range.addToSet(e.slice()):e,n=this.childCursor(t);for(let o=r.length-1;;o--){let l=o>=0?r[o]:null;if(!l)break;let{fromA:a,toA:u,fromB:h,toB:f}=l,c,d,g,p;if(i&&i.range.fromB<f&&i.range.toB>h){let b=$i.build(this.view.state.doc,h,i.range.fromB,this.decorations,this.dynamicDecorationMap),v=$i.build(this.view.state.doc,i.range.toB,f,this.decorations,this.dynamicDecorationMap);d=b.breakAtStart,g=b.openStart,p=v.openEnd;let S=this.compositionView(i);v.breakAtStart?S.breakAfter=1:v.content.length&&S.merge(S.length,S.length,v.content[0],!1,v.openStart,0)&&(S.breakAfter=v.content[0].breakAfter,v.content.shift()),b.content.length&&S.merge(0,0,b.content[b.content.length-1],!0,0,b.openEnd)&&b.content.pop(),c=b.content.concat(S).concat(v.content)}else({content:c,breakAtStart:d,openStart:g,openEnd:p}=$i.build(this.view.state.doc,h,f,this.decorations,this.dynamicDecorationMap));let{i:m,off:y}=n.findPos(u,1),{i:O,off:w}=n.findPos(a,-1);ef(this,O,w,m,y,c,d,g,p)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(bf)&&(this.editContextFormatting=i.value)}compositionView(e){let t=new at(e.text.nodeValue);t.flags|=8;for(let{deco:r}of e.marks)t=new Dt(r,[t],t.length);let i=new ke;return i.append(t,0),i}fixCompositionDOM(e){let t=(n,o)=>{o.flags|=8|(o.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(o);let l=fe.get(n);l&&l!=o&&(l.dom=null),o.setDOM(n)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];t(e.line,r);for(let n=e.marks.length-1;n>=-1;n--)i=r.childPos(i.off,1),r=r.children[i.i],t(n>=0?e.marks[n].node:e.text,r)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,n=!r&&!(this.view.state.facet(At)||this.dom.tabIndex>-1)&&Zr(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||t||n))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),u=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(q.gecko&&l.empty&&!this.hasComposition&&Ep(a)){let f=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(f,a.node.childNodes[a.offset]||null)),a=u=new Le(f,0),o=!0}let h=this.view.observer.selectionRange;(o||!h.focusNode||(!Wi(a.node,a.offset,h.anchorNode,h.anchorOffset)||!Wi(u.node,u.offset,h.focusNode,h.focusOffset))&&!this.suppressWidgetCursorChange(h,l))&&(this.view.observer.ignore(()=>{q.android&&q.chrome&&this.dom.contains(h.focusNode)&&_p(h.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=Gi(this.view.root);if(f)if(l.empty){if(q.gecko){let c=Rp(a.node,a.offset);if(c&&c!=3){let d=(c==1?Ku:Zu)(a.node,a.offset);d&&(a=new Le(d.node,d.offset))}}f.collapse(a.node,a.offset),l.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=l.bidiLevel)}else if(f.extend){f.collapse(a.node,a.offset);try{f.extend(u.node,u.offset)}catch{}}else{let c=document.createRange();l.anchor>l.head&&([a,u]=[u,a]),c.setEnd(u.node,u.offset),c.setStart(a.node,a.offset),f.removeAllRanges(),f.addRange(c)}n&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(a,u)),this.impreciseAnchor=a.precise?null:new Le(h.anchorNode,h.anchorOffset),this.impreciseHead=u.precise?null:new Le(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Wi(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=Gi(e.root),{anchorNode:r,anchorOffset:n}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let o=ke.find(this,t.head);if(!o)return;let l=o.posAtStart;if(t.head==l||t.head==l+o.length)return;let a=this.coordsAt(t.head,-1),u=this.coordsAt(t.head,1);if(!a||!u||a.bottom>u.top)return;let h=this.domAtPos(t.head+t.assoc);i.collapse(h.node,h.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=t.from&&i.collapse(r,n)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let r=e.offset;!i&&r<t.childNodes.length;r++){let n=fe.get(t.childNodes[r]);n instanceof ke&&(i=n.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let n=fe.get(t.childNodes[r]);n instanceof ke&&(i=n.domAtPos(n.length))}return i?new Le(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=fe.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let r=this.children[t];if(i<r.length||r instanceof ke)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,r=0;for(let n=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],a=n-l.breakAfter,u=a-l.length;if(a<e)break;if(u<=e&&(u<e||l.covers(-1))&&(a>e||l.covers(1))&&(!i||l instanceof ke&&!(i instanceof ke&&t>=0)))i=l,r=u;else if(i&&u==e&&a==e&&l instanceof Rt&&Math.abs(t)<2){if(l.deco.startSide<0)break;o&&(i=null)}n=u}return i?i.coordsAt(e-r,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),r=this.children[t];if(!(r instanceof ke))return null;for(;r.children.length;){let{i:l,off:a}=r.childPos(i,1);for(;;l++){if(l==r.children.length)return null;if((r=r.children[l]).length)break}i=a}if(!(r instanceof at))return null;let n=$e(r.text,i);if(n==i)return null;let o=ii(r.dom,i,n).getClientRects();for(let l=0;l<o.length;l++){let a=o[l];if(l==o.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:r}=e,n=this.view.contentDOM.clientWidth,o=n>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==Te.LTR;for(let u=0,h=0;h<this.children.length;h++){let f=this.children[h],c=u+f.length;if(c>r)break;if(u>=i){let d=f.dom.getBoundingClientRect();if(t.push(d.height),o){let g=f.dom.lastChild,p=g?Ki(g):[];if(p.length){let m=p[p.length-1],y=a?m.right-d.left:d.right-m.left;y>l&&(l=y,this.minWidth=n,this.minWidthFrom=u,this.minWidthTo=c)}}}u=c+f.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Te.RTL:Te.LTR}measureTextSize(){for(let n of this.children)if(n instanceof ke){let o=n.measureTextSize();if(o)return o}let e=document.createElement("div"),t,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let n=Ki(e.firstChild)[0];t=e.getBoundingClientRect().height,i=n?n.width/27:7,r=n?n.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:r}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Ju(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,r=0;;r++){let n=r==t.viewports.length?null:t.viewports[r],o=n?n.from-1:this.length;if(o>i){let l=(t.lineBlockAt(o).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(Qe.replace({widget:new uo(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!n)break;i=n.to+1}return Qe.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Zi).map(n=>(this.dynamicDecorationMap[e++]=typeof n=="function")?n(this.view):n),i=!1,r=this.view.state.facet(Sf).map((n,o)=>{let l=typeof n=="function";return l&&(i=!0),l?n(this.view):n});for(r.length&&(this.dynamicDecorationMap[e++]=i,t.push(ue.join(r))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(Of))try{if(u(this.view,e.range,e))return!0}catch(h){bt(this.view.state,h,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!i)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let n=Cf(this.view),o={left:i.left-n.left,top:i.top-n.top,right:i.right+n.right,bottom:i.bottom+n.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;lp(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==Te.LTR)}lineHasWidget(e){let{i:t}=this.childCursor().findPos(e);if(t==this.children.length)return!1;let i=r=>r instanceof Ft||r.children.some(i);return i(this.children[t])}}function Ep(s){return s.node.nodeType==1&&s.node.firstChild&&(s.offset==0||s.node.childNodes[s.offset-1].contentEditable=="false")&&(s.offset==s.node.childNodes.length||s.node.childNodes[s.offset].contentEditable=="false")}function Af(s,e){let t=s.observer.selectionRange;if(!t.focusNode)return null;let i=Ku(t.focusNode,t.focusOffset),r=Zu(t.focusNode,t.focusOffset),n=i||r;if(r&&i&&r.node!=i.node){let l=fe.get(r.node);if(!l||l instanceof at&&l.text!=r.node.nodeValue)n=r;else if(s.docView.lastCompositionAfterCursor){let a=fe.get(i.node);!a||a instanceof at&&a.text!=i.node.nodeValue||(n=r)}}if(s.docView.lastCompositionAfterCursor=n!=i,!n)return null;let o=e-n.offset;return{from:o,to:o+n.node.nodeValue.length,node:n.node}}function Mp(s,e,t){let i=Af(s,t);if(!i)return null;let{node:r,from:n,to:o}=i,l=r.nodeValue;if(/[\n\r]/.test(l)||s.state.doc.sliceString(i.from,i.to)!=l)return null;let a=e.invertedDesc,u=new et(a.mapPos(n),a.mapPos(o),n,o),h=[];for(let f=r.parentNode;;f=f.parentNode){let c=fe.get(f);if(c instanceof Dt)h.push({node:f,deco:c.mark});else{if(c instanceof ke||f.nodeName=="DIV"&&f.parentNode==s.contentDOM)return{range:u,text:r,marks:h,line:f};if(f!=s.contentDOM)h.push({node:f,deco:new rr({inclusive:!0,attributes:mp(f),tagName:f.tagName.toLowerCase()})});else return null}}}function Rp(s,e){return s.nodeType!=1?0:(e&&s.childNodes[e-1].contentEditable=="false"?1:0)|(e<s.childNodes.length&&s.childNodes[e].contentEditable=="false"?2:0)}let Dp=class{constructor(){this.changes=[]}compareRange(e,t){Jr(e,t,this.changes)}comparePoint(e,t){Jr(e,t,this.changes)}boundChange(e){Jr(e,e,this.changes)}};function Qp(s,e,t){let i=new Dp;return ue.compare(s,e,t,i),i.changes}function _p(s,e){for(let t=s;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function Ip(s,e){let t=!1;return e&&s.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(t=!0)}),t}function Lp(s,e,t=1){let i=s.charCategorizer(e),r=s.doc.lineAt(e),n=e-r.from;if(r.length==0)return L.cursor(e);n==0?t=1:n==r.length&&(t=-1);let o=n,l=n;t<0?o=$e(r.text,n,!1):l=$e(r.text,n);let a=i(r.text.slice(o,l));for(;o>0;){let u=$e(r.text,o,!1);if(i(r.text.slice(u,o))!=a)break;o=u}for(;l<r.length;){let u=$e(r.text,l);if(i(r.text.slice(l,u))!=a)break;l=u}return L.range(o+r.from,l+r.from)}function Bp(s,e){return e.left>s?e.left-s:Math.max(0,s-e.right)}function Np(s,e){return e.top>s?e.top-s:Math.max(0,s-e.bottom)}function An(s,e){return s.top<e.bottom-1&&s.bottom>e.top+1}function $a(s,e){return e<s.top?{top:e,left:s.left,right:s.right,bottom:s.bottom}:s}function Va(s,e){return e>s.bottom?{top:s.top,left:s.left,right:s.right,bottom:e}:s}function mo(s,e,t){let i,r,n,o,l=!1,a,u,h,f;for(let g=s.firstChild;g;g=g.nextSibling){let p=Ki(g);for(let m=0;m<p.length;m++){let y=p[m];r&&An(r,y)&&(y=$a(Va(y,r.bottom),r.top));let O=Bp(e,y),w=Np(t,y);if(O==0&&w==0)return g.nodeType==3?Ua(g,e,t):mo(g,e,t);(!i||o>w||o==w&&n>O)&&(i=g,r=y,n=O,o=w,l=O?e<y.left?m>0:m<p.length-1:!0),O==0?t>y.bottom&&(!h||h.bottom<y.bottom)?(a=g,h=y):t<y.top&&(!f||f.top>y.top)&&(u=g,f=y):h&&An(h,y)?h=Va(h,y.bottom):f&&An(f,y)&&(f=$a(f,y.top))}}if(h&&h.bottom>=t?(i=a,r=h):f&&f.top<=t&&(i=u,r=f),!i)return{node:s,offset:0};let c=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return Ua(i,c,t);if(l&&i.contentEditable!="false")return mo(i,c,t);let d=Array.prototype.indexOf.call(s.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:s,offset:d}}function Ua(s,e,t){let i=s.nodeValue.length,r=-1,n=1e9,o=0;for(let l=0;l<i;l++){let a=ii(s,l,l+1).getClientRects();for(let u=0;u<a.length;u++){let h=a[u];if(h.top==h.bottom)continue;o||(o=e-h.left);let f=(h.top>t?h.top-t:t-h.bottom)-1;if(h.left-1<=e&&h.right+1>=e&&f<n){let c=e>=(h.left+h.right)/2,d=c;if(q.chrome||q.gecko){let g=ii(s,l).getBoundingClientRect();Math.abs(g.left-h.right)<.1&&(d=!c)}if(f<=0)return{node:s,offset:l+(d?1:0)};r=l+(d?1:0),n=f}}}return{node:s,offset:r>-1?r:o>0?s.nodeValue.length:0}}function Pf(s,e,t,i=-1){var r,n;let o=s.contentDOM.getBoundingClientRect(),l=o.top+s.viewState.paddingTop,a,{docHeight:u}=s.viewState,{x:h,y:f}=e,c=f-l;if(c<0)return 0;if(c>u)return s.state.doc.length;for(let b=s.viewState.heightOracle.textHeight/2,v=!1;a=s.elementAtHeight(c),a.type!=Je.Text;)for(;c=i>0?a.bottom+b:a.top-b,!(c>=0&&c<=u);){if(v)return t?null:0;v=!0,i=-i}f=l+c;let d=a.from;if(d<s.viewport.from)return s.viewport.from==0?0:t?null:ja(s,o,a,h,f);if(d>s.viewport.to)return s.viewport.to==s.state.doc.length?s.state.doc.length:t?null:ja(s,o,a,h,f);let g=s.dom.ownerDocument,p=s.root.elementFromPoint?s.root:g,m=p.elementFromPoint(h,f);m&&!s.contentDOM.contains(m)&&(m=null),m||(h=Math.max(o.left+1,Math.min(o.right-1,h)),m=p.elementFromPoint(h,f),m&&!s.contentDOM.contains(m)&&(m=null));let y,O=-1;if(m&&((r=s.docView.nearest(m))===null||r===void 0?void 0:r.isEditable)!=!1){if(g.caretPositionFromPoint){let b=g.caretPositionFromPoint(h,f);b&&({offsetNode:y,offset:O}=b)}else if(g.caretRangeFromPoint){let b=g.caretRangeFromPoint(h,f);b&&({startContainer:y,startOffset:O}=b)}y&&(!s.contentDOM.contains(y)||q.safari&&Fp(y,O,h)||q.chrome&&qp(y,O,h))&&(y=void 0),y&&(O=Math.min(St(y),O))}if(!y||!s.docView.dom.contains(y)){let b=ke.find(s.docView,d);if(!b)return c>a.top+a.height/2?a.to:a.from;({node:y,offset:O}=mo(b.dom,h,f))}let w=s.docView.nearest(y);if(!w)return null;if(w.isWidget&&((n=w.dom)===null||n===void 0?void 0:n.nodeType)==1){let b=w.dom.getBoundingClientRect();return e.y<b.top||e.y<=b.bottom&&e.x<=(b.left+b.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(y,O)+w.posAtStart}function ja(s,e,t,i,r){let n=Math.round((i-e.left)*s.defaultCharacterWidth);if(s.lineWrapping&&t.height>s.defaultLineHeight*1.5){let l=s.viewState.heightOracle.textHeight,a=Math.floor((r-t.top-(s.defaultLineHeight-l)*.5)/l);n+=a*s.viewState.heightOracle.lineLength}let o=s.state.sliceDoc(t.from,t.to);return t.from+ep(o,n,s.state.tabSize)}function Tf(s,e,t){let i,r=s;if(s.nodeType!=3||e!=(i=s.nodeValue.length))return!1;for(;;){let n=r.nextSibling;if(n){if(n.nodeName=="BR")break;return!1}else{let o=r.parentNode;if(!o||o.nodeName=="DIV")break;r=o}}return ii(s,i-1,i).getBoundingClientRect().right>t}function Fp(s,e,t){return Tf(s,e,t)}function qp(s,e,t){if(e!=0)return Tf(s,e,t);for(let r=s;;){let n=r.parentNode;if(!n||n.nodeType!=1||n.firstChild!=r)return!1;if(n.classList.contains("cm-line"))break;r=n}let i=s.nodeType==1?s.getBoundingClientRect():ii(s,0,Math.max(s.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function zp(s,e,t){let i=s.lineBlockAt(e);if(Array.isArray(i.type)){let r;for(let n of i.type){if(n.from>e)break;if(!(n.to<e)){if(n.from<e&&n.to>e)return n;(!r||n.type==Je.Text&&(r.type!=n.type||(t<0?n.from<e:n.to>e)))&&(r=n)}}return r||i}return i}function Wp(s,e,t,i){let r=zp(s,e.head,e.assoc||-1),n=!i||r.type!=Je.Text||!(s.lineWrapping||r.widgetLineBreaks)?null:s.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(n){let o=s.dom.getBoundingClientRect(),l=s.textDirectionAt(r.from),a=s.posAtCoords({x:t==(l==Te.LTR)?o.right-1:o.left+1,y:(n.top+n.bottom)/2});if(a!=null)return L.cursor(a,t?-1:1)}return L.cursor(t?r.to:r.from,t?-1:1)}function Ha(s,e,t,i){let r=s.state.doc.lineAt(e.head),n=s.bidiSpans(r),o=s.textDirectionAt(r.from);for(let l=e,a=null;;){let u=Cp(r,n,o,l,t),h=ff;if(!u){if(r.number==(t?s.state.doc.lines:1))return l;h=`
`,r=s.state.doc.line(r.number+(t?1:-1)),n=s.bidiSpans(r),u=s.visualLineSide(r,!t)}if(a){if(!a(h))return l}else{if(!i)return u;a=i(h)}l=u}}function $p(s,e,t){let i=s.state.charCategorizer(e),r=i(t);return n=>{let o=i(n);return r==Pt.Space&&(r=o),r==o}}function Vp(s,e,t,i){let r=e.head,n=t?1:-1;if(r==(t?s.state.doc.length:0))return L.cursor(r,e.assoc);let o=e.goalColumn,l,a=s.contentDOM.getBoundingClientRect(),u=s.coordsAtPos(r,e.assoc||-1),h=s.documentTop;if(u)o==null&&(o=u.left-a.left),l=n<0?u.top:u.bottom;else{let d=s.viewState.lineBlockAt(r);o==null&&(o=Math.min(a.right-a.left,s.defaultCharacterWidth*(r-d.from))),l=(n<0?d.top:d.bottom)+h}let f=a.left+o,c=i??s.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let g=l+(c+d)*n,p=Pf(s,{x:f,y:g},!1,n);if(g<a.top||g>a.bottom||(n<0?p<r:p>r)){let m=s.docView.coordsForChar(p),y=!m||g<m.top?-1:1;return L.cursor(p,y,void 0,o)}}}function Vi(s,e,t){for(;;){let i=0;for(let r of s)r.between(e-1,e+1,(n,o,l)=>{if(e>n&&e<o){let a=i||t||(e-n<o-e?-1:1);e=a<0?n:o,i=a}});if(!i)return e}}function Ef(s,e){let t=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],n=null;if(r.empty){let o=Vi(s,r.from,0);o!=r.from&&(n=L.cursor(o,-1))}else{let o=Vi(s,r.from,-1),l=Vi(s,r.to,1);(o!=r.from||l!=r.to)&&(n=L.range(r.from==r.anchor?o:l,r.from==r.head?o:l))}n&&(t||(t=e.ranges.slice()),t[i]=n)}return t?L.create(t,e.mainIndex):e}function Pn(s,e,t){let i=Vi(s.state.facet(nr).map(r=>r(s)),t.from,e.head>t.from?-1:1);return i==t.from?t:L.cursor(i,i<t.from?1:-1)}const Bi="ï¿¿";class Up{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(he.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Bi}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let n=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==t)break;let l=fe.get(r),a=fe.get(o);(l&&a?l.breakAfter:(l?l.breakAfter:hs(r))||hs(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>n)&&!Hp(o,t)&&this.lineBreak(),r=o}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let n=-1,o=1,l;if(this.lineSeparator?(n=t.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=r.exec(t))&&(n=l.index,o=l[0].length),this.append(t.slice(i,n<0?t.length:n)),n<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=n+o}}readNode(e){if(e.cmIgnore)return;let t=fe.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(jp(e,i.node,i.offset)?t:0))}}function jp(s,e,t){for(;;){if(!e||t<St(e))return!1;if(e==s)return!0;t=ti(e)+1,e=e.parentNode}}function Hp(s,e){let t;for(;!(s==e||!s);s=s.nextSibling){let i=fe.get(s);if(!(i?.isWidget||s.cmIgnore))return!1;i&&(t||(t=[])).push(i)}if(t)for(let i of t){let r=i.overrideDOMText;if(r?.length)return!1}return!0}class Ya{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class Yp{constructor(e,t,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:n,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let l=n||o?[]:Gp(e),a=new Up(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=Kp(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=n&&n.node==l.focusNode&&n.offset==l.focusOffset||!lo(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),u=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!lo(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),h=e.viewport;if((q.ios||q.chrome)&&e.state.selection.main.empty&&a!=u&&(h.from>0||h.to<e.state.doc.length)){let f=Math.min(a,u),c=Math.max(a,u),d=h.from-f,g=h.to-c;(d==0||d==1||f==0)&&(g==0||g==-1||c==e.state.doc.length)&&(a=0,u=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(L.range(u,a)):this.newSel=L.single(u,a)}}}function Mf(s,e){let t,{newSel:i}=e,r=s.state.selection.main,n=s.inputState.lastKeyTime>Date.now()-100?s.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,a=r.from,u=null;(n===8||q.android&&e.text.length<l-o)&&(a=r.to,u="end");let h=Rf(s.state.doc.sliceString(o,l,Bi),e.text,a-o,u);h&&(q.chrome&&n==13&&h.toB==h.from+2&&e.text.slice(h.from,h.toB)==Bi+Bi&&h.toB--,t={from:o+h.from,to:o+h.toA,insert:se.of(e.text.slice(h.from,h.toB).split(Bi))})}else i&&(!s.hasFocus&&s.state.facet(At)||i.main.eq(r))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!r.empty&&i&&i.main.empty?t={from:r.from,to:r.to,insert:s.state.doc.slice(r.from,r.to)}:(q.mac||q.android)&&t&&t.from==t.to&&t.from==r.head-1&&/^\. ?$/.test(t.insert.toString())&&s.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=L.single(i.main.anchor-1,i.main.head-1)),t={from:t.from,to:t.to,insert:se.of([t.insert.toString().replace("."," ")])}):t&&t.from>=r.from&&t.to<=r.to&&(t.from!=r.from||t.to!=r.to)&&r.to-r.from-(t.to-t.from)<=4?t={from:r.from,to:r.to,insert:s.state.doc.slice(r.from,t.from).append(t.insert).append(s.state.doc.slice(t.to,r.to))}:s.state.doc.lineAt(r.from).to<r.to&&s.docView.lineHasWidget(r.to)&&s.inputState.insertingTextAt>Date.now()-50?t={from:r.from,to:r.to,insert:s.state.toText(s.inputState.insertingText)}:q.chrome&&t&&t.from==t.to&&t.from==r.head&&t.insert.toString()==`
 `&&s.lineWrapping&&(i&&(i=L.single(i.main.anchor-1,i.main.head-1)),t={from:r.from,to:r.to,insert:se.of([" "])}),t)return Jo(s,t,i,n);if(i&&!i.main.eq(r)){let o=!1,l="select";return s.inputState.lastSelectionTime>Date.now()-50&&(s.inputState.lastSelectionOrigin=="select"&&(o=!0),l=s.inputState.lastSelectionOrigin,l=="select.pointer"&&(i=Ef(s.state.facet(nr).map(a=>a(s)),i))),s.dispatch({selection:i,scrollIntoView:o,userEvent:l}),!0}else return!1}function Jo(s,e,t,i=-1){if(q.ios&&s.inputState.flushIOSKey(e))return!0;let r=s.state.selection.main;if(q.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&s.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&mi(s.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&mi(s.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&mi(s.contentDOM,"Delete",46)))return!0;let n=e.insert.toString();s.inputState.composing>=0&&s.inputState.composing++;let o,l=()=>o||(o=Xp(s,e,t));return s.state.facet(mf).some(a=>a(s,e.from,e.to,n,l))||s.dispatch(l()),!0}function Xp(s,e,t){let i,r=s.state,n=r.selection.main,o=-1;if(e.from==e.to&&e.from<n.from||e.from>n.to){let a=e.from<n.from?-1:1,u=a<0?n.from:n.to,h=Vi(r.facet(nr).map(f=>f(s)),u,a);e.from==h&&(o=h)}if(o>-1)i={changes:e,selection:L.cursor(e.from+e.insert.length,-1)};else if(e.from>=n.from&&e.to<=n.to&&e.to-e.from>=(n.to-n.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&s.inputState.composing<0){let a=n.from<e.from?r.sliceDoc(n.from,e.from):"",u=n.to>e.to?r.sliceDoc(e.to,n.to):"";i=r.replaceSelection(s.state.toText(a+e.insert.sliceString(0,void 0,s.state.lineBreak)+u))}else{let a=r.changes(e),u=t&&t.main.to<=a.newLength?t.main:void 0;if(r.selection.ranges.length>1&&(s.inputState.composing>=0||s.inputState.compositionPendingChange)&&e.to<=n.to+10&&e.to>=n.to-10){let h=s.state.sliceDoc(e.from,e.to),f,c=t&&Af(s,t.main.head);if(c){let g=e.insert.length-(e.to-e.from);f={from:c.from,to:c.to-g}}else f=s.state.doc.lineAt(n.head);let d=n.to-e.to;i=r.changeByRange(g=>{if(g.from==n.from&&g.to==n.to)return{changes:a,range:u||g.map(a)};let p=g.to-d,m=p-h.length;if(s.state.sliceDoc(m,p)!=h||p>=f.from&&m<=f.to)return{range:g};let y=r.changes({from:m,to:p,insert:e.insert}),O=g.to-n.to;return{changes:y,range:u?L.range(Math.max(0,u.anchor+O),Math.max(0,u.head+O)):g.map(y)}})}else i={changes:a,selection:u&&r.selection.replaceRange(u)}}let l="input.type";return(s.composing||s.inputState.compositionPendingChange&&s.inputState.compositionEndedAt>Date.now()-50)&&(s.inputState.compositionPendingChange=!1,l+=".compose",s.inputState.compositionFirstChange&&(l+=".start",s.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:l,scrollIntoView:!0})}function Rf(s,e,t,i){let r=Math.min(s.length,e.length),n=0;for(;n<r&&s.charCodeAt(n)==e.charCodeAt(n);)n++;if(n==r&&s.length==e.length)return null;let o=s.length,l=e.length;for(;o>0&&l>0&&s.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,n-Math.min(o,l));t-=o+a-n}if(o<n&&s.length<e.length){let a=t<=n&&t>=o?n-t:0;n-=a,l=n+(l-o),o=n}else if(l<n){let a=t<=n&&t>=l?n-t:0;n-=a,o=n+(o-l),l=n}return{from:n,toA:o,toB:l}}function Gp(s){let e=[];if(s.root.activeElement!=s.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:n}=s.observer.selectionRange;return t&&(e.push(new Ya(t,i)),(r!=t||n!=i)&&e.push(new Ya(r,n))),e}function Kp(s,e){if(s.length==0)return null;let t=s[0].pos,i=s.length==2?s[1].pos:t;return t>-1&&i>-1?L.single(t+e,i+e):null}class Zp{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,q.safari&&e.contentDOM.addEventListener("input",()=>null),q.gecko&&pg(e.contentDOM.ownerDocument)}handleEvent(e){!og(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,t);for(let r of i.handlers){if(t.defaultPrevented)break;if(r(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=Jp(e),i=this.handlers,r=this.view.contentDOM;for(let n in t)if(n!="scroll"){let o=!t[n].handlers.length,l=i[n];l&&o!=!l.handlers.length&&(r.removeEventListener(n,this.handleEvent),l=null),l||r.addEventListener(n,this.handleEvent,{passive:o})}for(let n in i)n!="scroll"&&!t[n]&&r.removeEventListener(n,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Qf.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),q.android&&q.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return q.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=Df.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||eg.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,mi(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:q.safari&&!q.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Xa(s,e){return(t,i)=>{try{return e.call(s,i,t)}catch(r){bt(t.state,r)}}}function Jp(s){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of s){let r=i.spec,n=r&&r.plugin.domEventHandlers,o=r&&r.plugin.domEventObservers;if(n)for(let l in n){let a=n[l];a&&t(l).handlers.push(Xa(i.value,a))}if(o)for(let l in o){let a=o[l];a&&t(l).observers.push(Xa(i.value,a))}}for(let i in ht)t(i).handlers.push(ht[i]);for(let i in tt)t(i).observers.push(tt[i]);return e}const Df=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],eg="dthko",Qf=[16,17,18,20,91,92,224,225],Nr=6;function Fr(s){return Math.max(0,s)*.7+8}function tg(s,e){return Math.max(Math.abs(s.clientX-e.clientX),Math.abs(s.clientY-e.clientY))}class ig{constructor(e,t,i,r){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=ap(e.contentDOM),this.atoms=e.state.facet(nr).map(o=>o(e));let n=e.contentDOM.ownerDocument;n.addEventListener("mousemove",this.move=this.move.bind(this)),n.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(he.allowMultipleSelections)&&rg(e,t),this.dragging=ng(e,t)&&Lf(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&tg(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,r=0,n=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:n,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=Cf(this.view);e.clientX-a.left<=r+Nr?t=-Fr(r-e.clientX):e.clientX+a.right>=o-Nr&&(t=Fr(e.clientX-o)),e.clientY-a.top<=n+Nr?i=-Fr(n-e.clientY):e.clientY+a.bottom>=l-Nr&&(i=Fr(e.clientY-l)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,i=Ef(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function rg(s,e){let t=s.state.facet(cf);return t.length?t[0](e):q.mac?e.metaKey:e.ctrlKey}function sg(s,e){let t=s.state.facet(df);return t.length?t[0](e):q.mac?!e.altKey:!e.ctrlKey}function ng(s,e){let{main:t}=s.state.selection;if(t.empty)return!1;let i=Gi(s.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let n=0;n<r.length;n++){let o=r[n];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function og(s,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=s.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=fe.get(t))&&i.ignoreEvent(e))return!1;return!0}const ht=Object.create(null),tt=Object.create(null),_f=q.ie&&q.ie_version<15||q.ios&&q.webkit_version<604;function lg(s){let e=s.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{s.focus(),t.remove(),If(s,t.value)},50)}function Is(s,e,t){for(let i of s.facet(e))t=i(t,s);return t}function If(s,e){e=Is(s.state,Go,e);let{state:t}=s,i,r=1,n=t.toText(e),o=n.lines==t.selection.ranges.length;if(yo!=null&&t.selection.ranges.every(a=>a.empty)&&yo==n.toString()){let a=-1;i=t.changeByRange(u=>{let h=t.doc.lineAt(u.from);if(h.from==a)return{range:u};a=h.from;let f=t.toText((o?n.line(r++).text:e)+t.lineBreak);return{changes:{from:h.from,insert:f},range:L.cursor(u.from+f.length)}})}else o?i=t.changeByRange(a=>{let u=n.line(r++);return{changes:{from:a.from,to:a.to,insert:u.text},range:L.cursor(a.from+u.length)}}):i=t.replaceSelection(n);s.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}tt.scroll=s=>{s.inputState.lastScrollTop=s.scrollDOM.scrollTop,s.inputState.lastScrollLeft=s.scrollDOM.scrollLeft};ht.keydown=(s,e)=>(s.inputState.setSelectionOrigin("select"),e.keyCode==27&&s.inputState.tabFocusMode!=0&&(s.inputState.tabFocusMode=Date.now()+2e3),!1);tt.touchstart=(s,e)=>{s.inputState.lastTouchTime=Date.now(),s.inputState.setSelectionOrigin("select.pointer")};tt.touchmove=s=>{s.inputState.setSelectionOrigin("select.pointer")};ht.mousedown=(s,e)=>{if(s.observer.flush(),s.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of s.state.facet(pf))if(t=i(s,e),t)break;if(!t&&e.button==0&&(t=ug(s,e)),t){let i=!s.hasFocus;s.inputState.startMouseSelection(new ig(s,e,t,i)),i&&s.observer.ignore(()=>{Yu(s.contentDOM);let n=s.root.activeElement;n&&!n.contains(s.contentDOM)&&n.blur()});let r=s.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}else s.inputState.setSelectionOrigin("select.pointer");return!1};function Ga(s,e,t,i){if(i==1)return L.cursor(e,t);if(i==2)return Lp(s.state,e,t);{let r=ke.find(s.docView,e),n=s.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:n.from,l=r?r.posAtEnd:n.to;return l<s.state.doc.length&&l==n.to&&l++,L.range(o,l)}}let Ka=(s,e,t)=>e>=t.top&&e<=t.bottom&&s>=t.left&&s<=t.right;function ag(s,e,t,i){let r=ke.find(s.docView,e);if(!r)return 1;let n=e-r.posAtStart;if(n==0)return 1;if(n==r.length)return-1;let o=r.coordsAt(n,-1);if(o&&Ka(t,i,o))return-1;let l=r.coordsAt(n,1);return l&&Ka(t,i,l)?1:o&&o.bottom>=i?-1:1}function Za(s,e){let t=s.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:ag(s,t,e.clientX,e.clientY)}}const hg=q.ie&&q.ie_version<=11;let Ja=null,eh=0,th=0;function Lf(s){if(!hg)return s.detail;let e=Ja,t=th;return Ja=s,th=Date.now(),eh=!e||t>Date.now()-400&&Math.abs(e.clientX-s.clientX)<2&&Math.abs(e.clientY-s.clientY)<2?(eh+1)%3:1}function ug(s,e){let t=Za(s,e),i=Lf(e),r=s.state.selection;return{update(n){n.docChanged&&(t.pos=n.changes.mapPos(t.pos),r=r.map(n.changes))},get(n,o,l){let a=Za(s,n),u,h=Ga(s,a.pos,a.bias,i);if(t.pos!=a.pos&&!o){let f=Ga(s,t.pos,t.bias,i),c=Math.min(f.from,h.from),d=Math.max(f.to,h.to);h=c<h.from?L.range(c,d):L.range(d,c)}return o?r.replaceRange(r.main.extend(h.from,h.to)):l&&i==1&&r.ranges.length>1&&(u=fg(r,a.pos))?u:l?r.addRange(h):L.create([h])}}}function fg(s,e){for(let t=0;t<s.ranges.length;t++){let{from:i,to:r}=s.ranges[t];if(i<=e&&r>=e)return L.create(s.ranges.slice(0,t).concat(s.ranges.slice(t+1)),s.mainIndex==t?0:s.mainIndex-(s.mainIndex>t?1:0))}return null}ht.dragstart=(s,e)=>{let{selection:{main:t}}=s.state;if(e.target.draggable){let r=s.docView.nearest(e.target);if(r&&r.isWidget){let n=r.posAtStart,o=n+r.length;(n>=t.to||o<=t.from)&&(t=L.range(n,o))}}let{inputState:i}=s;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",Is(s.state,Ko,s.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};ht.dragend=s=>(s.inputState.draggedContent=null,!1);function ih(s,e,t,i){if(t=Is(s.state,Go,t),!t)return;let r=s.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:n}=s.inputState,o=i&&n&&sg(s,e)?{from:n.from,to:n.to}:null,l={from:r,insert:t},a=s.state.changes(o?[o,l]:l);s.focus(),s.dispatch({changes:a,selection:{anchor:a.mapPos(r,-1),head:a.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),s.inputState.draggedContent=null}ht.drop=(s,e)=>{if(!e.dataTransfer)return!1;if(s.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),r=0,n=()=>{++r==t.length&&ih(s,e,i.filter(o=>o!=null).join(s.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=n,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),n()},l.readAsText(t[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return ih(s,e,i,!0),!0}return!1};ht.paste=(s,e)=>{if(s.state.readOnly)return!0;s.observer.flush();let t=_f?null:e.clipboardData;return t?(If(s,t.getData("text/plain")||t.getData("text/uri-list")),!0):(lg(s),!1)};function cg(s,e){let t=s.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),s.focus()},50)}function dg(s){let e=[],t=[],i=!1;for(let r of s.selection.ranges)r.empty||(e.push(s.sliceDoc(r.from,r.to)),t.push(r));if(!e.length){let r=-1;for(let{from:n}of s.selection.ranges){let o=s.doc.lineAt(n);o.number>r&&(e.push(o.text),t.push({from:o.from,to:Math.min(s.doc.length,o.to+1)})),r=o.number}i=!0}return{text:Is(s,Ko,e.join(s.lineBreak)),ranges:t,linewise:i}}let yo=null;ht.copy=ht.cut=(s,e)=>{let{text:t,ranges:i,linewise:r}=dg(s.state);if(!t&&!r)return!1;yo=r?t:null,e.type=="cut"&&!s.state.readOnly&&s.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let n=_f?null:e.clipboardData;return n?(n.clearData(),n.setData("text/plain",t),!0):(cg(s,t),!1)};const Bf=Pi.define();function Nf(s,e){let t=[];for(let i of s.facet(yf)){let r=i(s,e);r&&t.push(r)}return t.length?s.update({effects:t,annotations:Bf.of(!0)}):null}function Ff(s){setTimeout(()=>{let e=s.hasFocus;if(e!=s.inputState.notifiedFocused){let t=Nf(s.state,e);t?s.dispatch(t):s.update([])}},10)}tt.focus=s=>{s.inputState.lastFocusTime=Date.now(),!s.scrollDOM.scrollTop&&(s.inputState.lastScrollTop||s.inputState.lastScrollLeft)&&(s.scrollDOM.scrollTop=s.inputState.lastScrollTop,s.scrollDOM.scrollLeft=s.inputState.lastScrollLeft),Ff(s)};tt.blur=s=>{s.observer.clearSelectionRange(),Ff(s)};tt.compositionstart=tt.compositionupdate=s=>{s.observer.editContext||(s.inputState.compositionFirstChange==null&&(s.inputState.compositionFirstChange=!0),s.inputState.composing<0&&(s.inputState.composing=0))};tt.compositionend=s=>{s.observer.editContext||(s.inputState.composing=-1,s.inputState.compositionEndedAt=Date.now(),s.inputState.compositionPendingKey=!0,s.inputState.compositionPendingChange=s.observer.pendingRecords().length>0,s.inputState.compositionFirstChange=null,q.chrome&&q.android?s.observer.flushSoon():s.inputState.compositionPendingChange?Promise.resolve().then(()=>s.observer.flush()):setTimeout(()=>{s.inputState.composing<0&&s.docView.hasComposition&&s.update([])},50))};tt.contextmenu=s=>{s.inputState.lastContextMenu=Date.now()};ht.beforeinput=(s,e)=>{var t,i;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(s.inputState.insertingText=e.data,s.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&s.observer.editContext){let n=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(n&&o.length){let l=o[0],a=s.posAtDOM(l.startContainer,l.startOffset),u=s.posAtDOM(l.endContainer,l.endOffset);return Jo(s,{from:a,to:u,insert:s.state.toText(n)},null),!0}}let r;if(q.chrome&&q.android&&(r=Df.find(n=>n.inputType==e.inputType))&&(s.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let n=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>n+10&&s.hasFocus&&(s.contentDOM.blur(),s.focus())},100)}return q.ios&&e.inputType=="deleteContentForward"&&s.observer.flushSoon(),q.safari&&e.inputType=="insertText"&&s.inputState.composing>=0&&setTimeout(()=>tt.compositionend(s,e),20),!1};const rh=new Set;function pg(s){rh.has(s)||(rh.add(s),s.addEventListener("copy",()=>{}),s.addEventListener("cut",()=>{}))}const sh=["pre-wrap","normal","pre-line","break-spaces"];let xi=!1;function nh(){xi=!1}class gg{constructor(e){this.lineWrapping=e,this.doc=se.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return sh.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(t=!0,this.heightSamples[Math.floor(r*10)]=!0)}return t}refresh(e,t,i,r,n,o){let l=sh.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=i,this.textHeight=r,this.lineLength=n,a){this.heightSamples={};for(let u=0;u<o.length;u++){let h=o[u];h<0?u++:this.heightSamples[Math.floor(h*10)]=!0}}return a}}class mg{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Ot{constructor(e,t,i,r,n){this.from=e,this.length=t,this.top=i,this.height=r,this._content=n}get type(){return typeof this._content=="number"?Je.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Vt?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Ot(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var me=(function(s){return s[s.ByPos=0]="ByPos",s[s.ByHeight=1]="ByHeight",s[s.ByPosNoHeight=2]="ByPosNoHeight",s})(me||(me={}));const es=.001;class Ve{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>es&&(xi=!0),this.height=e)}replace(e,t,i){return Ve.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,r){let n=this,o=i.doc;for(let l=r.length-1;l>=0;l--){let{fromA:a,toA:u,fromB:h,toB:f}=r[l],c=n.lineAt(a,me.ByPosNoHeight,i.setDoc(t),0,0),d=c.to>=u?c:n.lineAt(u,me.ByPosNoHeight,i,0,0);for(f+=d.to-u,u=d.to;l>0&&c.from<=r[l-1].toA;)a=r[l-1].fromA,h=r[l-1].fromB,l--,a<c.from&&(c=n.lineAt(a,me.ByPosNoHeight,i,0,0));h+=c.from-a,a=c.from;let g=el.build(i.setDoc(o),e,h,f);n=cs(n,n.replace(a,u,g))}return n.updateHeight(i,0)}static empty(){return new Ge(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,r=0,n=0;for(;;)if(t==i)if(r>n*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,r-=l.size}else if(n>r*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,n-=l.size}else break;else if(r<n){let l=e[t++];l&&(r+=l.size)}else{let l=e[--i];l&&(n+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,i++),new yg(Ve.of(e.slice(0,t)),o,Ve.of(e.slice(i)))}}function cs(s,e){return s==e?s:(s.constructor!=e.constructor&&(xi=!0),e)}Ve.prototype.size=1;class qf extends Ve{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,r){return new Ot(r,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,r,n){return this.blockAt(0,i,r,n)}forEachLine(e,t,i,r,n,o){e<=n+this.length&&t>=n&&o(this.blockAt(0,i,r,n))}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Ge extends qf{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,r){return new Ot(r,this.length,i,this.height,this.breaks)}replace(e,t,i){let r=i[0];return i.length==1&&(r instanceof Ge||r instanceof Me&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Me?r=new Ge(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Ve.of(i)}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Me extends Ve{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,n=r-i+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*n);o=a/n,this.length>n+1&&(l=(this.height-a)/(this.length-n-1))}else o=this.height/n;return{firstLine:i,lastLine:r,perLine:o,perChar:l}}blockAt(e,t,i,r){let{firstLine:n,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(t,r);if(t.lineWrapping){let u=r+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),h=t.doc.lineAt(u),f=l+h.length*a,c=Math.max(i,e-f/2);return new Ot(h.from,h.length,c,f,0)}else{let u=Math.max(0,Math.min(o-n,Math.floor((e-i)/l))),{from:h,length:f}=t.doc.line(n+u);return new Ot(h,f,i+l*u,l,0)}}lineAt(e,t,i,r,n){if(t==me.ByHeight)return this.blockAt(e,i,r,n);if(t==me.ByPosNoHeight){let{from:d,to:g}=i.doc.lineAt(e);return new Ot(d,g-d,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(i,n),u=i.doc.lineAt(e),h=l+u.length*a,f=u.number-o,c=r+l*f+a*(u.from-n-f);return new Ot(u.from,u.length,Math.max(r,Math.min(c,r+this.height-h)),h,0)}forEachLine(e,t,i,r,n,o){e=Math.max(e,n),t=Math.min(t,n+this.length);let{firstLine:l,perLine:a,perChar:u}=this.heightMetrics(i,n);for(let h=e,f=r;h<=t;){let c=i.doc.lineAt(h);if(h==e){let g=c.number-l;f+=a*g+u*(e-n-g)}let d=a+u*c.length;o(new Ot(c.from,c.length,f,d,0)),f+=d,h=c.to+1}}replace(e,t,i){let r=this.length-t;if(r>0){let n=i[i.length-1];n instanceof Me?i[i.length-1]=new Me(n.length+r):i.push(null,new Me(r-1))}if(e>0){let n=i[0];n instanceof Me?i[0]=new Me(e+n.length):i.unshift(new Me(e-1),null)}return Ve.of(i)}decomposeLeft(e,t){t.push(new Me(e-1),null)}decomposeRight(e,t){t.push(null,new Me(this.length-e-1))}updateHeight(e,t=0,i=!1,r){let n=t+this.length;if(r&&r.from<=t+this.length&&r.more){let o=[],l=Math.max(t,r.from),a=-1;for(r.from>t&&o.push(new Me(r.from-t-1).updateHeight(e,t));l<=n&&r.more;){let h=e.doc.lineAt(l).length;o.length&&o.push(null);let f=r.heights[r.index++];a==-1?a=f:Math.abs(f-a)>=es&&(a=-2);let c=new Ge(h,f);c.outdated=!1,o.push(c),l+=h+1}l<=n&&o.push(null,new Me(n-l).updateHeight(e,l));let u=Ve.of(o);return(a<0||Math.abs(u.height-this.height)>=es||Math.abs(a-this.heightMetrics(e,t).perLine)>=es)&&(xi=!0),cs(this,u)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class yg extends Ve{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,r){let n=i+this.left.height;return e<n?this.left.blockAt(e,t,i,r):this.right.blockAt(e,t,n,r+this.left.length+this.break)}lineAt(e,t,i,r,n){let o=r+this.left.height,l=n+this.left.length+this.break,a=t==me.ByHeight?e<o:e<l,u=a?this.left.lineAt(e,t,i,r,n):this.right.lineAt(e,t,i,o,l);if(this.break||(a?u.to<l:u.from>l))return u;let h=t==me.ByPosNoHeight?me.ByPosNoHeight:me.ByPos;return a?u.join(this.right.lineAt(l,h,i,o,l)):this.left.lineAt(l,h,i,r,n).join(u)}forEachLine(e,t,i,r,n,o){let l=r+this.left.height,a=n+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,i,r,n,o),t>=a&&this.right.forEachLine(e,t,i,l,a,o);else{let u=this.lineAt(a,me.ByPos,i,r,n);e<u.from&&this.left.forEachLine(e,u.from-1,i,r,n,o),u.to>=e&&u.from<=t&&o(u),t>u.to&&this.right.forEachLine(u.to+1,t,i,l,a,o)}}replace(e,t,i){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,i));let n=[];e>0&&this.decomposeLeft(e,n);let o=n.length;for(let l of i)n.push(l);if(e>0&&oh(n,o-1),t<this.length){let l=n.length;this.decomposeRight(t,n),oh(n,l)}return Ve.of(n)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Ve.of(this.break?[e,null,t]:[e,t]):(this.left=cs(this.left,e),this.right=cs(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,r){let{left:n,right:o}=this,l=t+n.length+this.break,a=null;return r&&r.from<=t+n.length&&r.more?a=n=n.updateHeight(e,t,i,r):n.updateHeight(e,t,i),r&&r.from<=l+o.length&&r.more?a=o=o.updateHeight(e,l,i,r):o.updateHeight(e,l,i),a?this.balanced(n,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function oh(s,e){let t,i;s[e]==null&&(t=s[e-1])instanceof Me&&(i=s[e+1])instanceof Me&&s.splice(e-1,3,new Me(t.length+1+i.length))}const vg=5;class el{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Ge?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Ge(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,n=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=t-e;i.block?this.addBlock(new qf(o,r,i)):(o||n||r>=vg)&&this.addLineDeco(r,n,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Ge(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new Me(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Ge)return e;let t=new Ge(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Ge)&&!this.isCovered?this.nodes.push(new Ge(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof Ge&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,t,i,r){let n=new el(i,e);return ue.spans(t,i,r,n,0),n.finish(i)}}function Og(s,e,t){let i=new bg;return ue.compare(s,e,t,i,0),i.changes}class bg{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,r){(e<t||i&&i.heightRelevant||r&&r.heightRelevant)&&Jr(e,t,this.changes,5)}}function wg(s,e){let t=s.getBoundingClientRect(),i=s.ownerDocument,r=i.defaultView||window,n=Math.max(0,t.left),o=Math.min(r.innerWidth,t.right),l=Math.max(0,t.top),a=Math.min(r.innerHeight,t.bottom);for(let u=s.parentNode;u&&u!=i.body;)if(u.nodeType==1){let h=u,f=window.getComputedStyle(h);if((h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth)&&f.overflow!="visible"){let c=h.getBoundingClientRect();n=Math.max(n,c.left),o=Math.min(o,c.right),l=Math.max(l,c.top),a=Math.min(u==s.parentNode?r.innerHeight:a,c.bottom)}u=f.position=="absolute"||f.position=="fixed"?h.offsetParent:h.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:n-t.left,right:Math.max(n,o)-t.left,top:l-(t.top+e),bottom:Math.max(l,a)-(t.top+e)}}function Sg(s){let e=s.getBoundingClientRect(),t=s.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function xg(s,e){let t=s.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Tn{constructor(e,t,i,r){this.from=e,this.to=t,this.size=i,this.displaySize=r}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],n=t[i];if(r.from!=n.from||r.to!=n.to||r.size!=n.size)return!1}return!0}draw(e,t){return Qe.replace({widget:new kg(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class kg extends Yo{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class lh{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=ah,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Te.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Zo).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new gg(t),this.stateDeco=e.facet(Zi).filter(i=>typeof i!="function"),this.heightMap=Ve.empty().applyChanges(this.stateDeco,se.empty,this.heightOracle.setDoc(e.doc),[new et(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Qe.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let r=i?t.head:t.anchor;if(!e.some(({from:n,to:o})=>r>=n&&r<=o)){let{from:n,to:o}=this.lineBlockAt(r);e.push(new qr(n,o))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?ah:new tl(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Ni(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Zi).filter(h=>typeof h!="function");let r=e.changedRanges,n=et.extendWithRanges(r,Og(i,this.stateDeco,e?e.changes:Ee.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);nh(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),n),(this.heightMap.height!=o||xi)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=n.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let u=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Pp)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),r=this.heightOracle,n=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Te.RTL:Te.LTR;let o=this.heightOracle.mustRefreshForWrapping(n),l=t.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let u=0,h=0;if(l.width&&l.height){let{scaleX:b,scaleY:v}=Hu(t,l);(b>.005&&Math.abs(this.scaleX-b)>.005||v>.005&&Math.abs(this.scaleY-v)>.005)&&(this.scaleX=b,this.scaleY=v,u|=16,o=a=!0)}let f=(parseInt(i.paddingTop)||0)*this.scaleY,c=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=c)&&(this.paddingTop=f,this.paddingBottom=c,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=Gu(e.scrollDOM);let g=(this.printing?xg:wg)(t,this.paddingTop),p=g.top-this.pixelViewport.top,m=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let y=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(y!=this.inView&&(this.inView=y,y&&(a=!0)),!this.inView&&!this.scrollTarget&&!Sg(e.dom))return 0;let O=l.width;if((this.contentDOMWidth!=O||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),a){let b=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(b)&&(o=!0),o||r.lineWrapping&&Math.abs(O-this.contentDOMWidth)>r.charWidth){let{lineHeight:v,charWidth:S,textHeight:x}=e.docView.measureTextSize();o=v>0&&r.refresh(n,v,S,x,Math.max(5,O/S),b),o&&(e.docView.minWidth=0,u|=16)}p>0&&m>0?h=Math.max(p,m):p<0&&m<0&&(h=Math.min(p,m)),nh();for(let v of this.viewports){let S=v.from==this.viewport.from?b:e.docView.measureVisibleLineHeights(v);this.heightMap=(o?Ve.empty().applyChanges(this.stateDeco,se.empty,this.heightOracle,[new et(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new mg(v.from,S))}xi&&(u|=2)}let w=!this.viewportIsAppropriate(this.viewport,h)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(h,this.scrollTarget),u|=this.updateForViewport()),(u&2||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,n=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new qr(r.lineAt(o-i*1e3,me.ByHeight,n,0,0).from,r.lineAt(l+(1-i)*1e3,me.ByHeight,n,0,0).to);if(t){let{head:u}=t.range;if(u<a.from||u>a.to){let h=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=r.lineAt(u,me.ByPos,n,0,0),c;t.y=="center"?c=(f.top+f.bottom)/2-h/2:t.y=="start"||t.y=="nearest"&&u<a.from?c=f.top:c=f.bottom-h,a=new qr(r.lineAt(c-1e3/2,me.ByHeight,n,0,0).from,r.lineAt(c+h+1e3/2,me.ByHeight,n,0,0).to)}}return a}mapViewport(e,t){let i=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new qr(this.heightMap.lineAt(i,me.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,me.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,me.ByPos,this.heightOracle,0,0),{bottom:n}=this.heightMap.lineAt(t,me.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||n>=l+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&n<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let r of e)t.touchesRange(r.from,r.to)||i.push(new Tn(t.mapPos(r.from),t.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,n=r>>1,o=r<<1;if(this.defaultTextDirection!=Te.LTR&&!i)return[];let l=[],a=(h,f,c,d)=>{if(f-h<n)return;let g=this.state.selection.main,p=[g.from];g.empty||p.push(g.to);for(let y of p)if(y>h&&y<f){a(h,y-10,c,d),a(y+10,f,c,d);return}let m=Ag(e,y=>y.from>=c.from&&y.to<=c.to&&Math.abs(y.from-h)<n&&Math.abs(y.to-f)<n&&!p.some(O=>y.from<O&&y.to>O));if(!m){if(f<c.to&&t&&i&&t.visibleRanges.some(w=>w.from<=f&&w.to>=f)){let w=t.moveToLineBoundary(L.cursor(f),!1,!0).head;w>h&&(f=w)}let y=this.gapSize(c,h,f,d),O=i||y<2e6?y:2e6;m=new Tn(h,f,y,O)}l.push(m)},u=h=>{if(h.length<o||h.type!=Je.Text)return;let f=Cg(h.from,h.to,this.stateDeco);if(f.total<o)return;let c=this.scrollTarget?this.scrollTarget.range.head:null,d,g;if(i){let p=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,m,y;if(c!=null){let O=Wr(f,c),w=((this.visibleBottom-this.visibleTop)/2+p)/h.height;m=O-w,y=O+w}else m=(this.visibleTop-h.top-p)/h.height,y=(this.visibleBottom-h.top+p)/h.height;d=zr(f,m),g=zr(f,y)}else{let p=f.total*this.heightOracle.charWidth,m=r*this.heightOracle.charWidth,y=0;if(p>2e6)for(let S of e)S.from>=h.from&&S.from<h.to&&S.size!=S.displaySize&&S.from*this.heightOracle.charWidth+y<this.pixelViewport.left&&(y=S.size-S.displaySize);let O=this.pixelViewport.left+y,w=this.pixelViewport.right+y,b,v;if(c!=null){let S=Wr(f,c),x=((w-O)/2+m)/p;b=S-x,v=S+x}else b=(O-m)/p,v=(w+m)/p;d=zr(f,b),g=zr(f,v)}d>h.from&&a(h.from,d,h,f),g<h.to&&a(g,h.to,h,f)};for(let h of this.viewportLines)Array.isArray(h.type)?h.type.forEach(u):u(h);return l}gapSize(e,t,i,r){let n=Wr(r,i)-Wr(r,t);return this.heightOracle.lineWrapping?e.height*n:r.total*this.heightOracle.charWidth*n}updateLineGaps(e){Tn.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Qe.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let i=[];ue.spans(t,this.viewport.from,this.viewport.to,{span(n,o){i.push({from:n,to:o})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let n=0;n<i.length&&!(r&8);n++){let o=this.visibleRanges[n],l=i[n];(o.from!=l.from||o.to!=l.to)&&(r|=4,e&&e.mapPos(o.from,-1)==l.from&&e.mapPos(o.to,1)==l.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Ni(this.heightMap.lineAt(e,me.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Ni(this.heightMap.lineAt(this.scaler.fromDOM(e),me.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Ni(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class qr{constructor(e,t){this.from=e,this.to=t}}function Cg(s,e,t){let i=[],r=s,n=0;return ue.spans(t,s,e,{span(){},point(o,l){o>r&&(i.push({from:r,to:o}),n+=o-r),r=l}},20),r<e&&(i.push({from:r,to:e}),n+=e-r),{total:n,ranges:i}}function zr({total:s,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(s*t);for(let r=0;;r++){let{from:n,to:o}=e[r],l=o-n;if(i<=l)return n+i;i-=l}}function Wr(s,e){let t=0;for(let{from:i,to:r}of s.ranges){if(e<=r){t+=e-i;break}t+=r-i}return t/s.total}function Ag(s,e){for(let t of s)if(e(t))return t}const ah={toDOM(s){return s},fromDOM(s){return s},scale:1,eq(s){return s==this}};class tl{constructor(e,t,i){let r=0,n=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let u=t.lineAt(l,me.ByPos,e,0,0).top,h=t.lineAt(a,me.ByPos,e,0,0).bottom;return r+=h-u,{from:l,to:a,top:u,bottom:h,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let l of this.viewports)l.domTop=o+(l.top-n)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),n=l.bottom}toDOM(e){for(let t=0,i=0,r=0;;t++){let n=t<this.viewports.length?this.viewports[t]:null;if(!n||e<n.top)return r+(e-i)*this.scale;if(e<=n.bottom)return n.domTop+(e-n.top);i=n.bottom,r=n.domBottom}}fromDOM(e){for(let t=0,i=0,r=0;;t++){let n=t<this.viewports.length?this.viewports[t]:null;if(!n||e<n.domTop)return i+(e-r)/this.scale;if(e<=n.domBottom)return n.top+(e-n.domTop);i=n.bottom,r=n.domBottom}}eq(e){return e instanceof tl?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to):!1}}function Ni(s,e){if(e.scale==1)return s;let t=e.toDOM(s.top),i=e.toDOM(s.bottom);return new Ot(s.from,s.length,t,i-t,Array.isArray(s._content)?s._content.map(r=>Ni(r,e)):s._content)}const $r=j.define({combine:s=>s.join(" ")}),vo=j.define({combine:s=>s.indexOf(!0)>-1}),Oo=Wt.newName(),zf=Wt.newName(),Wf=Wt.newName(),$f={"&light":"."+zf,"&dark":"."+Wf};function bo(s,e,t){return new Wt(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return s;if(!t||!t[r])throw new RangeError(`Unsupported selector: ${r}`);return t[r]}):s+" "+i}})}const Pg=bo("."+Oo,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},$f),Tg={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},En=q.ie&&q.ie_version<=11;class Eg{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new hp,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(q.ie&&q.ie_version<=11||q.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&q.android&&e.constructor.EDIT_CONTEXT!==!1&&!(q.chrome&&q.chrome_version<126)&&(this.editContext=new Rg(e),e.state.facet(At)&&(e.contentDOM.editContext=this.editContext.editContext)),En&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(At)?i.root.activeElement!=this.dom:!Zr(this.dom,r))return;let n=r.anchorNode&&i.docView.nearest(r.anchorNode);if(n&&n.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(q.ie&&q.ie_version<=11||q.android&&q.chrome)&&!i.state.selection.main.empty&&r.focusNode&&Wi(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Gi(e.root);if(!t)return!1;let i=q.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&Mg(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let r=Zr(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&fp(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Tg),En&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),En&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let r=()=>{let n=this.delayedAndroidKey;n&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=n.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&n.force&&mi(this.dom,n.key,n.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,r=!1;for(let n of e){let o=this.readMutation(n);o&&(o.typeOver&&(r=!0),t==-1?{from:t,to:i}=o:(t=Math.min(o.from,t),i=Math.max(o.to,i)))}return{from:t,to:i,typeOver:r}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),r=this.selectionChanged&&Zr(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let n=new Yp(this.view,e,t,i);return this.view.docView.domChanged={newSel:n.newSel?n.newSel.main:null},n}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,r=Mf(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=hh(t,e.previousSibling||e.target.previousSibling,-1),r=hh(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(At)!=e.state.facet(At)&&(e.view.contentDOM.editContext=e.state.facet(At)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function hh(s,e,t){for(;e;){let i=fe.get(e);if(i&&i.parent==s)return i;let r=e.parentNode;e=r!=s.dom?r:t>0?e.nextSibling:e.previousSibling}return null}function uh(s,e){let t=e.startContainer,i=e.startOffset,r=e.endContainer,n=e.endOffset,o=s.docView.domAtPos(s.state.selection.main.anchor);return Wi(o.node,o.offset,r,n)&&([t,i,r,n]=[r,n,t,i]),{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:n}}function Mg(s,e){if(e.getComposedRanges){let r=e.getComposedRanges(s.root)[0];if(r)return uh(s,r)}let t=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),t=r.getTargetRanges()[0]}return s.contentDOM.addEventListener("beforeinput",i,!0),s.dom.ownerDocument.execCommand("indent"),s.contentDOM.removeEventListener("beforeinput",i,!0),t?uh(s,t):null}class Rg{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let r=e.state.selection.main,{anchor:n,head:o}=r,l=this.toEditorPos(i.updateRangeStart),a=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:l,drifted:!1});let u=a-l>i.text.length;l==this.from&&n<this.from?l=n:a==this.to&&n>this.to&&(a=n);let h=Rf(e.state.sliceDoc(l,a),i.text,(u?r.from:r.to)-l,u?"end":null);if(!h){let c=L.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));c.main.eq(r)||e.dispatch({selection:c,userEvent:"select"});return}let f={from:h.from+l,to:h.toA+l,insert:se.of(i.text.slice(h.from,h.toB).split(`
`))};if((q.mac||q.android)&&f.from==o-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(f={from:l,to:a,insert:se.of([i.text.replace("."," ")])}),this.pendingContextChange=f,!e.state.readOnly){let c=this.to-this.from+(f.to-f.from+f.insert.length);Jo(e,f,L.single(this.toEditorPos(i.selectionStart,c),this.toEditorPos(i.selectionEnd,c)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),f.from<f.to&&!f.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(t.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let r=[],n=null;for(let o=this.toEditorPos(i.rangeStart),l=this.toEditorPos(i.rangeEnd);o<l;o++){let a=e.coordsForChar(o);n=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||n||new DOMRect,r.push(n)}t.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let n of i.getTextFormats()){let o=n.underlineStyle,l=n.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(l)){let a=this.toEditorPos(n.rangeStart),u=this.toEditorPos(n.rangeEnd);if(a<u){let h=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(l)?1:2}px`;r.push(Qe.mark({attributes:{style:h}}).range(a,u))}}}e.dispatch({effects:bf.of(Qe.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=Gi(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((n,o,l,a,u)=>{if(i)return;let h=u.length-(o-n);if(r&&o>=r.to)if(r.from==n&&r.to==o&&r.insert.eq(u)){r=this.pendingContextChange=null,t+=h,this.to+=h;return}else r=null,this.revertPending(e.state);if(n+=t,o+=t,o<=this.from)this.from+=h,this.to+=h;else if(n<this.to){if(n<this.from||o>this.to||this.to-this.from+u.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(n),this.toContextPos(o),u.toString()),this.to+=h}t+=h}),r&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),r=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class K{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(n=>i(n,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||up(e.parent)||document,this.viewState=new lh(e.state||he.create(e)),e.scrollTo&&e.scrollTo.is(Br)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(fi).map(r=>new Cn(r));for(let r of this.plugins)r.update(this);this.observer=new Eg(this),this.inputState=new Zp(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Wa(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Be?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,r,n=this.state;for(let c of e){if(c.startState!=n)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");n=c.state}if(this.destroyed){this.viewState.state=n;return}let o=this.hasFocus,l=0,a=null;e.some(c=>c.annotation(Bf))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=Nf(n,o),a||(l=1));let u=this.observer.delayedAndroidKey,h=null;if(u?(this.observer.clearDelayedAndroidKey(),h=this.observer.readChange(),(h&&!this.state.doc.eq(n.doc)||!this.state.selection.eq(n.selection))&&(h=null)):this.observer.clear(),n.facet(he.phrases)!=this.state.facet(he.phrases))return this.setState(n);r=fs.create(this,n,e),r.flags|=l;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let c of e){if(f&&(f=f.map(c.changes)),c.scrollIntoView){let{main:d}=c.state.selection;f=new yi(d.empty?d:L.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of c.effects)d.is(Br)&&(f=d.value.clip(this.state))}this.viewState.update(r,f),this.bidiCache=ds.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet(Li)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(c=>c.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet($r)!=r.state.facet($r)&&(this.viewState.mustMeasureContent=!0),(t||i||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!r.empty)for(let c of this.state.facet(go))try{c(r)}catch(d){bt(this.state,d,"update listener")}(a||h)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),h&&!Mf(this,h)&&u.force&&mi(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new lh(e),this.plugins=e.facet(fi).map(i=>new Cn(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new Wa(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(fi),i=e.state.facet(fi);if(t!=i){let r=[];for(let n of i){let o=t.indexOf(n);if(o<0)r.push(new Cn(n));else{let l=this.plugins[o];l.mustUpdate=e,r.push(l)}}for(let n of this.plugins)n.mustUpdate!=e&&n.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){bt(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:n,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(Gu(i))n=-1,o=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(r);n=d.from,o=d.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];a&4||([this.measureRequests,u]=[u,this.measureRequests]);let h=u.map(d=>{try{return d.read(this)}catch(g){return bt(this.state,g),fh}}),f=fs.create(this,this.state,[]),c=!1;f.flags|=a,t?t.flags|=a:t=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),c=this.docView.update(f),c&&this.docViewUpdate());for(let d=0;d<u.length;d++)if(h[d]!=fh)try{let g=u[d];g.write&&g.write(h[d],this)}catch(g){bt(this.state,g)}if(c&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let g=(n<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(n).top)-o;if(g>1||g<-1){r=r+g,i.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(go))l(t)}get themeClasses(){return Oo+" "+(this.state.facet(vo)?Wf:zf)+" "+this.state.facet($r)}updateAttrs(){let e=ch(this,wf,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(At)?"true":"false",class:"cm-content",style:`${q.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),ch(this,Zo,t);let i=this.observer.ignore(()=>{let r=ho(this.contentDOM,this.contentAttrs,t),n=ho(this.dom,this.editorAttrs,e);return r||n});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let r of i.effects)if(r.is(K.announce)){t&&(this.announceDOM.textContent=""),t=!1;let n=this.announceDOM.appendChild(document.createElement("div"));n.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(Li);let e=this.state.facet(K.cspNonce);Wt.mount(this.root,this.styleModules.concat(Pg).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return Pn(this,e,Ha(this,e,t,i))}moveByGroup(e,t){return Pn(this,e,Ha(this,e,t,i=>$p(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),n=i[t?i.length-1:0];return L.cursor(n.side(t,r)+e.from,n.forward(!t,r)?1:-1)}moveToLineBoundary(e,t,i=!0){return Wp(this,e,t,i)}moveVertically(e,t,i){return Pn(this,e,Vp(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),Pf(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),n=this.bidiSpans(r),o=n[qt.find(n,e-r.from,-1,t)];return _s(i,o.dir==Te.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(vf)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Dg)return uf(e.length);let t=this.textDirectionAt(e.from),i;for(let n of this.bidiCache)if(n.from==e.from&&n.dir==t&&(n.fresh||hf(n.isolates,i=za(this,e))))return n.order;i||(i=za(this,e));let r=kp(e.text,t,i);return this.bidiCache.push(new ds(e.from,e.to,t,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||q.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Yu(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Br.of(new yi(typeof e=="number"?L.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return Br.of(new yi(L.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Ut.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Ut.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=Wt.newName(),r=[$r.of(i),Li.of(bo(`.${i}`,e))];return t&&t.dark&&r.push(vo.of(!0)),r}static baseTheme(e){return Uo.lowest(Li.of(bo("."+Oo,e,$f)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),r=i&&fe.get(i)||fe.get(e);return((t=r?.rootView)===null||t===void 0?void 0:t.view)||null}}K.styleModule=Li;K.inputHandler=mf;K.clipboardInputFilter=Go;K.clipboardOutputFilter=Ko;K.scrollHandler=Of;K.focusChangeEffect=yf;K.perLineTextDirection=vf;K.exceptionSink=gf;K.updateListener=go;K.editable=At;K.mouseSelectionStyle=pf;K.dragMovesSelection=df;K.clickAddsSelectionRange=cf;K.decorations=Zi;K.outerDecorations=Sf;K.atomicRanges=nr;K.bidiIsolatedRanges=xf;K.scrollMargins=kf;K.darkTheme=vo;K.cspNonce=j.define({combine:s=>s.length?s[0]:""});K.contentAttributes=Zo;K.editorAttributes=wf;K.lineWrapping=K.contentAttributes.of({class:"cm-lineWrapping"});K.announce=Pe.define();const Dg=4096,fh={};class ds{constructor(e,t,i,r,n,o){this.from=e,this.to=t,this.dir=i,this.isolates=r,this.fresh=n,this.order=o}static update(e,t){if(t.empty&&!e.some(n=>n.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:Te.LTR;for(let n=Math.max(0,e.length-10);n<e.length;n++){let o=e[n];o.dir==r&&!t.touchesRange(o.from,o.to)&&i.push(new ds(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function ch(s,e,t){for(let i=s.state.facet(e),r=i.length-1;r>=0;r--){let n=i[r],o=typeof n=="function"?n(s):n;o&&ao(o,t)}return t}const Qg=q.mac?"mac":q.windows?"win":q.linux?"linux":"key";function _g(s,e){const t=s.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let r,n,o,l;for(let a=0;a<t.length-1;++a){const u=t[a];if(/^(cmd|meta|m)$/i.test(u))l=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))n=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?l=!0:n=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(i="Alt-"+i),n&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Vr(s,e,t){return e.altKey&&(s="Alt-"+s),e.ctrlKey&&(s="Ctrl-"+s),e.metaKey&&(s="Meta-"+s),t!==!1&&e.shiftKey&&(s="Shift-"+s),s}const Ig=Uo.default(K.domEventHandlers({keydown(s,e){return Fg(Lg(e.state),s,e,"editor")}})),Vf=j.define({enables:Ig}),dh=new WeakMap;function Lg(s){let e=s.facet(Vf),t=dh.get(e);return t||dh.set(e,t=Ng(e.reduce((i,r)=>i.concat(r),[]))),t}let Lt=null;const Bg=4e3;function Ng(s,e=Qg){let t=Object.create(null),i=Object.create(null),r=(o,l)=>{let a=i[o];if(a==null)i[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},n=(o,l,a,u,h)=>{var f,c;let d=t[o]||(t[o]=Object.create(null)),g=l.split(/ (?!$)/).map(y=>_g(y,e));for(let y=1;y<g.length;y++){let O=g.slice(0,y).join(" ");r(O,!0),d[O]||(d[O]={preventDefault:!0,stopPropagation:!1,run:[w=>{let b=Lt={view:w,prefix:O,scope:o};return setTimeout(()=>{Lt==b&&(Lt=null)},Bg),!0}]})}let p=g.join(" ");r(p,!1);let m=d[p]||(d[p]={preventDefault:!1,stopPropagation:!1,run:((c=(f=d._any)===null||f===void 0?void 0:f.run)===null||c===void 0?void 0:c.slice())||[]});a&&m.run.push(a),u&&(m.preventDefault=!0),h&&(m.stopPropagation=!0)};for(let o of s){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of l){let h=t[u]||(t[u]=Object.create(null));h._any||(h._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:f}=o;for(let c in h)h[c].run.push(d=>f(d,wo))}let a=o[e]||o.key;if(a)for(let u of l)n(u,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&n(u,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return t}let wo=null;function Fg(s,e,t,i){wo=e;let r=sp(e),n=Fd(r,0),o=qd(n)==r.length&&r!=" ",l="",a=!1,u=!1,h=!1;Lt&&Lt.view==t&&Lt.scope==i&&(l=Lt.prefix+" ",Qf.indexOf(e.keyCode)<0&&(u=!0,Lt=null));let f=new Set,c=m=>{if(m){for(let y of m.run)if(!f.has(y)&&(f.add(y),y(t)))return m.stopPropagation&&(h=!0),!0;m.preventDefault&&(m.stopPropagation&&(h=!0),u=!0)}return!1},d=s[i],g,p;return d&&(c(d[l+Vr(r,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(q.windows&&e.ctrlKey&&e.altKey)&&!(q.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(g=$t[e.keyCode])&&g!=r?(c(d[l+Vr(g,e,!0)])||e.shiftKey&&(p=Xi[e.keyCode])!=r&&p!=g&&c(d[l+Vr(p,e,!1)]))&&(a=!0):o&&e.shiftKey&&c(d[l+Vr(r,e,!0)])&&(a=!0),!a&&c(d._any)&&(a=!0)),u&&(a=!0),a&&h&&e.stopPropagation(),wo=null,a}class si extends bi{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}si.prototype.elementClass="";si.prototype.toDOM=void 0;si.prototype.mapMode=Ke.TrackBefore;si.prototype.startSide=si.prototype.endSide=-1;si.prototype.point=!0;const Mn=j.define(),qg=j.define(),ts=j.define(),ph=j.define({combine:s=>s.some(e=>e)});function zg(s){return[Wg]}const Wg=Ut.fromClass(class{constructor(s){this.view=s,this.domAfter=null,this.prevViewport=s.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=s.state.facet(ts).map(e=>new mh(s,e)),this.fixed=!s.state.facet(ph);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),s.scrollDOM.insertBefore(this.dom,s.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(s){if(this.updateGutters(s)){let e=this.prevViewport,t=s.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}if(s.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(ph)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=s.view.viewport}syncGutters(s){let e=this.dom.nextSibling;s&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=ue.iter(this.view.state.facet(Mn),this.view.viewport.from),i=[],r=this.gutters.map(n=>new $g(n,this.view.viewport,-this.view.documentPadding.top));for(let n of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(n.type)){let o=!0;for(let l of n.type)if(l.type==Je.Text&&o){So(t,i,l.from);for(let a of r)a.line(this.view,l,i);o=!1}else if(l.widget)for(let a of r)a.widget(this.view,l)}else if(n.type==Je.Text){So(t,i,n.from);for(let o of r)o.line(this.view,n,i)}else if(n.widget)for(let o of r)o.widget(this.view,n);for(let n of r)n.finish();s&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(s){let e=s.startState.facet(ts),t=s.state.facet(ts),i=s.docChanged||s.heightChanged||s.viewportChanged||!ue.eq(s.startState.facet(Mn),s.state.facet(Mn),s.view.viewport.from,s.view.viewport.to);if(e==t)for(let r of this.gutters)r.update(s)&&(i=!0);else{i=!0;let r=[];for(let n of t){let o=e.indexOf(n);o<0?r.push(new mh(this.view,n)):(this.gutters[o].update(s),r.push(this.gutters[o]))}for(let n of this.gutters)n.dom.remove(),r.indexOf(n)<0&&n.destroy();for(let n of r)n.config.side=="after"?this.getDOMAfter().appendChild(n.dom):this.dom.appendChild(n.dom);this.gutters=r}return i}destroy(){for(let s of this.gutters)s.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:s=>K.scrollMargins.of(e=>{let t=e.plugin(s);if(!t||t.gutters.length==0||!t.fixed)return null;let i=t.dom.offsetWidth*e.scaleX,r=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Te.LTR?{left:i,right:r}:{right:i,left:r}})});function gh(s){return Array.isArray(s)?s:[s]}function So(s,e,t){for(;s.value&&s.from<=t;)s.from==t&&e.push(s.value),s.next()}class $g{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=ue.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:r}=this,n=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==r.elements.length){let l=new Uf(e,o,n,i);r.elements.push(l),r.dom.appendChild(l.dom)}else r.elements[this.i].update(e,o,n,i);this.height=t.bottom,this.i++}line(e,t,i){let r=[];So(this.cursor,r,t.from),i.length&&(r=r.concat(i));let n=this.gutter.config.lineMarker(e,t,r);n&&r.unshift(n);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,r)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),r=i?[i]:null;for(let n of e.state.facet(qg)){let o=n(e,t.widget,t);o&&(r||(r=[])).push(o)}r&&this.addElement(e,t,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class mh{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,r=>{let n=r.target,o;if(n!=this.dom&&this.dom.contains(n)){for(;n.parentNode!=this.dom;)n=n.parentNode;let a=n.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=r.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[i](e,l,r)&&r.preventDefault()});this.markers=gh(t.markers(e)),t.initialSpacer&&(this.spacer=new Uf(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=gh(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!ue.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Uf{constructor(e,t,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,r)}update(e,t,i,r){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),Vg(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let i="cm-gutterElement",r=this.dom.firstChild;for(let n=0,o=0;;){let l=o,a=n<t.length?t[n++]:null,u=!1;if(a){let h=a.elementClass;h&&(i+=" "+h);for(let f=o;f<this.markers.length;f++)if(this.markers[f].compare(a)){l=f,u=!0;break}}else l=this.markers.length;for(;o<l;){let h=this.markers[o++];if(h.toDOM){h.destroy(r);let f=r.nextSibling;r.remove(),r=f}}if(!a)break;a.toDOM&&(u?r=r.nextSibling:this.dom.insertBefore(a.toDOM(e),r)),u&&o++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function Vg(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++)if(!s[t].compare(e[t]))return!1;return!0}const Ug=j.define(),jg=j.define(),ci=j.define({combine(s){return Zd(s,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let r in t){let n=i[r],o=t[r];i[r]=n?(l,a,u)=>n(l,a,u)||o(l,a,u):o}return i}})}});class Rn extends si{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Dn(s,e){return s.state.facet(ci).formatNumber(e,s.state)}const Hg=ts.compute([ci],s=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(Ug)},lineMarker(e,t,i){return i.some(r=>r.toDOM)?null:new Rn(Dn(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,i)=>{for(let r of e.state.facet(jg)){let n=r(e,t,i);if(n)return n}return null},lineMarkerChange:e=>e.startState.facet(ci)!=e.state.facet(ci),initialSpacer(e){return new Rn(Dn(e,yh(e.state.doc.lines)))},updateSpacer(e,t){let i=Dn(t.view,yh(t.view.state.doc.lines));return i==e.number?e:new Rn(i)},domEventHandlers:s.facet(ci).domEventHandlers,side:"before"}));function Yg(s={}){return[ci.of(s),zg(),Hg]}function yh(s){let e=9;for(;e<s;)e=e*10+9;return e}const jf=1024;let Xg=0;class Qn{constructor(e,t){this.from=e,this.to=t}}class ee{constructor(e={}){this.id=Xg++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=He.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}ee.closedBy=new ee({deserialize:s=>s.split(" ")});ee.openedBy=new ee({deserialize:s=>s.split(" ")});ee.group=new ee({deserialize:s=>s.split(" ")});ee.isolate=new ee({deserialize:s=>{if(s&&s!="rtl"&&s!="ltr"&&s!="auto")throw new RangeError("Invalid value for isolate: "+s);return s||"auto"}});ee.contextHash=new ee({perNode:!0});ee.lookAhead=new ee({perNode:!0});ee.mounted=new ee({perNode:!0});class ps{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[ee.mounted.id]}}const Gg=Object.create(null);class He{constructor(e,t,i,r=0){this.name=e,this.props=t,this.id=i,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):Gg,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new He(e.name||"",t,e.id,i);if(e.props){for(let n of e.props)if(Array.isArray(n)||(n=n(r)),n){if(n[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[n[0].id]=n[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(ee.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let r of i.split(" "))t[r]=e[i];return i=>{for(let r=i.prop(ee.group),n=-1;n<(r?r.length:0);n++){let o=t[n<0?i.name:r[n]];if(o)return o}}}}He.none=new He("",Object.create(null),0,8);class il{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let r=null;for(let n of e){let o=n(i);if(o){r||(r=Object.assign({},i.props));let l=o[1],a=o[0];a.combine&&a.id in r&&(l=a.combine(r[a.id],l)),r[a.id]=l}}t.push(r?new He(i.name,r,i.id,i.flags):i)}return new il(t)}}const Ur=new WeakMap,vh=new WeakMap;var Ae;(function(s){s[s.ExcludeBuffers=1]="ExcludeBuffers",s[s.IncludeAnonymous=2]="IncludeAnonymous",s[s.IgnoreMounts=4]="IgnoreMounts",s[s.IgnoreOverlays=8]="IgnoreOverlays"})(Ae||(Ae={}));class Ce{constructor(e,t,i,r,n){if(this.type=e,this.children=t,this.positions=i,this.length=r,this.props=null,n&&n.length){this.props=Object.create(null);for(let[o,l]of n)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=ps.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let r=i.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new ko(this.topNode,e)}cursorAt(e,t=0,i=0){let r=Ur.get(this)||this.topNode,n=new ko(r);return n.moveTo(e,t),Ur.set(this,n._tree),n}get topNode(){return new je(this,0,0,null)}resolve(e,t=0){let i=Ji(Ur.get(this)||this.topNode,e,t,!1);return Ur.set(this,i),i}resolveInner(e,t=0){let i=Ji(vh.get(this)||this.topNode,e,t,!0);return vh.set(this,i),i}resolveStack(e,t=0){return Jg(this,e,t)}iterate(e){let{enter:t,leave:i,from:r=0,to:n=this.length}=e,o=e.mode||0,l=(o&Ae.IncludeAnonymous)>0;for(let a=this.cursor(o|Ae.IncludeAnonymous);;){let u=!1;if(a.from<=n&&a.to>=r&&(!l&&a.type.isAnonymous||t(a)!==!1)){if(a.firstChild())continue;u=!0}for(;u&&i&&(l||!a.type.isAnonymous)&&i(a),!a.nextSibling();){if(!a.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:nl(He.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,r)=>new Ce(this.type,t,i,r,this.propValues),e.makeTree||((t,i,r)=>new Ce(He.none,t,i,r)))}static build(e){return em(e)}}Ce.empty=new Ce(He.none,[],[],0);class rl{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new rl(this.buffer,this.index)}}class jt{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return He.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],r=this.set.types[t],n=r.name;if(/\W/.test(n)&&!r.isError&&(n=JSON.stringify(n)),e+=4,i==e)return n;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return n+"("+o.join(",")+")"}findChild(e,t,i,r,n){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(Hf(n,r,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,t,i){let r=this.buffer,n=new Uint16Array(t-e),o=0;for(let l=e,a=0;l<t;){n[a++]=r[l++],n[a++]=r[l++]-i;let u=n[a++]=r[l++]-i;n[a++]=r[l++]-e,o=Math.max(o,u)}return new jt(n,o,this.set)}}function Hf(s,e,t,i){switch(s){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function Ji(s,e,t,i){for(var r;s.from==s.to||(t<1?s.from>=e:s.from>e)||(t>-1?s.to<=e:s.to<e);){let o=!i&&s instanceof je&&s.index<0?null:s.parent;if(!o)return s;s=o}let n=i?0:Ae.IgnoreOverlays;if(i)for(let o=s,l=o.parent;l;o=l,l=o.parent)o instanceof je&&o.index<0&&((r=l.enter(e,t,n))===null||r===void 0?void 0:r.from)!=o.from&&(s=l);for(;;){let o=s.enter(e,t,n);if(!o)return s;s=o}}class Yf{cursor(e=0){return new ko(this,e)}getChild(e,t=null,i=null){let r=Oh(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return Oh(this,e,t,i)}resolve(e,t=0){return Ji(this,e,t,!1)}resolveInner(e,t=0){return Ji(this,e,t,!0)}matchContext(e){return xo(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(i=t,t=r.prevSibling):t=r}return i}get node(){return this}get next(){return this.parent}}class je extends Yf{constructor(e,t,i,r){super(),this._tree=e,this.from=t,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,r,n=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,u=t>0?l.length:-1;e!=u;e+=t){let h=l[e],f=a[e]+o.from;if(Hf(r,i,f,f+h.length)){if(h instanceof jt){if(n&Ae.ExcludeBuffers)continue;let c=h.findChild(0,h.buffer.length,t,i-f,r);if(c>-1)return new wt(new Kg(o,h,e,f),null,c)}else if(n&Ae.IncludeAnonymous||!h.type.isAnonymous||sl(h)){let c;if(!(n&Ae.IgnoreMounts)&&(c=ps.get(h))&&!c.overlay)return new je(c.tree,f,e,o);let d=new je(h,f,e,o);return n&Ae.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?h.children.length-1:0,t,i,r)}}}if(n&Ae.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,t,i=0){let r;if(!(i&Ae.IgnoreOverlays)&&(r=ps.get(this._tree))&&r.overlay){let n=e-this.from;for(let{from:o,to:l}of r.overlay)if((t>0?o<=n:o<n)&&(t<0?l>=n:l>n))return new je(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Oh(s,e,t,i){let r=s.cursor(),n=[];if(!r.firstChild())return n;if(t!=null){for(let o=!1;!o;)if(o=r.type.is(t),!r.nextSibling())return n}for(;;){if(i!=null&&r.type.is(i))return n;if(r.type.is(e)&&n.push(r.node),!r.nextSibling())return i==null?n:[]}}function xo(s,e,t=e.length-1){for(let i=s;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class Kg{constructor(e,t,i,r){this.parent=e,this.buffer=t,this.index=i,this.start=r}}class wt extends Yf{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:r}=this.context,n=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,i);return n<0?null:new wt(this.context,this,n)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,t,i=0){if(i&Ae.ExcludeBuffers)return null;let{buffer:r}=this.context,n=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return n<0?null:new wt(this.context,this,n)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new wt(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new wt(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,r=this.index+4,n=i.buffer[this.index+3];if(n>r){let o=i.buffer[this.index+1];e.push(i.slice(r,n,o)),t.push(0)}return new Ce(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Xf(s){if(!s.length)return null;let e=0,t=s[0];for(let n=1;n<s.length;n++){let o=s[n];(o.from>t.from||o.to<t.to)&&(t=o,e=n)}let i=t instanceof je&&t.index<0?null:t.parent,r=s.slice();return i?r[e]=i:r.splice(e,1),new Zg(r,t)}class Zg{constructor(e,t){this.heads=e,this.node=t}get next(){return Xf(this.heads)}}function Jg(s,e,t){let i=s.resolveInner(e,t),r=null;for(let n=i instanceof je?i:i.context.parent;n;n=n.parent)if(n.index<0){let o=n.parent;(r||(r=[i])).push(o.resolve(e,t)),n=o}else{let o=ps.get(n.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new je(o.tree,o.overlay[0].from+n.from,-1,n);(r||(r=[i])).push(Ji(l,e,t,!1))}}return r?Xf(r):i}class ko{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof je)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof je?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:r}=this.buffer,n=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,i);return n<0?!1:(this.stack.push(this.index),this.yieldBuf(n))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Ae.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ae.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ae.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let n=0;n<this.index;n++)if(r.buffer.buffer[n+3]<this.index)return!1;({index:t,parent:i}=r)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let n=t+e,o=e<0?-1:i._tree.children.length;n!=o;n+=e){let l=i._tree.children[n];if(this.mode&Ae.IncludeAnonymous||l instanceof jt||!l.type.isAnonymous||sl(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,n=this.stack.length;n>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,i=n+1;break e}r=this.stack[--n]}for(let r=i;r<this.stack.length;r++)t=new wt(this.buffer,t,this.stack[r]);return this.bufferNode=new wt(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return xo(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let r=e.length-1,n=this.stack.length-1;r>=0;n--){if(n<0)return xo(this._tree,e,r);let o=i[t.buffer[this.stack[n]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function sl(s){return s.children.some(e=>e instanceof jt||!e.type.isAnonymous||sl(e))}function em(s){var e;let{buffer:t,nodeSet:i,maxBufferLength:r=jf,reused:n=[],minRepeatType:o=i.types.length}=s,l=Array.isArray(t)?new rl(t,t.length):t,a=i.types,u=0,h=0;function f(v,S,x,A,C,k){let{id:I,start:R,end:U,size:$}=l,Q=h,V=u;if($<0)if(l.next(),$==-1){let B=n[I];x.push(B),A.push(R-v);return}else if($==-3){u=I;return}else if($==-4){h=I;return}else throw new RangeError(`Unrecognized record size: ${$}`);let te=a[I],X,ne,re=R-v;if(U-R<=r&&(ne=m(l.pos-S,C))){let B=new Uint16Array(ne.size-ne.skip),N=l.pos-ne.size,T=B.length;for(;l.pos>N;)T=y(ne.start,B,T);X=new jt(B,U-ne.start,i),re=ne.start-v}else{let B=l.pos-$;l.next();let N=[],T=[],P=I>=o?I:-1,D=0,W=U;for(;l.pos>B;)P>=0&&l.id==P&&l.size>=0?(l.end<=W-r&&(g(N,T,R,D,l.end,W,P,Q,V),D=N.length,W=l.end),l.next()):k>2500?c(R,B,N,T):f(R,B,N,T,P,k+1);if(P>=0&&D>0&&D<N.length&&g(N,T,R,D,R,W,P,Q,V),N.reverse(),T.reverse(),P>-1&&D>0){let E=d(te,V);X=nl(te,N,T,0,N.length,0,U-R,E,E)}else X=p(te,N,T,U-R,Q-U,V)}x.push(X),A.push(re)}function c(v,S,x,A){let C=[],k=0,I=-1;for(;l.pos>S;){let{id:R,start:U,end:$,size:Q}=l;if(Q>4)l.next();else{if(I>-1&&U<I)break;I<0&&(I=$-r),C.push(R,U,$),k++,l.next()}}if(k){let R=new Uint16Array(k*4),U=C[C.length-2];for(let $=C.length-3,Q=0;$>=0;$-=3)R[Q++]=C[$],R[Q++]=C[$+1]-U,R[Q++]=C[$+2]-U,R[Q++]=Q;x.push(new jt(R,C[2]-U,i)),A.push(U-v)}}function d(v,S){return(x,A,C)=>{let k=0,I=x.length-1,R,U;if(I>=0&&(R=x[I])instanceof Ce){if(!I&&R.type==v&&R.length==C)return R;(U=R.prop(ee.lookAhead))&&(k=A[I]+R.length+U)}return p(v,x,A,C,k,S)}}function g(v,S,x,A,C,k,I,R,U){let $=[],Q=[];for(;v.length>A;)$.push(v.pop()),Q.push(S.pop()+x-C);v.push(p(i.types[I],$,Q,k-C,R-k,U)),S.push(C-x)}function p(v,S,x,A,C,k,I){if(k){let R=[ee.contextHash,k];I=I?[R].concat(I):[R]}if(C>25){let R=[ee.lookAhead,C];I=I?[R].concat(I):[R]}return new Ce(v,S,x,A,I)}function m(v,S){let x=l.fork(),A=0,C=0,k=0,I=x.end-r,R={size:0,start:0,skip:0};e:for(let U=x.pos-v;x.pos>U;){let $=x.size;if(x.id==S&&$>=0){R.size=A,R.start=C,R.skip=k,k+=4,A+=4,x.next();continue}let Q=x.pos-$;if($<0||Q<U||x.start<I)break;let V=x.id>=o?4:0,te=x.start;for(x.next();x.pos>Q;){if(x.size<0)if(x.size==-3||x.size==-4)V+=4;else break e;else x.id>=o&&(V+=4);x.next()}C=te,A+=$,k+=V}return(S<0||A==v)&&(R.size=A,R.start=C,R.skip=k),R.size>4?R:void 0}function y(v,S,x){let{id:A,start:C,end:k,size:I}=l;if(l.next(),I>=0&&A<o){let R=x;if(I>4){let U=l.pos-(I-4);for(;l.pos>U;)x=y(v,S,x)}S[--x]=R,S[--x]=k-v,S[--x]=C-v,S[--x]=A}else I==-3?u=A:I==-4&&(h=A);return x}let O=[],w=[];for(;l.pos>0;)f(s.start||0,s.bufferStart||0,O,w,-1,0);let b=(e=s.length)!==null&&e!==void 0?e:O.length?w[0]+O[0].length:0;return new Ce(a[s.topID],O.reverse(),w.reverse(),b)}const bh=new WeakMap;function is(s,e){if(!s.isAnonymous||e instanceof jt||e.type!=s)return 1;let t=bh.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=s||!(i instanceof Ce)){t=1;break}t+=is(s,i)}bh.set(e,t)}return t}function nl(s,e,t,i,r,n,o,l,a){let u=0;for(let g=i;g<r;g++)u+=is(s,e[g]);let h=Math.ceil(u*1.5/8),f=[],c=[];function d(g,p,m,y,O){for(let w=m;w<y;){let b=w,v=p[w],S=is(s,g[w]);for(w++;w<y;w++){let x=is(s,g[w]);if(S+x>=h)break;S+=x}if(w==b+1){if(S>h){let x=g[b];d(x.children,x.positions,0,x.children.length,p[b]+O);continue}f.push(g[b])}else{let x=p[w-1]+g[w-1].length-v;f.push(nl(s,g,p,b,w,v,x,null,a))}c.push(v+O-n)}}return d(e,t,i,r,0),(l||a)(f,c,o)}class tm{constructor(){this.map=new WeakMap}setBuffer(e,t,i){let r=this.map.get(e);r||this.map.set(e,r=new Map),r.set(t,i)}getBuffer(e,t){let i=this.map.get(e);return i&&i.get(t)}set(e,t){e instanceof wt?this.setBuffer(e.context.buffer,e.index,t):e instanceof je&&this.map.set(e.tree,t)}get(e){return e instanceof wt?this.getBuffer(e.context.buffer,e.index):e instanceof je?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class ei{constructor(e,t,i,r,n=!1,o=!1){this.from=e,this.to=t,this.tree=i,this.offset=r,this.open=(n?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let r=[new ei(0,e.length,e,0,!1,i)];for(let n of t)n.to>e.length&&r.push(n);return r}static applyChanges(e,t,i=128){if(!t.length)return e;let r=[],n=1,o=e.length?e[0]:null;for(let l=0,a=0,u=0;;l++){let h=l<t.length?t[l]:null,f=h?h.fromA:1e9;if(f-a>=i)for(;o&&o.from<f;){let c=o;if(a>=c.from||f<=c.to||u){let d=Math.max(c.from,a)-u,g=Math.min(c.to,f)-u;c=d>=g?null:new ei(d,g,c.tree,c.offset+u,l>0,!!h)}if(c&&r.push(c),o.to>f)break;o=n<e.length?e[n++]:null}if(!h)break;a=h.toA,u=h.toA-h.toB}return r}}class Gf{startParse(e,t,i){return typeof e=="string"&&(e=new im(e)),i=i?i.length?i.map(r=>new Qn(r.from,r.to)):[new Qn(0,0)]:[new Qn(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let r=this.startParse(e,t,i);for(;;){let n=r.advance();if(n)return n}}}class im{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new ee({perNode:!0});let rm=0;class Ze{constructor(e,t,i,r){this.name=e,this.set=t,this.base=i,this.modified=r,this.id=rm++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i=typeof e=="string"?e:"?";if(e instanceof Ze&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let r=new Ze(i,[],null,[]);if(r.set.push(r),t)for(let n of t.set)r.set.push(n);return r}static defineModifier(e){let t=new gs(e);return i=>i.modified.indexOf(t)>-1?i:gs.get(i.base||i,i.modified.concat(t).sort((r,n)=>r.id-n.id))}}let sm=0;class gs{constructor(e){this.name=e,this.instances=[],this.id=sm++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&nm(t,l.modified));if(i)return i;let r=[],n=new Ze(e.name,r,e,t);for(let l of t)l.instances.push(n);let o=om(t);for(let l of e.set)if(!l.modified.length)for(let a of o)r.push(gs.get(l,a));return n}}function nm(s,e){return s.length==e.length&&s.every((t,i)=>t==e[i])}function om(s){let e=[[]];for(let t=0;t<s.length;t++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(s[t]));return e.sort((t,i)=>i.length-t.length)}function Kf(s){let e=Object.create(null);for(let t in s){let i=s[t];Array.isArray(i)||(i=[i]);for(let r of t.split(" "))if(r){let n=[],o=2,l=r;for(let f=0;;){if(l=="..."&&f>0&&f+3==r.length){o=1;break}let c=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!c)throw new RangeError("Invalid path: "+r);if(n.push(c[0]=="*"?"":c[0][0]=='"'?JSON.parse(c[0]):c[0]),f+=c[0].length,f==r.length)break;let d=r[f++];if(f==r.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+r);l=r.slice(f)}let a=n.length-1,u=n[a];if(!u)throw new RangeError("Invalid path: "+r);let h=new er(i,o,a>0?n.slice(0,a):null);e[u]=h.sort(e[u])}}return Zf.add(e)}const Zf=new ee({combine(s,e){let t,i,r;for(;s||e;){if(!s||e&&s.depth>=e.depth?(r=e,e=e.next):(r=s,s=s.next),t&&t.mode==r.mode&&!r.context&&!t.context)continue;let n=new er(r.tags,r.mode,r.context);t?t.next=n:i=n,t=n}return i}});class er{constructor(e,t,i,r){this.tags=e,this.mode=t,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}er.empty=new er([],2,null);function Jf(s,e){let t=Object.create(null);for(let n of s)if(!Array.isArray(n.tag))t[n.tag.id]=n.class;else for(let o of n.tag)t[o.id]=n.class;let{scope:i,all:r=null}=e||{};return{style:n=>{let o=r;for(let l of n)for(let a of l.set){let u=t[a.id];if(u){o=o?o+" "+u:u;break}}return o},scope:i}}function lm(s,e){let t=null;for(let i of s){let r=i.style(e);r&&(t=t?t+" "+r:r)}return t}function am(s,e,t,i=0,r=s.length){let n=new hm(i,Array.isArray(e)?e:[e],t);n.highlightRange(s.cursor(),i,r,"",n.highlighters),n.flush(r)}class hm{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,r,n){let{type:o,from:l,to:a}=e;if(l>=i||a<=t)return;o.isTop&&(n=this.highlighters.filter(d=>!d.scope||d.scope(o)));let u=r,h=um(e)||er.empty,f=lm(n,h.tags);if(f&&(u&&(u+=" "),u+=f,h.mode==1&&(r+=(r?" ":"")+f)),this.startSpan(Math.max(t,l),u),h.opaque)return;let c=e.tree&&e.tree.prop(ee.mounted);if(c&&c.overlay){let d=e.node.enter(c.overlay[0].from+l,1),g=this.highlighters.filter(m=>!m.scope||m.scope(c.tree.type)),p=e.firstChild();for(let m=0,y=l;;m++){let O=m<c.overlay.length?c.overlay[m]:null,w=O?O.from+l:a,b=Math.max(t,y),v=Math.min(i,w);if(b<v&&p)for(;e.from<v&&(this.highlightRange(e,b,v,r,n),this.startSpan(Math.min(v,e.to),u),!(e.to>=w||!e.nextSibling())););if(!O||w>i)break;y=O.to+l,y>t&&(this.highlightRange(d.cursor(),Math.max(t,O.from+l),Math.min(i,y),"",g),this.startSpan(Math.min(i,y),u))}p&&e.parent()}else if(e.firstChild()){c&&(r="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,r,n),this.startSpan(Math.min(i,e.to),u)}while(e.nextSibling());e.parent()}}}function um(s){let e=s.type.prop(Zf);for(;e&&e.context&&!s.matchContext(e.context);)e=e.next;return e||null}const F=Ze.define,jr=F(),_t=F(),wh=F(_t),Sh=F(_t),It=F(),Hr=F(It),_n=F(It),yt=F(),Xt=F(yt),gt=F(),mt=F(),Co=F(),Di=F(Co),Yr=F(),M={comment:jr,lineComment:F(jr),blockComment:F(jr),docComment:F(jr),name:_t,variableName:F(_t),typeName:wh,tagName:F(wh),propertyName:Sh,attributeName:F(Sh),className:F(_t),labelName:F(_t),namespace:F(_t),macroName:F(_t),literal:It,string:Hr,docString:F(Hr),character:F(Hr),attributeValue:F(Hr),number:_n,integer:F(_n),float:F(_n),bool:F(It),regexp:F(It),escape:F(It),color:F(It),url:F(It),keyword:gt,self:F(gt),null:F(gt),atom:F(gt),unit:F(gt),modifier:F(gt),operatorKeyword:F(gt),controlKeyword:F(gt),definitionKeyword:F(gt),moduleKeyword:F(gt),operator:mt,derefOperator:F(mt),arithmeticOperator:F(mt),logicOperator:F(mt),bitwiseOperator:F(mt),compareOperator:F(mt),updateOperator:F(mt),definitionOperator:F(mt),typeOperator:F(mt),controlOperator:F(mt),punctuation:Co,separator:F(Co),bracket:Di,angleBracket:F(Di),squareBracket:F(Di),paren:F(Di),brace:F(Di),content:yt,heading:Xt,heading1:F(Xt),heading2:F(Xt),heading3:F(Xt),heading4:F(Xt),heading5:F(Xt),heading6:F(Xt),contentSeparator:F(yt),list:F(yt),quote:F(yt),emphasis:F(yt),strong:F(yt),link:F(yt),monospace:F(yt),strikethrough:F(yt),inserted:F(),deleted:F(),changed:F(),invalid:F(),meta:Yr,documentMeta:F(Yr),annotation:F(Yr),processingInstruction:F(Yr),definition:Ze.defineModifier("definition"),constant:Ze.defineModifier("constant"),function:Ze.defineModifier("function"),standard:Ze.defineModifier("standard"),local:Ze.defineModifier("local"),special:Ze.defineModifier("special")};for(let s in M){let e=M[s];e instanceof Ze&&(e.name=s)}Jf([{tag:M.link,class:"tok-link"},{tag:M.heading,class:"tok-heading"},{tag:M.emphasis,class:"tok-emphasis"},{tag:M.strong,class:"tok-strong"},{tag:M.keyword,class:"tok-keyword"},{tag:M.atom,class:"tok-atom"},{tag:M.bool,class:"tok-bool"},{tag:M.url,class:"tok-url"},{tag:M.labelName,class:"tok-labelName"},{tag:M.inserted,class:"tok-inserted"},{tag:M.deleted,class:"tok-deleted"},{tag:M.literal,class:"tok-literal"},{tag:M.string,class:"tok-string"},{tag:M.number,class:"tok-number"},{tag:[M.regexp,M.escape,M.special(M.string)],class:"tok-string2"},{tag:M.variableName,class:"tok-variableName"},{tag:M.local(M.variableName),class:"tok-variableName tok-local"},{tag:M.definition(M.variableName),class:"tok-variableName tok-definition"},{tag:M.special(M.variableName),class:"tok-variableName2"},{tag:M.definition(M.propertyName),class:"tok-propertyName tok-definition"},{tag:M.typeName,class:"tok-typeName"},{tag:M.namespace,class:"tok-namespace"},{tag:M.className,class:"tok-className"},{tag:M.macroName,class:"tok-macroName"},{tag:M.propertyName,class:"tok-propertyName"},{tag:M.operator,class:"tok-operator"},{tag:M.comment,class:"tok-comment"},{tag:M.meta,class:"tok-meta"},{tag:M.invalid,class:"tok-invalid"},{tag:M.punctuation,class:"tok-punctuation"}]);var In;const di=new ee;function fm(s){return j.define({combine:s?e=>e.concat(s):void 0})}const cm=new ee;class lt{constructor(e,t,i=[],r=""){this.data=e,this.name=r,he.prototype.hasOwnProperty("tree")||Object.defineProperty(he.prototype,"tree",{get(){return ut(this)}}),this.parser=t,this.extension=[Ci.of(this),he.languageData.of((n,o,l)=>{let a=xh(n,o,l),u=a.type.prop(di);if(!u)return[];let h=n.facet(u),f=a.type.prop(cm);if(f){let c=a.resolve(o-a.from,l);for(let d of f)if(d.test(c,n)){let g=n.facet(d.facet);return d.type=="replace"?g:g.concat(h)}}return h})].concat(i)}isActiveAt(e,t,i=-1){return xh(e,t,i).type.prop(di)==this.data}findRegions(e){let t=e.facet(Ci);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],r=(n,o)=>{if(n.prop(di)==this.data){i.push({from:o,to:o+n.length});return}let l=n.prop(ee.mounted);if(l){if(l.tree.prop(di)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+n.length});return}else if(l.overlay){let a=i.length;if(r(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<n.children.length;a++){let u=n.children[a];u instanceof Ce&&r(u,n.positions[a]+o)}};return r(ut(e),0),i}get allowsNesting(){return!0}}lt.setState=Pe.define();function xh(s,e,t){let i=s.facet(Ci),r=ut(s).topNode;if(!i||i.allowsNesting)for(let n=r;n;n=n.enter(e,t,Ae.ExcludeBuffers))n.type.isTop&&(r=n);return r}class ms extends lt{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=fm(e.languageData);return new ms(t,e.parser.configure({props:[di.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new ms(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function ut(s){let e=s.field(lt.state,!1);return e?e.tree:Ce.empty}class dm{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let Qi=null;class ys{constructor(e,t,i=[],r,n,o,l,a){this.parser=e,this.state=t,this.fragments=i,this.tree=r,this.treeLen=n,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new ys(e,t,[],Ce.empty,0,i,[],null)}startParse(){return this.parser.startParse(new dm(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Ce.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(ei.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(ei.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Qi;Qi=this;try{return e()}finally{Qi=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=kh(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:r,treeLen:n,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((u,h,f,c)=>a.push({fromA:u,toA:h,fromB:f,toB:c})),i=ei.applyChanges(i,a),r=Ce.empty,n=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let u of this.skipped){let h=e.mapPos(u.from,1),f=e.mapPos(u.to,-1);h<f&&l.push({from:h,to:f})}}}return new ys(this.parser,t,i,r,n,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:n}=this.skipped[i];r<e.to&&n>e.from&&(this.fragments=kh(this.fragments,r,n),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Gf{createParse(t,i,r){let n=r[0].from,o=r[r.length-1].to;return{parsedPos:n,advance(){let a=Qi;if(a){for(let u of r)a.tempSkipped.push(u);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new Ce(He.none,[],[],o-n)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Qi}}function kh(s,e,t){return ei.applyChanges(s,[{fromA:e,toA:t,fromB:e,toB:t}])}class ki{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new ki(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=ys.create(e.facet(Ci).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new ki(i)}}lt.state=hi.define({create:ki.init,update(s,e){for(let t of e.effects)if(t.is(lt.setState))return t.value;return e.startState.facet(Ci)!=e.state.facet(Ci)?ki.init(e.state):s.apply(e)}});let ec=s=>{let e=setTimeout(()=>s(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(ec=s=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(s,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Ln=typeof navigator<"u"&&(!((In=navigator.scheduling)===null||In===void 0)&&In.isInputPending)?()=>navigator.scheduling.isInputPending():null,pm=Ut.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(lt.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(lt.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=ec(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,n=i.field(lt.state);if(n.tree==n.context.tree&&n.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Ln?Math.max(25,e.timeRemaining()-5):1e9),l=n.context.treeLen<r&&i.doc.length>r+1e3,a=n.context.work(()=>Ln&&Ln()||Date.now()>o,r+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(n.context.takeTree(),this.view.dispatch({effects:lt.setState.of(new ki(n.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(n.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>bt(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ci=j.define({combine(s){return s.length?s[0]:null},enables:s=>[lt.state,pm,K.contentAttributes.compute([s],e=>{let t=e.facet(s);return t&&t.name?{"data-language":t.name}:{}})]});class gm{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const mm=j.define(),ol=j.define({combine:s=>{if(!s.length)return"  ";let e=s[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(s[0]));return e}});function vs(s){let e=s.facet(ol);return e.charCodeAt(0)==9?s.tabSize*e.length:e.length}function Os(s,e){let t="",i=s.tabSize,r=s.facet(ol)[0];if(r=="	"){for(;e>=i;)t+="	",e-=i;r=" "}for(let n=0;n<e;n++)t+=r;return t}function tc(s,e){s instanceof he&&(s=new Ls(s));for(let i of s.state.facet(mm)){let r=i(s,e);if(r!==void 0)return r}let t=ut(s.state);return t.length>=e?ym(s,t,e):null}class Ls{constructor(e,t={}){this.state=e,this.options=t,this.unit=vs(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:n}=this.options;return r!=null&&r>=i.from&&r<=i.to?n&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,t);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,t=1){let{text:i,from:r}=this.lineAt(e,t),n=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(n+=o-this.countColumn(i,i.search(/\S|$/))),n}countColumn(e,t=e.length){return Ds(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:r}=this.lineAt(e,t),n=this.options.overrideIndentation;if(n){let o=n(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const ic=new ee;function ym(s,e,t){let i=e.resolveStack(t),r=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(r!=i.node){let n=[];for(let o=r;o&&!(o.from<i.node.from||o.to>i.node.to||o.from==i.node.from&&o.type==i.node.type);o=o.parent)n.push(o);for(let o=n.length-1;o>=0;o--)i={node:n[o],next:i}}return rc(i,s,t)}function rc(s,e,t){for(let i=s;i;i=i.next){let r=Om(i.node);if(r)return r(ll.create(e,t,i))}return 0}function vm(s){return s.pos==s.options.simulateBreak&&s.options.simulateDoubleBreak}function Om(s){let e=s.type.prop(ic);if(e)return e;let t=s.firstChild,i;if(t&&(i=t.type.prop(ee.closedBy))){let r=s.lastChild,n=r&&i.indexOf(r.name)>-1;return o=>xm(o,!0,1,void 0,n&&!vm(o)?r.from:void 0)}return s.parent==null?bm:null}function bm(){return 0}class ll extends Ls{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new ll(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(wm(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return rc(this.context.next,this.base,this.pos)}}function wm(s,e){for(let t=e;t;t=t.parent)if(s==t)return!0;return!1}function Sm(s){let e=s.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let r=s.options.simulateBreak,n=s.state.doc.lineAt(t.from),o=r==null||r<=n.from?n.to:Math.min(n.to,r);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped){if(a.from>=o)return null;let u=/^ */.exec(n.text.slice(t.to-n.from))[0].length;return{from:t.from,to:t.to+u}}l=a.to}}function xm(s,e,t,i,r){let n=s.textAfter,o=n.match(/^\s*/)[0].length,l=i&&n.slice(o,o+i.length)==i||r==s.pos+o,a=Sm(s);return a?l?s.column(a.from):s.column(a.to):s.baseIndent+(l?0:s.unit*t)}function km({except:s,units:e=1}={}){return t=>{let i=s&&s.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const Cm=new ee;function Am(s){let e=s.firstChild,t=s.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?s.to:t.from}:null}class Bs{constructor(e,t){this.specs=e;let i;function r(l){let a=Wt.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const n=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,o=t.scope;this.scope=o instanceof lt?l=>l.prop(di)==o.data:o?l=>l==o:void 0,this.style=Jf(e.map(l=>({tag:l.tag,class:l.class||r(Object.assign({},l,{tag:null}))})),{all:n}).style,this.module=i?new Wt(i):null,this.themeType=t.themeType}static define(e,t){return new Bs(e,t||{})}}const Ao=j.define(),Pm=j.define({combine(s){return s.length?[s[0]]:null}});function Bn(s){let e=s.facet(Ao);return e.length?e:s.facet(Pm)}function Tm(s,e){let t=[Mm],i;return s instanceof Bs&&(s.module&&t.push(K.styleModule.of(s.module)),i=s.themeType),i?t.push(Ao.computeN([K.darkTheme],r=>r.facet(K.darkTheme)==(i=="dark")?[s]:[])):t.push(Ao.of(s)),t}class Em{constructor(e){this.markCache=Object.create(null),this.tree=ut(e.state),this.decorations=this.buildDeco(e,Bn(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=ut(e.state),i=Bn(e.state),r=i!=Bn(e.startState),{viewport:n}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<n.to&&!r&&t.type==this.tree.type&&o>=n.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=n.to)}buildDeco(e,t){if(!t||!this.tree.length)return Qe.none;let i=new Hi;for(let{from:r,to:n}of e.visibleRanges)am(this.tree,t,(o,l,a)=>{i.add(o,l,this.markCache[a]||(this.markCache[a]=Qe.mark({class:a})))},r,n);return i.finish()}}const Mm=Uo.high(Ut.fromClass(Em,{decorations:s=>s.decorations})),Rm=1e4,Dm="()[]{}",Qm=new ee;function Po(s,e,t){let i=s.prop(e<0?ee.openedBy:ee.closedBy);if(i)return i;if(s.name.length==1){let r=t.indexOf(s.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}function To(s){let e=s.type.prop(Qm);return e?e(s.node):s}function pi(s,e,t,i={}){let r=i.maxScanDistance||Rm,n=i.brackets||Dm,o=ut(s),l=o.resolveInner(e,t);for(let a=l;a;a=a.parent){let u=Po(a.type,t,n);if(u&&a.from<a.to){let h=To(a);if(h&&(t>0?e>=h.from&&e<h.to:e>h.from&&e<=h.to))return _m(s,e,t,a,h,u,n)}}return Im(s,e,t,o,l.type,r,n)}function _m(s,e,t,i,r,n,o){let l=i.parent,a={from:r.from,to:r.to},u=0,h=l?.cursor();if(h&&(t<0?h.childBefore(i.from):h.childAfter(i.to)))do if(t<0?h.to<=i.from:h.from>=i.to){if(u==0&&n.indexOf(h.type.name)>-1&&h.from<h.to){let f=To(h);return{start:a,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(Po(h.type,t,o))u++;else if(Po(h.type,-t,o)){if(u==0){let f=To(h);return{start:a,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}u--}}while(t<0?h.prevSibling():h.nextSibling());return{start:a,matched:!1}}function Im(s,e,t,i,r,n,o){let l=t<0?s.sliceDoc(e-1,e):s.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=t>0)return null;let u={from:t<0?e-1:e,to:t>0?e+1:e},h=s.doc.iterRange(e,t>0?s.doc.length:0),f=0;for(let c=0;!h.next().done&&c<=n;){let d=h.value;t<0&&(c+=d.length);let g=e+c*t;for(let p=t>0?0:d.length-1,m=t>0?d.length:-1;p!=m;p+=t){let y=o.indexOf(d[p]);if(!(y<0||i.resolveInner(g+p,1).type!=r))if(y%2==0==t>0)f++;else{if(f==1)return{start:u,end:{from:g+p,to:g+p+1},matched:y>>1==a>>1};f--}}t>0&&(c+=d.length)}return h.done?{start:u,matched:!1}:null}const Lm=Object.create(null),Ch=[He.none],Ah=[],Ph=Object.create(null),Bm=Object.create(null);for(let[s,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Bm[s]=Nm(Lm,e);function Nn(s,e){Ah.indexOf(s)>-1||(Ah.push(s),console.warn(e))}function Nm(s,e){let t=[];for(let l of e.split(" ")){let a=[];for(let u of l.split(".")){let h=s[u]||M[u];h?typeof h=="function"?a.length?a=a.map(h):Nn(u,`Modifier ${u} used at start of tag`):a.length?Nn(u,`Tag ${u} used as modifier`):a=Array.isArray(h)?h:[h]:Nn(u,`Unknown highlighting tag ${u}`)}for(let u of a)t.push(u)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+t.map(l=>l.id),n=Ph[r];if(n)return n.id;let o=Ph[r]=He.define({id:Ch.length,name:i,props:[Kf({[i]:t})]});return Ch.push(o),o.id}Te.RTL,Te.LTR;const Fm=s=>{let{state:e}=s,t=e.doc.lineAt(e.selection.main.from),i=hl(s.state,t.from);return i.line?qm(s):i.block?Wm(s):!1};function al(s,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let r=s(e,t);return r?(i(t.update(r)),!0):!1}}const qm=al(Um,0),zm=al(sc,0),Wm=al((s,e)=>sc(s,e,Vm(e)),0);function hl(s,e){let t=s.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const _i=50;function $m(s,{open:e,close:t},i,r){let n=s.sliceDoc(i-_i,i),o=s.sliceDoc(r,r+_i),l=/\s*$/.exec(n)[0].length,a=/^\s*/.exec(o)[0].length,u=n.length-l;if(n.slice(u-e.length,u)==e&&o.slice(a,a+t.length)==t)return{open:{pos:i-l,margin:l&&1},close:{pos:r+a,margin:a&&1}};let h,f;r-i<=2*_i?h=f=s.sliceDoc(i,r):(h=s.sliceDoc(i,i+_i),f=s.sliceDoc(r-_i,r));let c=/^\s*/.exec(h)[0].length,d=/\s*$/.exec(f)[0].length,g=f.length-d-t.length;return h.slice(c,c+e.length)==e&&f.slice(g,g+t.length)==t?{open:{pos:i+c+e.length,margin:/\s/.test(h.charAt(c+e.length))?1:0},close:{pos:r-d-t.length,margin:/\s/.test(f.charAt(g-1))?1:0}}:null}function Vm(s){let e=[];for(let t of s.selection.ranges){let i=s.doc.lineAt(t.from),r=t.to<=i.to?i:s.doc.lineAt(t.to);r.from>i.from&&r.from==t.to&&(r=t.to==i.to+1?i:s.doc.lineAt(t.to-1));let n=e.length-1;n>=0&&e[n].to>i.from?e[n].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function sc(s,e,t=e.selection.ranges){let i=t.map(n=>hl(e,n.from).block);if(!i.every(n=>n))return null;let r=t.map((n,o)=>$m(e,i[o],n.from,n.to));if(s!=2&&!r.every(n=>n))return{changes:e.changes(t.map((n,o)=>r[o]?[]:[{from:n.from,insert:i[o].open+" "},{from:n.to,insert:" "+i[o].close}]))};if(s!=1&&r.some(n=>n)){let n=[];for(let o=0,l;o<r.length;o++)if(l=r[o]){let a=i[o],{open:u,close:h}=l;n.push({from:u.pos-a.open.length,to:u.pos+u.margin},{from:h.pos-h.margin,to:h.pos+a.close.length})}return{changes:n}}return null}function Um(s,e,t=e.selection.ranges){let i=[],r=-1;for(let{from:n,to:o}of t){let l=i.length,a=1e9,u=hl(e,n).line;if(u){for(let h=n;h<=o;){let f=e.doc.lineAt(h);if(f.from>r&&(n==o||o>f.from)){r=f.from;let c=/^\s*/.exec(f.text)[0].length,d=c==f.length,g=f.text.slice(c,c+u.length)==u?c:-1;c<f.text.length&&c<a&&(a=c),i.push({line:f,comment:g,token:u,indent:c,empty:d,single:!1})}h=f.to+1}if(a<1e9)for(let h=l;h<i.length;h++)i[h].indent<i[h].line.text.length&&(i[h].indent=a);i.length==l+1&&(i[l].single=!0)}}if(s!=2&&i.some(n=>n.comment<0&&(!n.empty||n.single))){let n=[];for(let{line:l,token:a,indent:u,empty:h,single:f}of i)(f||!h)&&n.push({from:l.from+u,insert:a+" "});let o=e.changes(n);return{changes:o,selection:e.selection.map(o,1)}}else if(s!=1&&i.some(n=>n.comment>=0)){let n=[];for(let{line:o,comment:l,token:a}of i)if(l>=0){let u=o.from+l,h=u+a.length;o.text[h-o.from]==" "&&h++,n.push({from:u,to:h})}return{changes:n}}return null}function Ti(s,e){return L.create(s.ranges.map(e),s.mainIndex)}function ft(s,e){return s.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function ct({state:s,dispatch:e},t){let i=Ti(s.selection,t);return i.eq(s.selection,!0)?!1:(e(ft(s,i)),!0)}function Ns(s,e){return L.cursor(e?s.to:s.from)}function nc(s,e){return ct(s,t=>t.empty?s.moveByChar(t,e):Ns(t,e))}function Fe(s){return s.textDirectionAt(s.state.selection.main.head)==Te.LTR}const oc=s=>nc(s,!Fe(s)),lc=s=>nc(s,Fe(s));function ac(s,e){return ct(s,t=>t.empty?s.moveByGroup(t,e):Ns(t,e))}const jm=s=>ac(s,!Fe(s)),Hm=s=>ac(s,Fe(s));function Ym(s,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(s.sliceDoc(e.from,e.to)))||e.firstChild}function Fs(s,e,t){let i=ut(s).resolveInner(e.head),r=t?ee.closedBy:ee.openedBy;for(let a=e.head;;){let u=t?i.childAfter(a):i.childBefore(a);if(!u)break;Ym(s,u,r)?i=u:a=t?u.to:u.from}let n=i.type.prop(r),o,l;return n&&(o=t?pi(s,i.from,1):pi(s,i.to,-1))&&o.matched?l=t?o.end.to:o.end.from:l=t?i.to:i.from,L.cursor(l,t?-1:1)}const Xm=s=>ct(s,e=>Fs(s.state,e,!Fe(s))),Gm=s=>ct(s,e=>Fs(s.state,e,Fe(s)));function hc(s,e){return ct(s,t=>{if(!t.empty)return Ns(t,e);let i=s.moveVertically(t,e);return i.head!=t.head?i:s.moveToLineBoundary(t,e)})}const uc=s=>hc(s,!1),fc=s=>hc(s,!0);function cc(s){let e=s.scrollDOM.clientHeight<s.scrollDOM.scrollHeight-2,t=0,i=0,r;if(e){for(let n of s.state.facet(K.scrollMargins)){let o=n(s);o?.top&&(t=Math.max(o?.top,t)),o?.bottom&&(i=Math.max(o?.bottom,i))}r=s.scrollDOM.clientHeight-t-i}else r=(s.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(s.defaultLineHeight,r-5)}}function dc(s,e){let t=cc(s),{state:i}=s,r=Ti(i.selection,o=>o.empty?s.moveVertically(o,e,t.height):Ns(o,e));if(r.eq(i.selection))return!1;let n;if(t.selfScroll){let o=s.coordsAtPos(i.selection.main.head),l=s.scrollDOM.getBoundingClientRect(),a=l.top+t.marginTop,u=l.bottom-t.marginBottom;o&&o.top>a&&o.bottom<u&&(n=K.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-a}))}return s.dispatch(ft(i,r),{effects:n}),!0}const Th=s=>dc(s,!1),Eo=s=>dc(s,!0);function Yt(s,e,t){let i=s.lineBlockAt(e.head),r=s.moveToLineBoundary(e,t);if(r.head==e.head&&r.head!=(t?i.to:i.from)&&(r=s.moveToLineBoundary(e,t,!1)),!t&&r.head==i.from&&i.length){let n=/^\s*/.exec(s.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;n&&e.head!=i.from+n&&(r=L.cursor(i.from+n))}return r}const Km=s=>ct(s,e=>Yt(s,e,!0)),Zm=s=>ct(s,e=>Yt(s,e,!1)),Jm=s=>ct(s,e=>Yt(s,e,!Fe(s))),e0=s=>ct(s,e=>Yt(s,e,Fe(s))),t0=s=>ct(s,e=>L.cursor(s.lineBlockAt(e.head).from,1)),i0=s=>ct(s,e=>L.cursor(s.lineBlockAt(e.head).to,-1));function r0(s,e,t){let i=!1,r=Ti(s.selection,n=>{let o=pi(s,n.head,-1)||pi(s,n.head,1)||n.head>0&&pi(s,n.head-1,1)||n.head<s.doc.length&&pi(s,n.head+1,-1);if(!o||!o.end)return n;i=!0;let l=o.start.from==n.head?o.end.to:o.end.from;return L.cursor(l)});return i?(e(ft(s,r)),!0):!1}const s0=({state:s,dispatch:e})=>r0(s,e);function it(s,e){let t=Ti(s.state.selection,i=>{let r=e(i);return L.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return t.eq(s.state.selection)?!1:(s.dispatch(ft(s.state,t)),!0)}function pc(s,e){return it(s,t=>s.moveByChar(t,e))}const gc=s=>pc(s,!Fe(s)),mc=s=>pc(s,Fe(s));function yc(s,e){return it(s,t=>s.moveByGroup(t,e))}const n0=s=>yc(s,!Fe(s)),o0=s=>yc(s,Fe(s)),l0=s=>it(s,e=>Fs(s.state,e,!Fe(s))),a0=s=>it(s,e=>Fs(s.state,e,Fe(s)));function vc(s,e){return it(s,t=>s.moveVertically(t,e))}const Oc=s=>vc(s,!1),bc=s=>vc(s,!0);function wc(s,e){return it(s,t=>s.moveVertically(t,e,cc(s).height))}const Eh=s=>wc(s,!1),Mh=s=>wc(s,!0),h0=s=>it(s,e=>Yt(s,e,!0)),u0=s=>it(s,e=>Yt(s,e,!1)),f0=s=>it(s,e=>Yt(s,e,!Fe(s))),c0=s=>it(s,e=>Yt(s,e,Fe(s))),d0=s=>it(s,e=>L.cursor(s.lineBlockAt(e.head).from)),p0=s=>it(s,e=>L.cursor(s.lineBlockAt(e.head).to)),Rh=({state:s,dispatch:e})=>(e(ft(s,{anchor:0})),!0),Dh=({state:s,dispatch:e})=>(e(ft(s,{anchor:s.doc.length})),!0),Qh=({state:s,dispatch:e})=>(e(ft(s,{anchor:s.selection.main.anchor,head:0})),!0),_h=({state:s,dispatch:e})=>(e(ft(s,{anchor:s.selection.main.anchor,head:s.doc.length})),!0),g0=({state:s,dispatch:e})=>(e(s.update({selection:{anchor:0,head:s.doc.length},userEvent:"select"})),!0),m0=({state:s,dispatch:e})=>{let t=qs(s).map(({from:i,to:r})=>L.range(i,Math.min(r+1,s.doc.length)));return e(s.update({selection:L.create(t),userEvent:"select"})),!0},y0=({state:s,dispatch:e})=>{let t=Ti(s.selection,i=>{let r=ut(s),n=r.resolveStack(i.from,1);if(i.empty){let o=r.resolveStack(i.from,-1);o.node.from>=n.node.from&&o.node.to<=n.node.to&&(n=o)}for(let o=n;o;o=o.next){let{node:l}=o;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&o.next)return L.range(l.to,l.from)}return i});return t.eq(s.selection)?!1:(e(ft(s,t)),!0)};function Sc(s,e){let{state:t}=s,i=t.selection,r=t.selection.ranges.slice();for(let n of t.selection.ranges){let o=t.doc.lineAt(n.head);if(e?o.to<s.state.doc.length:o.from>0)for(let l=n;;){let a=s.moveVertically(l,e);if(a.head<o.from||a.head>o.to){r.some(u=>u.head==a.head)||r.push(a);break}else{if(a.head==l.head)break;l=a}}}return r.length==i.ranges.length?!1:(s.dispatch(ft(t,L.create(r,r.length-1))),!0)}const v0=s=>Sc(s,!1),O0=s=>Sc(s,!0),b0=({state:s,dispatch:e})=>{let t=s.selection,i=null;return t.ranges.length>1?i=L.create([t.main]):t.main.empty||(i=L.create([L.cursor(t.main.head)])),i?(e(ft(s,i)),!0):!1};function or(s,e){if(s.state.readOnly)return!1;let t="delete.selection",{state:i}=s,r=i.changeByRange(n=>{let{from:o,to:l}=n;if(o==l){let a=e(n);a<o?(t="delete.backward",a=Xr(s,a,!1)):a>o&&(t="delete.forward",a=Xr(s,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=Xr(s,o,!1),l=Xr(s,l,!0);return o==l?{range:n}:{changes:{from:o,to:l},range:L.cursor(o,o<n.head?-1:1)}});return r.changes.empty?!1:(s.dispatch(i.update(r,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?K.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Xr(s,e,t){if(s instanceof K)for(let i of s.state.facet(K.atomicRanges).map(r=>r(s)))i.between(e,e,(r,n)=>{r<e&&n>e&&(e=t?n:r)});return e}const xc=(s,e,t)=>or(s,i=>{let r=i.from,{state:n}=s,o=n.doc.lineAt(r),l,a;if(t&&!e&&r>o.from&&r<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,r-o.from))){if(l[l.length-1]=="	")return r-1;let u=Ds(l,n.tabSize),h=u%vs(n)||vs(n);for(let f=0;f<h&&l[l.length-1-f]==" ";f++)r--;a=r}else a=$e(o.text,r-o.from,e,e)+o.from,a==r&&o.number!=(e?n.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(a-o.from,r-o.from))&&(a=$e(o.text,a-o.from,!1,!1)+o.from);return a}),Mo=s=>xc(s,!1,!0),kc=s=>xc(s,!0,!1),Cc=(s,e)=>or(s,t=>{let i=t.head,{state:r}=s,n=r.doc.lineAt(i),o=r.charCategorizer(i);for(let l=null;;){if(i==(e?n.to:n.from)){i==t.head&&n.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let a=$e(n.text,i-n.from,e)+n.from,u=n.text.slice(Math.min(i,a)-n.from,Math.max(i,a)-n.from),h=o(u);if(l!=null&&h!=l)break;(u!=" "||i!=t.head)&&(l=h),i=a}return i}),Ac=s=>Cc(s,!1),w0=s=>Cc(s,!0),S0=s=>or(s,e=>{let t=s.lineBlockAt(e.head).to;return e.head<t?t:Math.min(s.state.doc.length,e.head+1)}),x0=s=>or(s,e=>{let t=s.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),k0=s=>or(s,e=>{let t=s.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(s.state.doc.length,e.head+1)}),C0=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let t=s.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:se.of(["",""])},range:L.cursor(i.from)}));return e(s.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},A0=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let t=s.changeByRange(i=>{if(!i.empty||i.from==0||i.from==s.doc.length)return{range:i};let r=i.from,n=s.doc.lineAt(r),o=r==n.from?r-1:$e(n.text,r-n.from,!1)+n.from,l=r==n.to?r+1:$e(n.text,r-n.from,!0)+n.from;return{changes:{from:o,to:l,insert:s.doc.slice(r,l).append(s.doc.slice(o,r))},range:L.cursor(l)}});return t.changes.empty?!1:(e(s.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function qs(s){let e=[],t=-1;for(let i of s.selection.ranges){let r=s.doc.lineAt(i.from),n=s.doc.lineAt(i.to);if(!i.empty&&i.to==n.from&&(n=s.doc.lineAt(i.to-1)),t>=r.number){let o=e[e.length-1];o.to=n.to,o.ranges.push(i)}else e.push({from:r.from,to:n.to,ranges:[i]});t=n.number+1}return e}function Pc(s,e,t){if(s.readOnly)return!1;let i=[],r=[];for(let n of qs(s)){if(t?n.to==s.doc.length:n.from==0)continue;let o=s.doc.lineAt(t?n.to+1:n.from-1),l=o.length+1;if(t){i.push({from:n.to,to:o.to},{from:n.from,insert:o.text+s.lineBreak});for(let a of n.ranges)r.push(L.range(Math.min(s.doc.length,a.anchor+l),Math.min(s.doc.length,a.head+l)))}else{i.push({from:o.from,to:n.from},{from:n.to,insert:s.lineBreak+o.text});for(let a of n.ranges)r.push(L.range(a.anchor-l,a.head-l))}}return i.length?(e(s.update({changes:i,scrollIntoView:!0,selection:L.create(r,s.selection.mainIndex),userEvent:"move.line"})),!0):!1}const P0=({state:s,dispatch:e})=>Pc(s,e,!1),T0=({state:s,dispatch:e})=>Pc(s,e,!0);function Tc(s,e,t){if(s.readOnly)return!1;let i=[];for(let r of qs(s))t?i.push({from:r.from,insert:s.doc.slice(r.from,r.to)+s.lineBreak}):i.push({from:r.to,insert:s.lineBreak+s.doc.slice(r.from,r.to)});return e(s.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const E0=({state:s,dispatch:e})=>Tc(s,e,!1),M0=({state:s,dispatch:e})=>Tc(s,e,!0),R0=s=>{if(s.state.readOnly)return!1;let{state:e}=s,t=e.changes(qs(e).map(({from:r,to:n})=>(r>0?r--:n<e.doc.length&&n++,{from:r,to:n}))),i=Ti(e.selection,r=>{let n;if(s.lineWrapping){let o=s.lineBlockAt(r.head),l=s.coordsAtPos(r.head,r.assoc||1);l&&(n=o.bottom+s.documentTop-l.bottom+s.defaultLineHeight/2)}return s.moveVertically(r,!0,n)}).map(t);return s.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function D0(s,e){if(/\(\)|\[\]|\{\}/.test(s.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=ut(s).resolveInner(e),i=t.childBefore(e),r=t.childAfter(e),n;return i&&r&&i.to<=e&&r.from>=e&&(n=i.type.prop(ee.closedBy))&&n.indexOf(r.name)>-1&&s.doc.lineAt(i.to).from==s.doc.lineAt(r.from).from&&!/\S/.test(s.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const Ih=Ec(!1),Q0=Ec(!0);function Ec(s){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:n,to:o}=r,l=e.doc.lineAt(n),a=!s&&n==o&&D0(e,n);s&&(n=o=(o<=l.to?l:e.doc.lineAt(o)).to);let u=new Ls(e,{simulateBreak:n,simulateDoubleBreak:!!a}),h=tc(u,n);for(h==null&&(h=Ds(/^\s*/.exec(e.doc.lineAt(n).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:n,to:o}=a:n>l.from&&n<l.from+100&&!/\S/.test(l.text.slice(0,n))&&(n=l.from);let f=["",Os(e,h)];return a&&f.push(Os(e,u.lineIndent(l.from,-1))),{changes:{from:n,to:o,insert:se.of(f)},range:L.cursor(n+1+f[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function ul(s,e){let t=-1;return s.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let l=s.doc.lineAt(o);l.number>t&&(i.empty||i.to>l.from)&&(e(l,r,i),t=l.number),o=l.to+1}let n=s.changes(r);return{changes:r,range:L.range(n.mapPos(i.anchor,1),n.mapPos(i.head,1))}})}const _0=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let t=Object.create(null),i=new Ls(s,{overrideIndentation:n=>{let o=t[n];return o??-1}}),r=ul(s,(n,o,l)=>{let a=tc(i,n.from);if(a==null)return;/\S/.test(n.text)||(a=0);let u=/^\s*/.exec(n.text)[0],h=Os(s,a);(u!=h||l.from<n.from+u.length)&&(t[n.from]=a,o.push({from:n.from,to:n.from+u.length,insert:h}))});return r.changes.empty||e(s.update(r,{userEvent:"indent"})),!0},I0=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(ul(s,(t,i)=>{i.push({from:t.from,insert:s.facet(ol)})}),{userEvent:"input.indent"})),!0),L0=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(ul(s,(t,i)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let n=Ds(r,s.tabSize),o=0,l=Os(s,Math.max(0,n-vs(s)));for(;o<r.length&&o<l.length&&r.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:t.from+o,to:t.from+r.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),B0=s=>(s.setTabFocusMode(),!0),N0=[{key:"Ctrl-b",run:oc,shift:gc,preventDefault:!0},{key:"Ctrl-f",run:lc,shift:mc},{key:"Ctrl-p",run:uc,shift:Oc},{key:"Ctrl-n",run:fc,shift:bc},{key:"Ctrl-a",run:t0,shift:d0},{key:"Ctrl-e",run:i0,shift:p0},{key:"Ctrl-d",run:kc},{key:"Ctrl-h",run:Mo},{key:"Ctrl-k",run:S0},{key:"Ctrl-Alt-h",run:Ac},{key:"Ctrl-o",run:C0},{key:"Ctrl-t",run:A0},{key:"Ctrl-v",run:Eo}],F0=[{key:"ArrowLeft",run:oc,shift:gc,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:jm,shift:n0,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Jm,shift:f0,preventDefault:!0},{key:"ArrowRight",run:lc,shift:mc,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Hm,shift:o0,preventDefault:!0},{mac:"Cmd-ArrowRight",run:e0,shift:c0,preventDefault:!0},{key:"ArrowUp",run:uc,shift:Oc,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Rh,shift:Qh},{mac:"Ctrl-ArrowUp",run:Th,shift:Eh},{key:"ArrowDown",run:fc,shift:bc,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Dh,shift:_h},{mac:"Ctrl-ArrowDown",run:Eo,shift:Mh},{key:"PageUp",run:Th,shift:Eh},{key:"PageDown",run:Eo,shift:Mh},{key:"Home",run:Zm,shift:u0,preventDefault:!0},{key:"Mod-Home",run:Rh,shift:Qh},{key:"End",run:Km,shift:h0,preventDefault:!0},{key:"Mod-End",run:Dh,shift:_h},{key:"Enter",run:Ih,shift:Ih},{key:"Mod-a",run:g0},{key:"Backspace",run:Mo,shift:Mo,preventDefault:!0},{key:"Delete",run:kc,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Ac,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:w0,preventDefault:!0},{mac:"Mod-Backspace",run:x0,preventDefault:!0},{mac:"Mod-Delete",run:k0,preventDefault:!0}].concat(N0.map(s=>({mac:s.key,run:s.run,shift:s.shift}))),q0=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Xm,shift:l0},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Gm,shift:a0},{key:"Alt-ArrowUp",run:P0},{key:"Shift-Alt-ArrowUp",run:E0},{key:"Alt-ArrowDown",run:T0},{key:"Shift-Alt-ArrowDown",run:M0},{key:"Mod-Alt-ArrowUp",run:v0},{key:"Mod-Alt-ArrowDown",run:O0},{key:"Escape",run:b0},{key:"Mod-Enter",run:Q0},{key:"Alt-l",mac:"Ctrl-l",run:m0},{key:"Mod-i",run:y0,preventDefault:!0},{key:"Mod-[",run:L0},{key:"Mod-]",run:I0},{key:"Mod-Alt-\\",run:_0},{key:"Shift-Mod-k",run:R0},{key:"Shift-Mod-\\",run:s0},{key:"Mod-/",run:Fm},{key:"Alt-A",run:zm},{key:"Ctrl-m",mac:"Shift-Alt-m",run:B0}].concat(F0);var Lh={};class bs{constructor(e,t,i,r,n,o,l,a,u,h=0,f){this.p=e,this.stack=t,this.state=i,this.reducePos=r,this.pos=n,this.score=o,this.buffer=l,this.bufferBase=a,this.curContext=u,this.lookAhead=h,this.parent=f}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let r=e.parser.context;return new bs(e,[],t,i,i,0,[],0,r?new Bh(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,r=e&65535,{parser:n}=this.p,o=this.reducePos<this.pos-25&&this.setLookAhead(this.pos),l=n.dynamicPrecedence(r);if(l&&(this.score+=l),i==0){this.pushState(n.getGoto(this.state,r,!0),this.reducePos),r<n.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(r,this.reducePos);return}let a=this.stack.length-(i-1)*3-(e&262144?6:0),u=a?this.stack[a-2]:this.p.ranges[0].from,h=this.reducePos-u;h>=2e3&&!(!((t=this.p.parser.nodeSet.types[r])===null||t===void 0)&&t.isAnonymous)&&(u==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=h):this.p.lastBigReductionSize<h&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=u,this.p.lastBigReductionSize=h));let f=a?this.stack[a-1]:0,c=this.bufferBase+this.buffer.length-f;if(r<n.minRepeatTerm||e&131072){let d=n.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,u,d,c+4,!0)}if(e&262144)this.state=this.stack[a];else{let d=this.stack[a-3];this.state=n.getGoto(d,r,!0)}for(;this.stack.length>a;)this.stack.pop();this.reduceContext(r,u)}storeNode(e,t,i,r=4,n=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,l=this.buffer.length;if(l==0&&o.parent&&(l=o.bufferBase-o.parent.bufferBase,o=o.parent),l>0&&o.buffer[l-4]==0&&o.buffer[l-1]>-1){if(t==i)return;if(o.buffer[l-2]>=t){o.buffer[l-2]=i;return}}}if(!n||this.pos==i)this.buffer.push(e,t,i,r);else{let o=this.buffer.length;if(o>0&&(this.buffer[o-4]!=0||this.buffer[o-1]<0)){let l=!1;for(let a=o;a>0&&this.buffer[a-2]>i;a-=4)if(this.buffer[a-1]>=0){l=!0;break}if(l)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,r>4&&(r-=4)}this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=i,this.buffer[o+3]=r}}shift(e,t,i,r){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let n=e,{parser:o}=this.p;(r>this.pos||t<=o.maxNode)&&(this.pos=r,o.stateFlag(n,1)||(this.reducePos=r)),this.pushState(n,i),this.shiftContext(t,i),t<=o.maxNode&&this.buffer.push(t,i,r,4)}else this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4)}apply(e,t,i,r){e&65536?this.reduce(e):this.shift(e,t,i,r)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new bs(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new z0(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if((i&65536)==0)return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let r=[];for(let n=0,o;n<t.length;n+=2)(o=t[n+1])!=this.state&&this.p.parser.hasAction(o,e)&&r.push(t[n],o);if(this.stack.length<120)for(let n=0;r.length<8&&n<t.length;n+=2){let o=t[n+1];r.some((l,a)=>a&1&&l==o)||r.push(t[n],o)}t=r}let i=[];for(let r=0;r<t.length&&i.length<4;r+=2){let n=t[r+1];if(n==this.state)continue;let o=this.split();o.pushState(n,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[r],this.pos),o.reducePos=this.pos,o.score-=200,i.push(o)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let i=t>>19,r=t&65535,n=this.stack.length-i*3;if(n<0||e.getGoto(this.stack[n],r,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;t=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(r,n)=>{if(!t.includes(r))return t.push(r),e.allActions(r,o=>{if(!(o&393216))if(o&65536){let l=(o>>19)-n;if(l>1){let a=o&65535,u=this.stack.length-l*3;if(u>=0&&e.getGoto(this.stack[u],a,!1)>=0)return l<<19|65536|a}}else{let l=i(o,n+1);if(l!=null)return l}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new Bh(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){return e<=this.lookAhead?!1:(this.emitLookAhead(),this.lookAhead=e,!0)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Bh{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class z0{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class ws{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new ws(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new ws(this.stack,this.pos,this.index)}}function Fi(s,e=Uint16Array){if(typeof s!="string")return s;let t=null;for(let i=0,r=0;i<s.length;){let n=0;for(;;){let o=s.charCodeAt(i++),l=!1;if(o==126){n=65535;break}o>=92&&o--,o>=34&&o--;let a=o-32;if(a>=46&&(a-=46,l=!0),n+=a,l)break;n*=46}t?t[r++]=n:t=new e(n)}return t}class rs{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Nh=new rs;class W0{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Nh,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,r=this.rangeIndex,n=this.pos+e;for(;n<i.from;){if(!r)return null;let o=this.ranges[--r];n-=i.from-o.to,i=o}for(;t<0?n>i.to:n>=i.to;){if(r==this.ranges.length-1)return null;let o=this.ranges[++r];n+=o.from-i.to,i=o}return n}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,r;if(t>=0&&t<this.chunk.length)i=this.pos+e,r=this.chunk.charCodeAt(t);else{let n=this.resolveOffset(e,1);if(n==null)return-1;if(i=n,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let o=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),r=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),r}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=Nh,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(i+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return i}}class vi{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;Rc(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}vi.prototype.contextual=vi.prototype.fallback=vi.prototype.extend=!1;class Mc{constructor(e,t,i){this.precTable=t,this.elseToken=i,this.data=typeof e=="string"?Fi(e):e}token(e,t){let i=e.pos,r=0;for(;;){let n=e.next<0,o=e.resolveOffset(1,1);if(Rc(this.data,e,t,0,this.data,this.precTable),e.token.value>-1)break;if(this.elseToken==null)return;if(n||r++,o==null)break;e.reset(o,e.token)}r&&(e.reset(i,e.token),e.acceptToken(this.elseToken,r))}}Mc.prototype.contextual=vi.prototype.fallback=vi.prototype.extend=!1;class zs{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function Rc(s,e,t,i,r,n){let o=0,l=1<<i,{dialect:a}=t.p.parser;e:for(;(l&s[o])!=0;){let u=s[o+1];for(let d=o+3;d<u;d+=2)if((s[d+1]&l)>0){let g=s[d];if(a.allows(g)&&(e.token.value==-1||e.token.value==g||$0(g,e.token.value,r,n))){e.acceptToken(g);break}}let h=e.next,f=0,c=s[o+2];if(e.next<0&&c>f&&s[u+c*3-3]==65535){o=s[u+c*3-1];continue e}for(;f<c;){let d=f+c>>1,g=u+d+(d<<1),p=s[g],m=s[g+1]||65536;if(h<p)c=d;else if(h>=m)f=d+1;else{o=s[g+2],e.advance();continue e}}break}}function Fh(s,e,t){for(let i=e,r;(r=s[i])!=65535;i++)if(r==t)return i-e;return-1}function $0(s,e,t,i){let r=Fh(t,i,e);return r<0||Fh(t,i,s)<r}const Xe=typeof process<"u"&&Lh&&/\bparse\b/.test(Lh.LOG);let Fn=null;function qh(s,e,t){let i=s.cursor(Ae.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(s.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:s.length}}class V0{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?qh(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?qh(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],r=this.index[t];if(r==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let n=i.children[r],o=this.start[t]+i.positions[r];if(o>e)return this.nextStart=o,null;if(n instanceof Ce){if(o==e){if(o<this.safeFrom)return null;let l=o+n.length;if(l<=this.safeTo){let a=n.prop(ee.lookAhead);if(!a||l+a<this.fragment.to)return n}}this.index[t]++,o+n.length>=Math.max(this.safeFrom,e)&&(this.trees.push(n),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+n.length}}}class U0{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new rs)}getActions(e){let t=0,i=null,{parser:r}=e.p,{tokenizers:n}=r,o=r.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,a=0;for(let u=0;u<n.length;u++){if((1<<u&o)==0)continue;let h=n[u],f=this.tokens[u];if(!(i&&!h.fallback)&&((h.contextual||f.start!=e.pos||f.mask!=o||f.context!=l)&&(this.updateCachedToken(f,h,e),f.mask=o,f.context=l),f.lookAhead>f.end+25&&(a=Math.max(f.lookAhead,a)),f.value!=0)){let c=t;if(f.extended>-1&&(t=this.addActions(e,f.extended,f.end,t)),t=this.addActions(e,f.value,f.end,t),!h.extend&&(i=f,t>c))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),!i&&e.pos==this.stream.end&&(i=new rs,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new rs,{pos:i,p:r}=e;return t.start=i,t.end=Math.min(i+1,r.stream.end),t.value=i==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,i){let r=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(r,e),i),e.value>-1){let{parser:n}=i.p;for(let o=0;o<n.specialized.length;o++)if(n.specialized[o]==e.value){let l=n.specializers[o](this.stream.read(e.start,e.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){(l&1)==0?e.value=l>>1:e.extended=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,i,r){for(let n=0;n<r;n+=3)if(this.actions[n]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=i,r}addActions(e,t,i,r){let{state:n}=e,{parser:o}=e.p,{data:l}=o;for(let a=0;a<2;a++)for(let u=o.stateSlot(n,a?2:1);;u+=3){if(l[u]==65535)if(l[u+1]==1)u=Ct(l,u+2);else{r==0&&l[u+1]==2&&(r=this.putAction(Ct(l,u+2),t,i,r));break}l[u]==t&&(r=this.putAction(Ct(l,u+1),t,i,r))}return r}}class j0{constructor(e,t,i,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new W0(t,r),this.tokens=new U0(e,this.stream),this.topTerm=e.top[1];let{from:n}=r[0];this.stacks=[bs.start(this,e.top[0],n)],this.fragments=i.length&&this.stream.end-n>e.bufferLength*4?new V0(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],r,n;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let l=e[o];for(;;){if(this.tokens.mainToken=null,l.pos>t)i.push(l);else{if(this.advanceStack(l,i,e))continue;{r||(r=[],n=[]),r.push(l);let a=this.tokens.getMainToken(l);n.push(a.value,a.end)}}break}}if(!i.length){let o=r&&Y0(r);if(o)return Xe&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw Xe&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&r){let o=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,n,i);if(o)return Xe&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(i.length>o)for(i.sort((l,a)=>a.score-l.score);i.length>o;)i.pop();i.some(l=>l.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let o=0;o<i.length-1;o++){let l=i[o];for(let a=o+1;a<i.length;a++){let u=i[a];if(l.sameState(u)||l.buffer.length>500&&u.buffer.length>500)if((l.score-u.score||l.buffer.length-u.buffer.length)>0)i.splice(a--,1);else{i.splice(o--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let r=e.pos,{parser:n}=this,o=Xe?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let u=e.curContext&&e.curContext.tracker.strict,h=u?e.curContext.hash:0;for(let f=this.fragments.nodeAt(r);f;){let c=this.parser.nodeSet.types[f.type.id]==f.type?n.getGoto(e.state,f.type.id):-1;if(c>-1&&f.length&&(!u||(f.prop(ee.contextHash)||0)==h))return e.useNode(f,c),Xe&&console.log(o+this.stackID(e)+` (via reuse of ${n.getName(f.type.id)})`),!0;if(!(f instanceof Ce)||f.children.length==0||f.positions[0]>0)break;let d=f.children[0];if(d instanceof Ce&&f.positions[0]==0)f=d;else break}}let l=n.stateSlot(e.state,4);if(l>0)return e.reduce(l),Xe&&console.log(o+this.stackID(e)+` (via always-reduce ${n.getName(l&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let u=0;u<a.length;){let h=a[u++],f=a[u++],c=a[u++],d=u==a.length||!i,g=d?e:e.split(),p=this.tokens.mainToken;if(g.apply(h,f,p?p.start:g.pos,c),Xe&&console.log(o+this.stackID(g)+` (via ${(h&65536)==0?"shift":`reduce of ${n.getName(h&65535)}`} for ${n.getName(f)} @ ${r}${g==e?"":", split"})`),d)return!0;g.pos>r?t.push(g):i.push(g)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return zh(e,t),!0}}runRecovery(e,t,i){let r=null,n=!1;for(let o=0;o<e.length;o++){let l=e[o],a=t[o<<1],u=t[(o<<1)+1],h=Xe?this.stackID(l)+" -> ":"";if(l.deadEnd&&(n||(n=!0,l.restart(),Xe&&console.log(h+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let f=l.split(),c=h;for(let d=0;d<10&&f.forceReduce()&&(Xe&&console.log(c+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,i));d++)Xe&&(c=this.stackID(f)+" -> ");for(let d of l.recoverByInsert(a))Xe&&console.log(h+this.stackID(d)+" (via recover-insert)"),this.advanceFully(d,i);this.stream.end>l.pos?(u==l.pos&&(u++,a=0),l.recoverByDelete(a,u),Xe&&console.log(h+this.stackID(l)+` (via recover-delete ${this.parser.getName(a)})`),zh(l,i)):(!r||r.score<l.score)&&(r=l)}return r}stackToTree(e){return e.close(),Ce.build({buffer:ws.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Fn||(Fn=new WeakMap)).get(e);return t||Fn.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function zh(s,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==s.pos&&i.sameState(s)){e[t].score<s.score&&(e[t]=s);return}}e.push(s)}class H0{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class Ss extends Gf{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let l=0;l<e.repeatNodeCount;l++)t.push("");let i=Object.keys(e.topRules).map(l=>e.topRules[l][1]),r=[];for(let l=0;l<t.length;l++)r.push([]);function n(l,a,u){r[l].push([a,a.deserialize(String(u))])}if(e.nodeProps)for(let l of e.nodeProps){let a=l[0];typeof a=="string"&&(a=ee[a]);for(let u=1;u<l.length;){let h=l[u++];if(h>=0)n(h,a,l[u++]);else{let f=l[u+-h];for(let c=-h;c>0;c--)n(l[u++],a,f);u++}}}this.nodeSet=new il(t.map((l,a)=>He.define({name:a>=this.minRepeatTerm?void 0:l,id:a,props:r[a],top:i.indexOf(a)>-1,error:a==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(a)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=jf;let o=Fi(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(Wh),this.states=Fi(e.states,Uint32Array),this.data=Fi(e.stateData),this.goto=Fi(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new vi(o,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let r=new j0(this,e,t,i);for(let n of this.wrappers)r=n(r,e,t,i);return r}getGoto(e,t,i=!1){let r=this.goto;if(t>=r[0])return-1;for(let n=r[t+1];;){let o=r[n++],l=o&1,a=r[n++];if(l&&i)return a;for(let u=n+(o>>1);n<u;n++)if(r[n]==e)return a;if(l)return-1}}hasAction(e,t){let i=this.data;for(let r=0;r<2;r++)for(let n=this.stateSlot(e,r?2:1),o;;n+=3){if((o=i[n])==65535)if(i[n+1]==1)o=i[n=Ct(i,n+2)];else{if(i[n+1]==2)return Ct(i,n+2);break}if(o==t||o==0)return Ct(i,n+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),r=i?t(i):void 0;for(let n=this.stateSlot(e,1);r==null;n+=3){if(this.data[n]==65535)if(this.data[n+1]==1)n=Ct(this.data,n+2);else break;r=t(Ct(this.data,n+1))}return r}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=Ct(this.data,i+2);else break;if((this.data[i+2]&1)==0){let r=this.data[i+1];t.some((n,o)=>o&1&&n==r)||t.push(this.data[i],r)}}return t}configure(e){let t=Object.assign(Object.create(Ss.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let r=e.tokenizers.find(n=>n.from==i);return r?r.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,r)=>{let n=e.specializers.find(l=>l.from==i.external);if(!n)return i;let o=Object.assign(Object.assign({},i),{external:n.to});return t.specializers[r]=Wh(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let n of e.split(" ")){let o=t.indexOf(n);o>=0&&(i[o]=!0)}let r=null;for(let n=0;n<t.length;n++)if(!i[n])for(let o=this.dialects[t[n]],l;(l=this.data[o++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[l]=1;return new H0(e,i,r)}static deserialize(e){return new Ss(e)}}function Ct(s,e){return s[e]|s[e+1]<<16}function Y0(s){let e=null;for(let t of s){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function Wh(s){if(s.external){let e=s.extend?1:0;return(t,i)=>s.external(t,i)<<1|e}return s.get}const X0=122,$h=1,G0=123,K0=124,Dc=2,Z0=125,J0=3,ey=4,Qc=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],ty=58,iy=40,_c=95,ry=91,ss=45,sy=46,ny=35,oy=37,ly=38,ay=92,hy=10,uy=42;function tr(s){return s>=65&&s<=90||s>=97&&s<=122||s>=161}function fl(s){return s>=48&&s<=57}function Vh(s){return fl(s)||s>=97&&s<=102||s>=65&&s<=70}const Ic=(s,e,t)=>(i,r)=>{for(let n=!1,o=0,l=0;;l++){let{next:a}=i;if(tr(a)||a==ss||a==_c||n&&fl(a))!n&&(a!=ss||l>0)&&(n=!0),o===l&&a==ss&&o++,i.advance();else if(a==ay&&i.peek(1)!=hy){if(i.advance(),Vh(i.next)){do i.advance();while(Vh(i.next));i.next==32&&i.advance()}else i.next>-1&&i.advance();n=!0}else{n&&i.acceptToken(o==2&&r.canShift(Dc)?e:a==iy?t:s);break}}},fy=new zs(Ic(G0,Dc,K0)),cy=new zs(Ic(Z0,J0,ey)),dy=new zs(s=>{if(Qc.includes(s.peek(-1))){let{next:e}=s;(tr(e)||e==_c||e==ny||e==sy||e==uy||e==ry||e==ty&&tr(s.peek(1))||e==ss||e==ly)&&s.acceptToken(X0)}}),py=new zs(s=>{if(!Qc.includes(s.peek(-1))){let{next:e}=s;if(e==oy&&(s.advance(),s.acceptToken($h)),tr(e)){do s.advance();while(tr(s.next)||fl(s.next));s.acceptToken($h)}}}),gy=Kf({"AtKeyword import charset namespace keyframes media supports":M.definitionKeyword,"from to selector":M.keyword,NamespaceName:M.namespace,KeyframeName:M.labelName,KeyframeRangeName:M.operatorKeyword,TagName:M.tagName,ClassName:M.className,PseudoClassName:M.constant(M.className),IdName:M.labelName,"FeatureName PropertyName":M.propertyName,AttributeName:M.attributeName,NumberLiteral:M.number,KeywordQuery:M.keyword,UnaryQueryOp:M.operatorKeyword,"CallTag ValueName":M.atom,VariableName:M.variableName,Callee:M.operatorKeyword,Unit:M.unit,"UniversalSelector NestingSelector":M.definitionOperator,"MatchOp CompareOp":M.compareOperator,"ChildOp SiblingOp, LogicOp":M.logicOperator,BinOp:M.arithmeticOperator,Important:M.modifier,Comment:M.blockComment,ColorLiteral:M.color,"ParenthesizedContent StringLiteral":M.string,":":M.punctuation,"PseudoOp #":M.derefOperator,"; ,":M.separator,"( )":M.paren,"[ ]":M.squareBracket,"{ }":M.brace}),my={__proto__:null,lang:38,"nth-child":38,"nth-last-child":38,"nth-of-type":38,"nth-last-of-type":38,dir:38,"host-context":38,if:84,url:124,"url-prefix":124,domain:124,regexp:124},yy={__proto__:null,or:98,and:98,not:106,only:106,layer:170},vy={__proto__:null,selector:112,layer:166},Oy={__proto__:null,"@import":162,"@media":174,"@charset":178,"@namespace":182,"@keyframes":188,"@supports":200,"@scope":204},by={__proto__:null,to:207},wy=Ss.deserialize({version:14,states:"EbQYQdOOO#qQdOOP#xO`OOOOQP'#Cf'#CfOOQP'#Ce'#CeO#}QdO'#ChO$nQaO'#CcO$xQdO'#CkO%TQdO'#DpO%YQdO'#DrO%_QdO'#DuO%_QdO'#DxOOQP'#FV'#FVO&eQhO'#EhOOQS'#FU'#FUOOQS'#Ek'#EkQYQdOOO&lQdO'#EOO&PQhO'#EUO&lQdO'#EWO'aQdO'#EYO'lQdO'#E]O'tQhO'#EcO(VQdO'#EeO(bQaO'#CfO)VQ`O'#D{O)[Q`O'#F`O)gQdO'#F`QOQ`OOP)qO&jO'#CaPOOO)C@t)C@tOOQP'#Cj'#CjOOQP,59S,59SO#}QdO,59SO)|QdO,59VO%TQdO,5:[O%YQdO,5:^O%_QdO,5:aO%_QdO,5:cO%_QdO,5:dO%_QdO'#ErO*XQ`O,58}O*aQdO'#DzOOQS,58},58}OOQP'#Cn'#CnOOQO'#Dn'#DnOOQP,59V,59VO*hQ`O,59VO*mQ`O,59VOOQP'#Dq'#DqOOQP,5:[,5:[OOQO'#Ds'#DsO*rQpO,5:^O+]QaO,5:aO+sQaO,5:dOOQW'#DZ'#DZO,ZQhO'#DdO,xQhO'#FaO'tQhO'#DbO-WQ`O'#DhOOQW'#F['#F[O-]Q`O,5;SO-eQ`O'#DeOOQS-E8i-E8iOOQ['#Cs'#CsO-jQdO'#CtO.QQdO'#CzO.hQdO'#C}O/OQ!pO'#DPO1RQ!jO,5:jOOQO'#DU'#DUO*mQ`O'#DTO1cQ!nO'#FXO3`Q`O'#DVO3eQ`O'#DkOOQ['#FX'#FXO-`Q`O,5:pO3jQ!bO,5:rOOQS'#E['#E[O3rQ`O,5:tO3wQdO,5:tOOQO'#E_'#E_O4PQ`O,5:wO4UQhO,5:}O%_QdO'#DgOOQS,5;P,5;PO-eQ`O,5;PO4^QdO,5;PO4fQdO,5:gO4vQdO'#EtO5TQ`O,5;zO5TQ`O,5;zPOOO'#Ej'#EjP5`O&jO,58{POOO,58{,58{OOQP1G.n1G.nOOQP1G.q1G.qO*hQ`O1G.qO*mQ`O1G.qOOQP1G/v1G/vO5kQpO1G/xO5sQaO1G/{O6ZQaO1G/}O6qQaO1G0OO7XQaO,5;^OOQO-E8p-E8pOOQS1G.i1G.iO7cQ`O,5:fO7hQdO'#DoO7oQdO'#CrOOQP1G/x1G/xO&lQdO1G/xO7vQ!jO'#DZO8UQ!bO,59vO8^QhO,5:OOOQO'#F]'#F]O8XQ!bO,59zO'tQhO,59xO8fQhO'#EvO8sQ`O,5;{O9OQhO,59|O9uQhO'#DiOOQW,5:S,5:SOOQS1G0n1G0nOOQW,5:P,5:PO9|Q!fO'#FYOOQS'#FY'#FYOOQS'#Em'#EmO;^QdO,59`OOQ[,59`,59`O;tQdO,59fOOQ[,59f,59fO<[QdO,59iOOQ[,59i,59iOOQ[,59k,59kO&lQdO,59mO<rQhO'#EQOOQW'#EQ'#EQO=WQ`O1G0UO1[QhO1G0UOOQ[,59o,59oO'tQhO'#DXOOQ[,59q,59qO=]Q#tO,5:VOOQS1G0[1G0[OOQS1G0^1G0^OOQS1G0`1G0`O=hQ`O1G0`O=mQdO'#E`OOQS1G0c1G0cOOQS1G0i1G0iO=xQaO,5:RO-`Q`O1G0kOOQS1G0k1G0kO-eQ`O1G0kO>PQ!fO1G0ROOQO1G0R1G0ROOQO,5;`,5;`O>gQdO,5;`OOQO-E8r-E8rO>tQ`O1G1fPOOO-E8h-E8hPOOO1G.g1G.gOOQP7+$]7+$]OOQP7+%d7+%dO&lQdO7+%dOOQS1G0Q1G0QO?PQaO'#F_O?ZQ`O,5:ZO?`Q!fO'#ElO@^QdO'#FWO@hQ`O,59^O@mQ!bO7+%dO&lQdO1G/bO@uQhO1G/fOOQW1G/j1G/jOOQW1G/d1G/dOAWQhO,5;bOOQO-E8t-E8tOAfQhO'#DZOAtQhO'#F^OBPQ`O'#F^OBUQ`O,5:TOOQS-E8k-E8kOOQ[1G.z1G.zOOQ[1G/Q1G/QOOQ[1G/T1G/TOOQ[1G/X1G/XOBZQdO,5:lOOQS7+%p7+%pOB`Q`O7+%pOBeQhO'#DYOBmQ`O,59sO'tQhO,59sOOQ[1G/q1G/qOBuQ`O1G/qOOQS7+%z7+%zOBzQbO'#DPOOQO'#Eb'#EbOCYQ`O'#EaOOQO'#Ea'#EaOCeQ`O'#EwOCmQdO,5:zOOQS,5:z,5:zOOQ[1G/m1G/mOOQS7+&V7+&VO-`Q`O7+&VOCxQ!fO'#EsO&lQdO'#EsOEPQdO7+%mOOQO7+%m7+%mOOQO1G0z1G0zOEdQ!bO<<IOOElQdO'#EqOEvQ`O,5;yOOQP1G/u1G/uOOQS-E8j-E8jOFOQdO'#EpOFYQ`O,5;rOOQ]1G.x1G.xOOQP<<IO<<IOOFbQdO7+$|OOQO'#D]'#D]OFiQ!bO7+%QOFqQhO'#EoOF{Q`O,5;xO&lQdO,5;xOOQW1G/o1G/oOOQO'#ES'#ESOGTQ`O1G0WOOQS<<I[<<I[O&lQdO,59tOGnQhO1G/_OOQ[1G/_1G/_OGuQ`O1G/_OOQW-E8l-E8lOOQ[7+%]7+%]OOQO,5:{,5:{O=pQdO'#ExOCeQ`O,5;cOOQS,5;c,5;cOOQS-E8u-E8uOOQS1G0f1G0fOOQS<<Iq<<IqOG}Q!fO,5;_OOQS-E8q-E8qOOQO<<IX<<IXOOQPAN>jAN>jOIUQaO,5;]OOQO-E8o-E8oOI`QdO,5;[OOQO-E8n-E8nOOQW<<Hh<<HhOOQW<<Hl<<HlOIjQhO<<HlOI{QhO,5;ZOJWQ`O,5;ZOOQO-E8m-E8mOJ]QdO1G1dOBZQdO'#EuOJgQ`O7+%rOOQW7+%r7+%rOJoQ!bO1G/`OOQ[7+$y7+$yOJzQhO7+$yPKRQ`O'#EnOOQO,5;d,5;dOOQO-E8v-E8vOOQS1G0}1G0}OKWQ`OAN>WO&lQdO1G0uOK]Q`O7+'OOOQO,5;a,5;aOOQO-E8s-E8sOOQW<<I^<<I^OOQ[<<He<<HePOQW,5;Y,5;YOOQWG23rG23rOKeQdO7+&a",stateData:"Kx~O#sOS#tQQ~OW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#oRO~OQiOW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#ohO~O#m$SP~P!dO#tmO~O#ooO~O]qO`rOarOjsOmtO!juO!mwO#nvO~OpzO!^xO~P$SOc!QO#o|O#p}O~O#o!RO~O#o!TO~OW[OZ[O]TO`VOaVOjWOmXO!jYO!mZO#oRO~OS!]Oe!YO!V![O!Y!`O#q!XOp$TP~Ok$TP~P&POQ!jOe!cOm!dOp!eOr!mOt!mOz!kO!`!lO#o!bO#p!hO#}!fO~Ot!qO!`!lO#o!pO~Ot!sO#o!sO~OS!]Oe!YO!V![O!Y!`O#q!XO~Oe!vOpzO#Z!xO~O]YX`YX`!pXaYXjYXmYXpYX!^YX!jYX!mYX#nYX~O`!zO~Ok!{O#m$SXo$SX~O#m$SXo$SX~P!dO#u#OO#v#OO#w#QO~Oc#UO#o|O#p}O~OpzO!^xO~Oo$SP~P!dOe#`O~Oe#aO~Ol#bO!h#cO~O]qO`rOarOjsOmtO~Op!ia!^!ia!j!ia!m!ia#n!iad!ia~P*zOp!la!^!la!j!la!m!la#n!lad!la~P*zOR#gOS!]Oe!YOr#gOt#gO!V![O!Y!`O#q#dO#}!fO~O!R#iO!^#jOk$TXp$TX~Oe#mO~Ok#oOpzO~Oe!vO~O]#rO`#rOd#uOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl#wO~P&lO]#rO`#rOi#rOj#rOk#rOo#yO~P&lOP#zOSsXesXksXvsX!VsX!YsX!usX!wsX#qsX!TsXQsX]sX`sXdsXisXjsXmsXpsXrsXtsXzsX!`sX#osX#psX#}sXlsXosX!^sX!qsX#msX~Ov#{O!u#|O!w#}Ok$TP~P'tOe#aOS#{Xk#{Xv#{X!V#{X!Y#{X!u#{X!w#{X#q#{XQ#{X]#{X`#{Xd#{Xi#{Xj#{Xm#{Xp#{Xr#{Xt#{Xz#{X!`#{X#o#{X#p#{X#}#{Xl#{Xo#{X!^#{X!q#{X#m#{X~Oe$RO~Oe$TO~Ok$VOv#{O~Ok$WO~Ot$XO!`!lO~Op$YO~OpzO!R#iO~OpzO#Z$`O~O!q$bOk!oa#m!oao!oa~P&lOk#hX#m#hXo#hX~P!dOk!{O#m$Sao$Sa~O#u#OO#v#OO#w$hO~Ol$jO!h$kO~Op!ii!^!ii!j!ii!m!ii#n!iid!ii~P*zOp!ki!^!ki!j!ki!m!ki#n!kid!ki~P*zOp!li!^!li!j!li!m!li#n!lid!li~P*zOp#fa!^#fa~P$SOo$lO~Od$RP~P%_Od#zP~P&lO`!PXd}X!R}X!T!PX~O`$sO!T$tO~Od$uO!R#iO~Ok#jXp#jX!^#jX~P'tO!^#jOk$Tap$Ta~O!R#iOk!Uap!Ua!^!Uad!Ua`!Ua~OS!]Oe!YO!V![O!Y!`O#q$yO~Od$QP~P9dOv#{OQ#|X]#|X`#|Xd#|Xe#|Xi#|Xj#|Xk#|Xm#|Xp#|Xr#|Xt#|Xz#|X!`#|X#o#|X#p#|X#}#|Xl#|Xo#|X~O]#rO`#rOd%OOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl%PO~P&lO]#rO`#rOi#rOj#rOk#rOo%QO~P&lOe%SOS!tXk!tX!V!tX!Y!tX#q!tX~Ok%TO~Od%YOt%ZO!a%ZO~Ok%[O~Oo%cO#o%^O#}%]O~Od%dO~P$SOv#{O!^%hO!q%jOk!oi#m!oio!oi~P&lOk#ha#m#hao#ha~P!dOk!{O#m$Sio$Si~O!^%mOd$RX~P$SOd%oO~Ov#{OQ#`Xd#`Xe#`Xm#`Xp#`Xr#`Xt#`Xz#`X!^#`X!`#`X#o#`X#p#`X#}#`X~O!^%qOd#zX~P&lOd%sO~Ol%tOv#{O~OR#gOr#gOt#gO#q%vO#}!fO~O!R#iOk#jap#ja!^#ja~O`!PXd}X!R}X!^}X~O!R#iO!^%xOd$QX~O`%zO~Od%{O~O#o%|O~Ok&OO~O`&PO!R#iO~Od&ROk&QO~Od&UO~OP#zOpsX!^sXdsX~O#}%]Op#TX!^#TX~OpzO!^&WO~Oo&[O#o%^O#}%]O~Ov#{OQ#gXe#gXk#gXm#gXp#gXr#gXt#gXz#gX!^#gX!`#gX!q#gX#m#gX#o#gX#p#gX#}#gXo#gX~O!^%hO!q&`Ok!oq#m!oqo!oq~P&lOl&aOv#{O~Od#eX!^#eX~P%_O!^%mOd$Ra~Od#dX!^#dX~P&lO!^%qOd#za~Od&fO~P&lOd&gO!T&hO~Od#cX!^#cX~P9dO!^%xOd$Qa~O]&mOd&oO~OS#bae#ba!V#ba!Y#ba#q#ba~Od&qO~PG]Od&qOk&rO~Ov#{OQ#gae#gak#gam#gap#gar#gat#gaz#ga!^#ga!`#ga!q#ga#m#ga#o#ga#p#ga#}#gao#ga~Od#ea!^#ea~P$SOd#da!^#da~P&lOR#gOr#gOt#gO#q%vO#}%]O~O!R#iOd#ca!^#ca~O`&xO~O!^%xOd$Qi~P&lO]&mOd&|O~Ov#{Od|ik|i~Od&}O~PG]Ok'OO~Od'PO~O!^%xOd$Qq~Od#cq!^#cq~P&lO#s!a#t#}]#}v!m~",goto:"2h$UPPPPP$VP$YP$c$uP$cP%X$cPP%_PPP%e%o%oPPPPP%oPP%oP&]P%oP%o'W%oP't'w'}'}(^'}P'}P'}P'}'}P(m'}(yP(|PP)p)v$c)|$c*SP$cP$c$cP*Y*{+YP$YP+aP+dP$YP$YP$YP+j$YP+m+p+s+z$YP$YPP$YP,P,V,f,|-[-b-l-r-x.O.U.`.f.l.rPPPPPPPPPPP.x/R/w/z0|P1U1u2O2R2U2[RnQ_^OP`kz!{$dq[OPYZ`kuvwxz!v!{#`$d%mqSOPYZ`kuvwxz!v!{#`$d%mQpTR#RqQ!OVR#SrQ#S!QS$Q!i!jR$i#U!V!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'Q!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QU#g!Y$t&hU%`$Y%b&WR&V%_!V!iac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QR$S!kQ%W$RR&S%Xk!^]bf!Y![!g#i#j#m$P$R%X%xQ#e!YQ${#mQ%w$tQ&j%xR&w&hQ!ygQ#p!`Q$^!xR%f$`R#n!]!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QQ!qdR$X!rQ!PVR#TrQ#S!PR$i#TQ!SWR#VsQ!UXR#WtQ{UQ!wgQ#^yQ#o!_Q$U!nQ$[!uQ$_!yQ%e$^Q&Y%aQ&]%fR&v&XSjPzQ!}kQ$c!{R%k$dZiPkz!{$dR$P!gQ%}%SR&z&mR!rdR!teR$Z!tS%a$Y%bR&t&WV%_$Y%b&WQ#PmR$g#PQ`OSkPzU!a`k$dR$d!{Q$p#aY%p$p%u&d&l'QQ%u$sQ&d%qQ&l%zR'Q&xQ#t!cQ#v!dQ#x!eV$}#t#v#xQ%X$RR&T%XQ%y$zS&k%y&yR&y&lQ%r$pR&e%rQ%n$mR&c%nQyUR#]yQ%i$aR&_%iQ!|jS$e!|$fR$f!}Q&n%}R&{&nQ#k!ZR$x#kQ%b$YR&Z%bQ&X%aR&u&X__OP`kz!{$d^UOP`kz!{$dQ!VYQ!WZQ#XuQ#YvQ#ZwQ#[xQ$]!vQ$m#`R&b%mR$q#aQ!gaQ!oc[#q!c!d!e#t#v#xQ$a!zd$o#a$p$s%q%u%z&d&l&x'QQ$r#cQ%R#{S%g$a%iQ%l$kQ&^%hR&p&P]#s!c!d!e#t#v#xW!Z]b!g$PQ!ufQ#f!YQ#l![Q$v#iQ$w#jQ$z#mS%V$R%XR&i%xQ#h!YQ%w$tR&w&hR$|#mR$n#`QlPR#_zQ!_]Q!nbQ$O!gR%U$P",nodeNames:"â  Unit VariableName VariableName QueryCallee Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector . ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue AtKeyword # ; ] [ BracketedValue } { BracedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee IfExpression if ArgList IfBranch KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp ComparisonQuery CompareOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector ParenthesizedSelector CallQuery ArgList , CallLiteral CallTag ParenthesizedContent PseudoClassName ArgList IdSelector IdName AttributeSelector AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp Block Declaration PropertyName Important ImportStatement import Layer layer LayerName layer MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList KeyframeSelector KeyframeRangeName SupportsStatement supports ScopeStatement scope to AtRule Styles",maxTerm:143,nodeProps:[["isolate",-2,5,36,""],["openedBy",20,"(",28,"[",31,"{"],["closedBy",21,")",29,"]",32,"}"]],propSources:[gy],skippedNodes:[0,5,106],repeatNodeCount:15,tokenData:"JQ~R!YOX$qX^%i^p$qpq%iqr({rs-ust/itu6Wuv$qvw7Qwx7cxy9Qyz9cz{9h{|:R|}>t}!O?V!O!P?t!P!Q@]!Q![AU![!]BP!]!^B{!^!_C^!_!`DY!`!aDm!a!b$q!b!cEn!c!}$q!}#OG{#O#P$q#P#QH^#Q#R6W#R#o$q#o#pHo#p#q6W#q#rIQ#r#sIc#s#y$q#y#z%i#z$f$q$f$g%i$g#BY$q#BY#BZ%i#BZ$IS$q$IS$I_%i$I_$I|$q$I|$JO%i$JO$JT$q$JT$JU%i$JU$KV$q$KV$KW%i$KW&FU$q&FU&FV%i&FV;'S$q;'S;=`Iz<%lO$q`$tSOy%Qz;'S%Q;'S;=`%c<%lO%Q`%VS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q`%fP;=`<%l%Q~%nh#s~OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Q~'ah#s~!a`OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Qj)OUOy%Qz#]%Q#]#^)b#^;'S%Q;'S;=`%c<%lO%Qj)gU!a`Oy%Qz#a%Q#a#b)y#b;'S%Q;'S;=`%c<%lO%Qj*OU!a`Oy%Qz#d%Q#d#e*b#e;'S%Q;'S;=`%c<%lO%Qj*gU!a`Oy%Qz#c%Q#c#d*y#d;'S%Q;'S;=`%c<%lO%Qj+OU!a`Oy%Qz#f%Q#f#g+b#g;'S%Q;'S;=`%c<%lO%Qj+gU!a`Oy%Qz#h%Q#h#i+y#i;'S%Q;'S;=`%c<%lO%Qj,OU!a`Oy%Qz#T%Q#T#U,b#U;'S%Q;'S;=`%c<%lO%Qj,gU!a`Oy%Qz#b%Q#b#c,y#c;'S%Q;'S;=`%c<%lO%Qj-OU!a`Oy%Qz#h%Q#h#i-b#i;'S%Q;'S;=`%c<%lO%Qj-iS!qY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q~-xWOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c<%lO-u~.gOt~~.jRO;'S-u;'S;=`.s;=`O-u~.vXOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c;=`<%l-u<%lO-u~/fP;=`<%l-uj/nYjYOy%Qz!Q%Q!Q![0^![!c%Q!c!i0^!i#T%Q#T#Z0^#Z;'S%Q;'S;=`%c<%lO%Qj0cY!a`Oy%Qz!Q%Q!Q![1R![!c%Q!c!i1R!i#T%Q#T#Z1R#Z;'S%Q;'S;=`%c<%lO%Qj1WY!a`Oy%Qz!Q%Q!Q![1v![!c%Q!c!i1v!i#T%Q#T#Z1v#Z;'S%Q;'S;=`%c<%lO%Qj1}YrY!a`Oy%Qz!Q%Q!Q![2m![!c%Q!c!i2m!i#T%Q#T#Z2m#Z;'S%Q;'S;=`%c<%lO%Qj2tYrY!a`Oy%Qz!Q%Q!Q![3d![!c%Q!c!i3d!i#T%Q#T#Z3d#Z;'S%Q;'S;=`%c<%lO%Qj3iY!a`Oy%Qz!Q%Q!Q![4X![!c%Q!c!i4X!i#T%Q#T#Z4X#Z;'S%Q;'S;=`%c<%lO%Qj4`YrY!a`Oy%Qz!Q%Q!Q![5O![!c%Q!c!i5O!i#T%Q#T#Z5O#Z;'S%Q;'S;=`%c<%lO%Qj5TY!a`Oy%Qz!Q%Q!Q![5s![!c%Q!c!i5s!i#T%Q#T#Z5s#Z;'S%Q;'S;=`%c<%lO%Qj5zSrY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qd6ZUOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qd6tS!hS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qb7VSZQOy%Qz;'S%Q;'S;=`%c<%lO%Q~7fWOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z<%lO7c~8RRO;'S7c;'S;=`8[;=`O7c~8_XOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z;=`<%l7c<%lO7c~8}P;=`<%l7cj9VSeYOy%Qz;'S%Q;'S;=`%c<%lO%Q~9hOd~n9oUWQvWOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qj:YWvW!mQOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj:wU!a`Oy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Qj;bY!a`#}YOy%Qz!Q%Q!Q![;Z![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj<VY!a`Oy%Qz{%Q{|<u|}%Q}!O<u!O!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj<zU!a`Oy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj=eU!a`#}YOy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj>O[!a`#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj>yS!^YOy%Qz;'S%Q;'S;=`%c<%lO%Qj?[WvWOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj?yU]YOy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Q~@bTvWOy%Qz{@q{;'S%Q;'S;=`%c<%lO%Q~@xS!a`#t~Oy%Qz;'S%Q;'S;=`%c<%lO%QjAZ[#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%QjBUU`YOy%Qz![%Q![!]Bh!];'S%Q;'S;=`%c<%lO%QbBoSaQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjCQSkYOy%Qz;'S%Q;'S;=`%c<%lO%QhCcU!TWOy%Qz!_%Q!_!`Cu!`;'S%Q;'S;=`%c<%lO%QhC|S!TW!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QlDaS!TW!hSOy%Qz;'S%Q;'S;=`%c<%lO%QjDtV!jQ!TWOy%Qz!_%Q!_!`Cu!`!aEZ!a;'S%Q;'S;=`%c<%lO%QbEbS!jQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjEqYOy%Qz}%Q}!OFa!O!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjFfW!a`Oy%Qz!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjGV[iY!a`Oy%Qz}%Q}!OGO!O!Q%Q!Q![GO![!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjHQSmYOy%Qz;'S%Q;'S;=`%c<%lO%QnHcSl^Oy%Qz;'S%Q;'S;=`%c<%lO%QjHtSpYOy%Qz;'S%Q;'S;=`%c<%lO%QjIVSoYOy%Qz;'S%Q;'S;=`%c<%lO%QfIhU!mQOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Q`I}P;=`<%l$q",tokenizers:[dy,py,fy,cy,1,2,3,4,new Mc("m~RRYZ[z{a~~g~aO#v~~dP!P!Qg~lO#w~~",28,129)],topRules:{StyleSheet:[0,6],Styles:[1,105]},specialized:[{term:124,get:s=>my[s]||-1},{term:125,get:s=>yy[s]||-1},{term:4,get:s=>vy[s]||-1},{term:25,get:s=>Oy[s]||-1},{term:123,get:s=>by[s]||-1}],tokenPrec:1963});let qn=null;function zn(){if(!qn&&typeof document=="object"&&document.body){let{style:s}=document.body,e=[],t=new Set;for(let i in s)i!="cssText"&&i!="cssFloat"&&typeof s[i]=="string"&&(/[A-Z]/.test(i)&&(i=i.replace(/[A-Z]/g,r=>"-"+r.toLowerCase())),t.has(i)||(e.push(i),t.add(i)));qn=e.sort().map(i=>({type:"property",label:i,apply:i+": "}))}return qn||[]}const Uh=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map(s=>({type:"class",label:s})),jh=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(s=>({type:"keyword",label:s})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(s=>({type:"constant",label:s}))),Sy=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(s=>({type:"type",label:s})),xy=["@charset","@color-profile","@container","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@position-try","@property","@scope","@starting-style","@supports","@view-transition"].map(s=>({type:"keyword",label:s})),kt=/^(\w[\w-]*|-\w[\w-]*|)$/,ky=/^-(-[\w-]*)?$/;function Cy(s,e){var t;if((s.name=="("||s.type.isError)&&(s=s.parent||s),s.name!="ArgList")return!1;let i=(t=s.parent)===null||t===void 0?void 0:t.firstChild;return i?.name!="Callee"?!1:e.sliceString(i.from,i.to)=="var"}const Hh=new tm,Ay=["Declaration"];function Py(s){for(let e=s;;){if(e.type.isTop)return e;if(!(e=e.parent))return s}}function Lc(s,e,t){if(e.to-e.from>4096){let i=Hh.get(e);if(i)return i;let r=[],n=new Set,o=e.cursor(Ae.IncludeAnonymous);if(o.firstChild())do for(let l of Lc(s,o.node,t))n.has(l.label)||(n.add(l.label),r.push(l));while(o.nextSibling());return Hh.set(e,r),r}else{let i=[],r=new Set;return e.cursor().iterate(n=>{var o;if(t(n)&&n.matchContext(Ay)&&((o=n.node.nextSibling)===null||o===void 0?void 0:o.name)==":"){let l=s.sliceString(n.from,n.to);r.has(l)||(r.add(l),i.push({label:l,type:"variable"}))}}),i}}const Ty=s=>e=>{let{state:t,pos:i}=e,r=ut(t).resolveInner(i,-1),n=r.type.isError&&r.from==r.to-1&&t.doc.sliceString(r.from,r.to)=="-";if(r.name=="PropertyName"||(n||r.name=="TagName")&&/^(Block|Styles)$/.test(r.resolve(r.to).name))return{from:r.from,options:zn(),validFor:kt};if(r.name=="ValueName")return{from:r.from,options:jh,validFor:kt};if(r.name=="PseudoClassName")return{from:r.from,options:Uh,validFor:kt};if(s(r)||(e.explicit||n)&&Cy(r,t.doc))return{from:s(r)||n?r.from:i,options:Lc(t.doc,Py(r),s),validFor:ky};if(r.name=="TagName"){for(let{parent:a}=r;a;a=a.parent)if(a.name=="Block")return{from:r.from,options:zn(),validFor:kt};return{from:r.from,options:Sy,validFor:kt}}if(r.name=="AtKeyword")return{from:r.from,options:xy,validFor:kt};if(!e.explicit)return null;let o=r.resolve(i),l=o.childBefore(i);return l&&l.name==":"&&o.name=="PseudoClassSelector"?{from:i,options:Uh,validFor:kt}:l&&l.name==":"&&o.name=="Declaration"||o.name=="ArgList"?{from:i,options:jh,validFor:kt}:o.name=="Block"||o.name=="Styles"?{from:i,options:zn(),validFor:kt}:null},Ey=Ty(s=>s.name=="VariableName"),Yh=ms.define({name:"css",parser:wy.configure({props:[ic.add({Declaration:km()}),Cm.add({"Block KeyframeList":Am})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function My(){return new gm(Yh,Yh.data.of({autocomplete:Ey}))}const Ry="#e5c07b",Xh="#e06c75",Dy="#56b6c2",Qy="#ffffff",ns="#abb2bf",Ro="#7d8799",_y="#61afef",Iy="#98c379",Gh="#d19a66",Ly="#c678dd",By="#21252b",Kh="#2c313a",Zh="#282c34",Wn="#353a42",Ny="#3E4451",Jh="#528bff",Fy=K.theme({"&":{color:ns,backgroundColor:Zh},".cm-content":{caretColor:Jh},".cm-cursor, .cm-dropCursor":{borderLeftColor:Jh},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Ny},".cm-panels":{backgroundColor:By,color:ns},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Zh,color:Ro,border:"none"},".cm-activeLineGutter":{backgroundColor:Kh},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Wn},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Wn,borderBottomColor:Wn},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Kh,color:ns}}},{dark:!0}),qy=Bs.define([{tag:M.keyword,color:Ly},{tag:[M.name,M.deleted,M.character,M.propertyName,M.macroName],color:Xh},{tag:[M.function(M.variableName),M.labelName],color:_y},{tag:[M.color,M.constant(M.name),M.standard(M.name)],color:Gh},{tag:[M.definition(M.name),M.separator],color:ns},{tag:[M.typeName,M.className,M.number,M.changed,M.annotation,M.modifier,M.self,M.namespace],color:Ry},{tag:[M.operator,M.operatorKeyword,M.url,M.escape,M.regexp,M.link,M.special(M.string)],color:Dy},{tag:[M.meta,M.comment],color:Ro},{tag:M.strong,fontWeight:"bold"},{tag:M.emphasis,fontStyle:"italic"},{tag:M.strikethrough,textDecoration:"line-through"},{tag:M.link,color:Ro,textDecoration:"underline"},{tag:M.heading,fontWeight:"bold",color:Xh},{tag:[M.atom,M.bool,M.special(M.variableName)],color:Gh},{tag:[M.processingInstruction,M.string,M.inserted],color:Iy},{tag:M.invalid,color:Qy}]),zy=[Fy,Tm(qy)];var Wy=Ue('<div class="w-100 h-100" style="min-height: 500px; border-radius: 0.375rem; overflow: hidden;"></div>');function $y(s,e){ni(e,!1);let t=Et(e,"value",12,""),i=Et(e,"onChange",8,()=>{}),r=Et(e,"container",12,void 0),n=qe(null);tu(()=>{const l=he.create({doc:t(),extensions:[Yg(),My(),zy,Vf.of(q0),K.editable.of(!0),K.updateListener.of(a=>{if(a.docChanged){const u=a.state.doc.toString();t(u),i()(u)}})]});return ve(n,new K({state:l,parent:r()})),r()&&r(r().highlightLine=a=>{if(!_(n))return;const u=_(n).state.doc.line(a);u&&(_(n).dispatch({selection:{anchor:u.from},effects:K.scrollIntoView(u.from,{y:"center"})}),_(n).focus())},!0),()=>{_(n)?.destroy(),ve(n,null)}}),zt(()=>(_(n),We(t())),()=>{if(_(n)&&t()!==_(n).state.doc.toString()){const l=_(n).state.doc.toString();t()!==l&&_(n).dispatch({changes:{from:0,to:l.length,insert:t()}})}}),Ai(),li();var o=Wy();ru(o,l=>r(l),()=>r()),xe(s,o),oi()}var Vy=Ue('<span class="risk-text-high svelte-dyjzmw">ID Used</span>'),Uy=Ue('<span class="risk-text-medium svelte-dyjzmw">High</span>'),jy=Ue('<span class="risk-text-low svelte-dyjzmw">Low</span>'),Hy=Ue('<tr><td class="font-monospace small text-break svelte-dyjzmw"> </td><td class="text-center svelte-dyjzmw"><span> </span></td><td class="text-center svelte-dyjzmw"><!></td></tr>'),Yy=Ue('<div class="table-responsive"><table class="table table-sm table-hover align-middle specificity-table svelte-dyjzmw"><thead class="table-head svelte-dyjzmw"><tr><th class="sortable-header svelte-dyjzmw">Selector <!></th><th class="text-center sortable-header svelte-dyjzmw">Specificity <!></th><th class="text-center svelte-dyjzmw">Risk</th></tr></thead><tbody></tbody></table></div>');function Xy(s,e){ni(e,!1);const t=S=>({value:S.length,a:S.includes("#")?1:0,toString:()=>{S.split(/[\.#\[\]:]/).filter(k=>k.length>0);const x=(S.match(/#/g)||[]).length,A=(S.match(/[\.\[\]:]/g)||[]).length-x,C=(S.match(/\w+/g)||[]).length-A;return`(${x}, ${A}, ${Math.max(0,C)})`}}),i=S=>S.a>=1?"id":S.value>=100?"class":"tag";let r=Et(e,"rules",24,()=>[]);const n=$c();let o=qe([]),l=qe("specificity"),a=qe(!1);function u(S){n("rowclick",{selector:S.selector,position:S.position})}function h(S){return S.a>=1?"risk-high-id":S.value>=100?"risk-medium-high":"risk-low"}zt(()=>(We(r()),_(l),_(a)),()=>{ve(o,[...r()].map(S=>({...S,spec:t(S.selector)})).sort((S,x)=>_(l)==="specificity"?_(a)?S.spec.value-x.spec.value:x.spec.value-S.spec.value:_(a)?S.selector.localeCompare(x.selector):x.selector.localeCompare(S.selector)))}),Ai(),li();var f=Yy(),c=G(f),d=G(c),g=G(d),p=G(g),m=pe(G(p));{var y=S=>{var x=cl();Tt(()=>De(x,_(a)?"â²":"â¼")),xe(S,x)};Bt(m,S=>{_(l)==="selector"&&S(y)})}Y(p);var O=pe(p),w=pe(G(O));{var b=S=>{var x=cl();Tt(()=>De(x,_(a)?"â²":"â¼")),xe(S,x)};Bt(w,S=>{_(l)==="specificity"&&S(b)})}Y(O),os(),Y(g),Y(d);var v=pe(d);Do(v,5,()=>_(o),S=>S.selector,(S,x)=>{const A=pl(()=>(_(x),Oe(()=>_(x).spec))),C=pl(()=>(We(_(A)),Oe(()=>h(_(A)))));var k=Hy(),I=G(k),R=G(I,!0);Y(I);var U=pe(I),$=G(U),Q=G($,!0);Y($),Y(U);var V=pe(U),te=G(V);{var X=re=>{var B=Vy();xe(re,B)},ne=re=>{var B=xs(),N=ks(B);{var T=D=>{var W=Uy();xe(D,W)},P=D=>{var W=jy();xe(D,W)};Bt(N,D=>{We(_(A)),Oe(()=>_(A).value>=100)?D(T):D(P,!1)},!0)}xe(re,B)};Bt(te,re=>{We(_(A)),Oe(()=>_(A).a>=1)?re(X):re(ne,!1)})}Y(V),Y(k),Tt((re,B)=>{Ui(k,1,`cursor-pointer table-row ${_(C)??""}`,"svelte-dyjzmw"),De(R,(_(x),Oe(()=>_(x).selector))),Ui($,1,re,"svelte-dyjzmw"),De(Q,B)},[()=>(We(_(A)),Oe(()=>`spec-badge spec-${i(_(A))}`)),()=>(We(_(A)),Oe(()=>_(A).toString()))]),Jt("click",k,()=>u(_(x))),xe(S,k)}),Y(v),Y(c),Y(f),Jt("click",p,()=>{ve(l,"selector"),ve(a,!_(a))}),Jt("click",O,()=>{ve(l,"specificity"),ve(a,!_(a))}),xe(s,f),oi()}function ui(s){let e=0,t=0,i=0;s=s.replace(/:(not|is|where|has)\([^)]*\)/gi,n=>{const o=n.slice(n.indexOf("(")+1,-1),l=ui(o);return e+=l.a,t+=l.b,i+=l.c,""}),e+=(s.match(/#/g)||[]).length,t+=(s.match(/\./g)||[]).length,t+=(s.match(/\[.*?\]/g)||[]).length,t+=(s.match(/:[a-zA-Z-]+\(?/g)||[]).length,i+=(s.match(/^[a-zA-Z]+| [a-zA-Z]+/g)||[]).length,i+=(s.match(/::/g)||[]).length;const r=e*1e3+t*100+i*10;return{original:s,a:e,b:t,c:i,d:0,value:r,toString:()=>`${e},${t},${i},0`}}function Gy(s){const e=ui(s),t=[];let i=s.replace(/:where\(([^)]+)\)/g,(l,a)=>a.includes(",")?l:a.trim()).replace(/:is\(([^)]+)\)/g,(l,a)=>{const u=a.split(",").map(h=>h.trim()).filter(Boolean);return u.length===1?u[0]:l}).trim();if(i!==s&&i){const l=ui(i);l.value<e.value&&t.push({selector:i,specificity:l,risk:"Safe",reason:"Removed unnecessary :is()/:where() wrapper"})}if(i=s.replace(/\*/g,"").trim(),i!==s&&i){const l=ui(i);l.value<e.value&&t.push({selector:i,specificity:l,risk:"Safe",reason:"Removed universal selector *"})}if(e.a>=1){const l=s.replace(/#([\w-]+)/g,".refactor-$1"),a=ui(l);a.value<e.value&&t.push({selector:l,specificity:a,risk:"Medium",reason:"Replaced ID with class (verify uniqueness manually)"})}const r=s.split(/\s+/).filter(Boolean);if(r.length>3){const l=r.slice(-2).join(" "),a=ui(l);a.value<e.value&&t.push({selector:l,specificity:a,risk:"Medium",reason:"Removed redundant ancestor selectors (may need context check)"})}const n=new Set;return t.filter(l=>n.has(l.selector)?!1:(n.add(l.selector),!0)).sort((l,a)=>l.specificity.value-a.specificity.value).slice(0,4)}var Ky=Ue('<div class="card mb-2"><div class="card-body py-2 px-3"><div class="d-flex justify-content-between align-items-center"><code class="small text-success me-3"> </code> <div class="text-end"><span class="badge bg-secondary me-2"> </span> <span> </span></div></div> <small class="text-muted d-block mt-1"> </small> <button class="btn btn-sm btn-outline-primary mt-2">Copy selector</button></div></div>'),Zy=Ue('<div class="mt-3"><h6 class="text-primary mb-2">Suggestions to reduce specificity</h6> <!></div>');function Jy(s,e){ni(e,!1);const t=qe();let i=Et(e,"selector",8,"");zt(()=>We(i()),()=>{ve(t,Gy(i()))}),Ai(),li();var r=xs(),n=ks(r);{var o=l=>{var a=Zy(),u=pe(G(a),2);Do(u,1,()=>_(t),nu,(h,f)=>{var c=Ky(),d=G(c),g=G(d),p=G(g),m=G(p,!0);Y(p);var y=pe(p,2),O=G(y),w=G(O,!0);Y(O);var b=pe(O,2),v=G(b,!0);Y(b),Y(y),Y(g);var S=pe(g,2),x=G(S,!0);Y(S);var A=pe(S,2);Y(d),Y(c),Tt(C=>{De(m,(_(f),Oe(()=>_(f).selector))),De(w,C),Ui(b,1,(_(f),Oe(()=>`badge ${_(f).risk==="Safe"?"bg-success":"bg-warning"}`))),De(v,(_(f),Oe(()=>_(f).risk))),De(x,(_(f),Oe(()=>_(f).reason)))},[()=>(_(f),Oe(()=>_(f).specificity.toString()))]),Jt("click",A,()=>ou(_(f).selector)),xe(h,c)}),Y(a),xe(l,a)};Bt(n,l=>{_(t),Oe(()=>_(t).length>0)&&l(o)})}xe(s,r),oi()}function ev(s){const e=[];return s.split(`
`).forEach((i,r)=>{const n=i.trim();if(n.includes("!important")){const o=n.match(/^([\w-]+)/),l=o?o[0]:"unknown";e.push({line:r+1,property:l,declaration:n.replace(/;/g,""),risk:eu(l)?"Low":"High",suggestion:eu(l)?"Can likely remove !important â property is naturally strong":"Keep !important â conflicts with inline styles or third-party"})}}),e}function eu(s){return["color","background","font-size","margin","padding","border","display","position"].some(t=>s.startsWith(t))}var tv=Ue('<div class="col"><div class="card border-danger"><div class="card-body py-2"><code class="small d-block text-danger"> </code> <small class="text-muted"> </small> <span> </span> <p class="mt-2 mb-0 small"> </p></div></div></div>'),iv=Ue('<div class="mt-4"><h5 class="text-danger"> </h5> <div class="row row-cols-1 row-cols-md-2 g-3"></div></div>');function rv(s,e){ni(e,!1);const t=qe();let i=Et(e,"cssText",8,""),r=Et(e,"show",8,!1);zt(()=>(We(r()),We(i())),()=>{ve(t,r()?ev(i()):[])}),Ai(),li();var n=xs(),o=ks(n);{var l=a=>{var u=iv(),h=G(u),f=G(h);Y(h);var c=pe(h,2);Do(c,5,()=>_(t),nu,(d,g)=>{var p=tv(),m=G(p),y=G(m),O=G(y),w=G(O,!0);Y(O);var b=pe(O,2),v=G(b);Y(b);var S=pe(b,2),x=G(S);Y(S);var A=pe(S,2),C=G(A,!0);Y(A),Y(y),Y(m),Y(p),Tt(()=>{De(w,(_(g),Oe(()=>_(g).declaration))),De(v,`Line ${_(g),Oe(()=>_(g).line)??""}`),Ui(S,1,(_(g),Oe(()=>`badge ms-2 ${_(g).risk==="Low"?"bg-success":"bg-danger"}`))),De(x,`${_(g),Oe(()=>_(g).risk)??""} risk`),De(C,(_(g),Oe(()=>_(g).suggestion)))}),xe(d,p)}),Y(c),Y(u),Tt(()=>De(f,`!important usage (${_(t),Oe(()=>_(t).length)??""})`)),xe(a,u)};Bt(o,a=>{We(r()),_(t),Oe(()=>r()&&_(t).length>0)&&a(l)})}xe(s,n),oi()}var sv=Ue('<button class="btn btn-success btn-lg mt-3"> </button>');function nv(s,e){ni(e,!1);let t=Et(e,"cleanedCss",8,"");async function i(){await ou(t())&&alert("Full cleaned CSS copied to clipboard!")}li();var r=sv(),n=G(r);Y(r),Tt(o=>{r.disabled=!t(),De(n,`Copy Cleaned CSS (${o??""} KB)`)},[()=>(We(t()),Oe(()=>(t().length/1024).toFixed(1)))]),Jt("click",r,i),xe(s,r),oi()}var ov=Ue('<div class="share-section mt-4 svelte-oevkhj"><p class="text-muted small mb-2">Share this exact CSS state:</p> <div class="input-group svelte-oevkhj"><input type="text" class="form-control form-control-sm svelte-oevkhj" readonly="" aria-label="Shareable link"/> <button> </button></div> <p class="text-muted small mt-2 mb-0">Anyone with this link sees your exact CSS + scroll position.</p></div>');function lv(s,e){ni(e,!1);const t=qe();let i=Et(e,"cssText",8,""),r=qe(!1);async function n(){if(_(t))try{await navigator.clipboard.writeText(_(t)),ve(r,!0),setTimeout(()=>ve(r,!1),2e3)}catch{const u=document.createElement("textarea");u.value=_(t),document.body.appendChild(u),u.select(),document.execCommand("copy"),document.body.removeChild(u),ve(r,!0),setTimeout(()=>ve(r,!1),2e3)}}zt(()=>(We(i()),xa),()=>{ve(t,i().trim()?`${window.location.origin}${Hc}${xa(i())}`:"")}),Ai(),li();var o=xs(),l=ks(o);{var a=u=>{var h=ov(),f=pe(G(h),2),c=G(f);Gc(c);var d=pe(c,2),g=G(d,!0);Y(d),Y(f),os(2),Y(h),Tt(()=>{Kc(c,_(t)),Ui(d,1,`btn ${_(r)?"btn-success":"btn-outline-primary"} btn-sm`,"svelte-oevkhj"),De(g,_(r)?"Copied!":"Copy Link")}),Jt("click",d,n),Ii(3,h,()=>iu),xe(u,h)};Bt(l,u=>{We(ml),We(i()),Oe(()=>ml&&i().trim())&&u(a)})}xe(s,o),oi()}var av=Ue('<meta name="description" content="Free, zero-dependency, 100% accurate CSS specificity analyzer. Instantly visualize, reduce, and refactor overly specific selectors â including :is(), :has(), nesting, and Tailwind @apply. No data leaves your browser."/> <meta property="og:type" content="website"/> <meta property="og:title" content="CSS Specificity Refactor Tool â Clean Your Selectors in Seconds"/> <meta property="og:description" content="The only browser-native tool that correctly calculates specificity for modern CSS. No outdated libraries. No privacy invasion. Just pure, accurate refactoring."/> <meta property="og:url" content="https://axelbase.github.io/css-specificity-refactor/"/> <meta property="og:site_name" content="CSS Specificity Refactor Tool"/> <meta property="og:image" content="https://axelbase.github.io/css-specificity-refactor/og-image.jpg"/> <meta property="og:image:width" content="1200"/> <meta property="og:image:height" content="630"/> <meta property="og:image:alt" content="CSS Specificity Refactor Tool â Clean, fast, private, accurate"/> <meta name="twitter:card" content="summary_large_image"/> <meta name="twitter:title" content="CSS Specificity Refactor Tool â Zero-Dependency, 100% Accurate"/> <meta name="twitter:description" content="Finally: a specificity calculator that understands :is(), :has(), nesting, and Tailwind â with no data collection. Try it now."/> <meta name="twitter:image" content="https://axelbase.github.io/css-specificity-refactor/og-image.jpg"/> <meta name="robots" content="index, follow"/> <link rel="canonical" href="https://axelbase.github.io/css-specificity-refactor"/> <meta name="theme-color" content="#0066ff"/> <meta name="viewport" content="width=device-width, initial-scale=1"/>',1),hv=Ue('<div class="glass-card p-3 mb-4 border-warning"><!></div>'),uv=Ue('<main class="container py-4"><div class="row mb-5 justify-content-center text-center"><div class="col-lg-9"><br/> <h1 class="display-4 fw-bold text-gradient mb-3">CSS Specificity Refactor</h1> <p class="lead" style="color: var(--color-text-muted);">Paste your CSS â Identify <span style="color: var(--color-accent); font-weight:bold;">specificity wars</span> â Get safer alternatives.</p></div></div> <div class="row g-4"><div class="col-lg-7"><div class="glass-card h-100 p-3"><div class="d-flex align-items-center mb-3"><span class="badge rounded-pill bg-primary me-2">Input</span> <h5 class="mb-0">Your CSS</h5></div> <div class="editor-container" style="min-height: 450px;"><!></div></div></div> <div class="col-lg-5"><div class="glass-card p-3 mb-4"><div class="d-flex justify-content-between align-items-center mb-3"><h5 class="mb-0">Specificity <span class="badge bg-secondary rounded-pill ms-1"> </span></h5> <button class="btn btn-sm btn-outline-secondary rounded-pill px-3"> </button></div> <div style="max-height: 350px; overflow-y: auto; border-radius: 12px; border: 1px solid var(--glass-border);"><!></div></div> <!> <!> <div class="d-grid gap-3 mt-4"><!> <!></div></div></div> <div class="row justify-content-center mt-5"><div class="col-lg-10"><section id="about" class="glass-card p-5 mb-5 scroll-margin-offset svelte-1uha8ag"><h2 class="text-gradient mb-4">About This Tool</h2> <div class="prose prose-lg"><p>This isnât just another CSS analyzer. This is the <strong>first and only zero-dependency, fully accurate, browser-native CSS specificity refactoring tool built for 2025 and beyond</strong>.</p> <p>Every other tool lies to you. They use outdated libraries that crash on <code>:is()</code>, <code>:has()</code>, nesting, or Tailwindâs <code>@apply</code>. They give false zeros or throw errors on perfectly valid modern CSS. They bloat your bundle with Node.js cruft and phone home with your styles.</p> <p><strong>We fixed all of that.</strong></p> <p>This tool runs 100% in your browser with <strong>no external dependencies</strong> for parsing or specificity calculation. It was forged through months of pain, frustration, and relentless debugging against every broken library on npm â until we finally said: âFine. Weâll do it ourselves.â</p> <p>The result? A hand-crafted parser and specificity engine that correctly handles:</p> <ul class="feature-list svelte-1uha8ag"><li class="svelte-1uha8ag">CSS nesting (native and preprocessor)</li> <li class="svelte-1uha8ag"><code>:is()</code>, <code>:where()</code>, <code>:has()</code></li> <li class="svelte-1uha8ag">Tailwindâs <code>@apply</code> and arbitrary values</li> <li class="svelte-1uha8ag">CSS variables, custom properties, and <code>var()</code></li> <li class="svelte-1uha8ag">Every edge case the spec allows â and a few it doesnât</li></ul> <p>No more âparsing failedâ warnings. No more fake zeros on <code>#header a</code>. No more trusting tools that havenât been updated since 2019.</p> <p>This tool sees your CSS the way <strong>browsers do</strong> â because it calculates specificity exactly like the cascade: inline â ID â class/attribute/pseudo-class â element/pseudo-element.</p> <p>And because everything happens client-side, your code <strong>never leaves your machine</strong>. No telemetry. No analytics. No cloud processing. Your proprietary design system stays yours.</p> <p>We built this because we were tired of bad tools lying to us. We built this because high specificity is silently destroying maintainability in millions of codebases. We built this because <strong>you deserve better</strong>.</p> <p class="italic-note text-center mt-5"><strong>This isnât just a tool. Itâs a statement.</strong><br/> Clean CSS is possible. Low specificity is achievable. And you donât need !important to win.</p></div></section> <section id="how-to" class="glass-card p-5 mb-5 scroll-margin-offset svelte-1uha8ag"><h2 class="text-gradient mb-4">How to Use</h2> <div class="prose prose-lg svelte-1uha8ag"><p>Using this tool is deliberately simple â because refactoring shouldnât require a PhD.</p> <h3 class="mt-5 svelte-1uha8ag">Step 1: Paste Your CSS</h3> <p>Copy any CSS â from a single component, an entire framework, or a legacy monster â and paste it into the editor. The tool instantly parses it using our custom engine. No file upload. No waiting. No data sent anywhere.</p> <h3 class="mt-5 svelte-1uha8ag">Step 2: See the Truth</h3> <p>The right panel shows every selector with its <strong>real specificity score</strong> (1,2,3,0 format). Red = ID used. Orange = dangerously high. Green = safe and reusable.</p> <p>Click any row â the editor instantly jumps to that exact line. No guessing. No searching. Pure precision.</p> <h3 class="mt-5 svelte-1uha8ag">Step 3: Get Intelligent Suggestions</h3> <p>Click a high-specificity selector and watch the magic: the tool generates multiple lower-specificity alternatives using modern patterns:</p> <ul><li>Replace <code>#id</code> with classes</li> <li>Flatten nested chains</li> <li>Use <code>:is()</code> or <code>:where()</code> for forgiveness</li> <li>Remove redundant ancestors</li></ul> <p>Each suggestion shows before/after specificity and risk level. Copy any one with a single click.</p> <h3 class="mt-5 svelte-1uha8ag">Step 4: Share or Export</h3> <p>Click âCopy Share Linkâ â send it to a teammate. They open it â your exact CSS and scroll position load instantly. No accounts. No login. No limits.</p> <h3 class="mt-5 svelte-1uha8ag">Pro Tips</h3> <ul><li>Use the <strong>!important detector</strong> toggle to find hidden landmines</li> <li>Sort by specificity to find the worst offenders fast</li> <li>Paste entire framework CSS (Bootstrap, Tailwind, etc.) â it handles it all</li> <li>Works offline after first load</li></ul> <p class="italic-note text-center mt-5"><strong>One session with this tool will permanently change how you write CSS.</strong></p></div></section> <section id="faq" class="glass-card p-5 mb-5 scroll-margin-offset svelte-1uha8ag"><h2 class="text-gradient mb-4">Frequently Asked Questions</h2> <div class="prose prose-lg svelte-1uha8ag"><h3 class="svelte-1uha8ag">Is my CSS sent to a server?</h3> <p><strong>No. Never.</strong> Everything runs in your browser. We have no backend, no database, no logs. Your code never leaves your machine.</p> <h3 class="svelte-1uha8ag">Why do I see console warnings about "externalized modules"?</h3> <p>Harmless Vite noise. Some libraries (like PostCSS) import Node.js builtins. Vite safely blocks them in browser. The tool works perfectly regardless.</p> <h3 class="svelte-1uha8ag">Does it work with Tailwind, Bootstrap, styled-components?</h3> <p><strong>Yes.</strong> It correctly parses <code>@apply</code>, utility classes, CSS modules, nesting, and even dynamic class names.</p> <h3 class="svelte-1uha8ag">Why does it show 0,0,0,0 for some selectors?</h3> <p>Only if theyâre truly zero (like <code>:where()</code> wrappers). Everything else shows accurate values â including <code>:has()</code>, <code>:is()</code>, and nested rules.</p> <h3 class="svelte-1uha8ag">Can I use this on private/restricted code?</h3> <p><strong>Absolutely.</strong> Since nothing is transmitted, itâs safe for proprietary, classified, or sensitive stylesheets.</p> <h3 class="svelte-1uha8ag">Why not just use DevTools?</h3> <p>DevTools shows computed styles â not source specificity. This tool shows the <strong>actual cascade weight</strong> of your written selectors, so you can prevent problems before they happen.</p> <h3 class="svelte-1uha8ag">Is this open source?</h3> <p>Yes. MIT licensed. Fork it, contribute, or self-host: <a href="https://github.com/axelbase/css-specificity-refactor" target="_blank" rel="noopener">github.com/axelbase/css-specificity-refactor</a></p> <h3 class="svelte-1uha8ag">Will you add linting or auto-fix?</h3> <p>Planned for v2. This version focuses on perfect accuracy and privacy first.</p> <h3 class="svelte-1uha8ag">Why no login or saved history?</h3> <p>Because privacy isnât a feature â itâs the default. We believe your code belongs to you.</p> <p class="italic-note text-center mt-5"><strong>Your CSS. Your rules. Your privacy.</strong><br/> Nothing more. Nothing less.</p></div></section></div></div></main>');function Tv(s,e){ni(e,!1);const t=qe();let i=qe(`/* Paste your CSS here */
.btn { color: #fff; background: #007bff; }
#header .nav > li > a { font-weight: bold; }
`),r=qe([]),n=qe(!1),o=qe("");const l=td(()=>{ve(r,Pd(_(i)))},350);tu(()=>{const X=Rd();X&&X.trim()&&ve(i,X)});let a=qe();function u(X){_(a)&&typeof _(a).highlightLine=="function"&&_(a).highlightLine(X)}let h=qe();zt(()=>_(i),()=>{ve(i,_(i).replace(/^```(?:css)?\n?|```$/g,"").trim())}),zt(()=>_(i),()=>{_(i)&&l()}),zt(()=>_(i),()=>{ve(t,_(i))}),Ai(),li();var f=uv();jc("1uha8ag",X=>{var ne=av();os(34),Vc(()=>{Uc.title="CSS Specificity Refactor Tool â Suggest Lower Specificity Selectors Online"}),xe(X,ne)});var c=G(f),d=pe(c,2),g=G(d),p=G(g),m=pe(G(p),2),y=G(m);ru($y(y,{onChange:()=>l(),get value(){return _(i)},set value(X){ve(i,X)},get container(){return _(a)},set container(X){ve(a,X)},$$legacy:!0}),X=>ve(h,X),()=>_(h)),Y(m),Y(p),Y(g);var O=pe(g,2),w=G(O),b=G(w),v=G(b),S=pe(G(v)),x=G(S,!0);Y(S),Y(v);var A=pe(v,2),C=G(A,!0);Y(A),Y(b);var k=pe(b,2),I=G(k);Xy(I,{get rules(){return _(r)},$$events:{rowclick:X=>{ve(o,X.detail.selector);const ne=X.detail.position?.start?.line;ne&&u(ne)}}}),Y(k),Y(w);var R=pe(w,2);{var U=X=>{var ne=hv(),re=G(ne);Jy(re,{get selector(){return _(o)}}),Y(ne),Ii(3,ne,()=>Ws,()=>({y:20})),xe(X,ne)};Bt(R,X=>{_(o)&&X(U)})}var $=pe(R,2);rv($,{get cssText(){return _(i)},get show(){return _(n)}});var Q=pe($,2),V=G(Q);nv(V,{get cleanedCss(){return _(t)}});var te=pe(V,2);lv(te,{get cssText(){return _(i)}}),Y(Q),Y(O),Y(d),os(2),Y(f),Tt(()=>{De(x,(_(r),Oe(()=>_(r).length))),De(C,_(n)?"Hide !important":"Show !important")}),Ii(1,c,()=>iu,()=>({duration:800,delay:100})),Ii(1,g,()=>Ws,()=>({y:50,duration:800,delay:200})),Jt("click",A,()=>ve(n,!_(n))),Ii(1,O,()=>Ws,()=>({y:50,duration:800,delay:400})),xe(s,f),oi()}export{Tv as component,Cv as universal};
